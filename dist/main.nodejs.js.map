{"version":3,"file":"main.nodejs.js","mappings":"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","sources":["../node_modules/@scrypted/sdk/dist/src/index.js","../node_modules/@scrypted/sdk/dist/types/gen/index.js","../node_modules/bl/BufferList.js","../node_modules/bl/bl.js","../node_modules/debug/src/browser.js","../node_modules/debug/src/common.js","../node_modules/debug/src/index.js","../node_modules/debug/src/node.js","../node_modules/duplexify/index.js","../node_modules/end-of-stream/index.js","../node_modules/has-flag/index.js","../node_modules/inherits/inherits.js","../node_modules/inherits/inherits_browser.js","../node_modules/js-sdsl/dist/esm/container/TreeContainer/Base/TreeNode.js","../node_modules/js-sdsl/dist/esm/container/ContainerBase/index.js","../node_modules/js-sdsl/dist/esm/utils/throwError.js","../node_modules/js-sdsl/dist/esm/container/TreeContainer/Base/index.js","../node_modules/js-sdsl/dist/esm/container/TreeContainer/Base/TreeIterator.js","../node_modules/js-sdsl/dist/esm/container/TreeContainer/OrderedSet.js","../node_modules/lru-cache/index.js","../node_modules/mqtt-packet/constants.js","../node_modules/mqtt-packet/generate.js","../node_modules/mqtt-packet/mqtt.js","../node_modules/mqtt-packet/numbers.js","../node_modules/mqtt-packet/packet.js","../node_modules/mqtt-packet/parser.js","../node_modules/mqtt-packet/writeToStream.js","../node_modules/mqtt/lib/client.js","../node_modules/mqtt/lib/connect/ali.js","../node_modules/mqtt/lib/connect/index.js","../node_modules/mqtt/lib/connect/tcp.js","../node_modules/mqtt/lib/connect/tls.js","../node_modules/mqtt/lib/connect/ws.js","../node_modules/mqtt/lib/connect/wx.js","../node_modules/mqtt/lib/default-message-id-provider.js","../node_modules/mqtt/lib/store.js","../node_modules/mqtt/lib/topic-alias-recv.js","../node_modules/mqtt/lib/topic-alias-send.js","../node_modules/mqtt/lib/unique-message-id-provider.js","../node_modules/mqtt/lib/validations.js","../node_modules/mqtt/mqtt.js","../node_modules/ms/index.js","../node_modules/number-allocator/index.js","../node_modules/number-allocator/lib/number-allocator.js","../node_modules/once/once.js","../node_modules/process-nextick-args/index.js","../node_modules/readable-stream/errors.js","../node_modules/readable-stream/lib/_stream_duplex.js","../node_modules/readable-stream/lib/_stream_passthrough.js","../node_modules/readable-stream/lib/_stream_readable.js","../node_modules/readable-stream/lib/_stream_transform.js","../node_modules/readable-stream/lib/_stream_writable.js","../node_modules/readable-stream/lib/internal/streams/async_iterator.js","../node_modules/readable-stream/lib/internal/streams/buffer_list.js","../node_modules/readable-stream/lib/internal/streams/destroy.js","../node_modules/readable-stream/lib/internal/streams/end-of-stream.js","../node_modules/readable-stream/lib/internal/streams/from.js","../node_modules/readable-stream/lib/internal/streams/pipeline.js","../node_modules/readable-stream/lib/internal/streams/state.js","../node_modules/readable-stream/lib/internal/streams/stream.js","../node_modules/readable-stream/readable.js","../node_modules/reinterval/index.js","../node_modules/rfdc/default.js","../node_modules/rfdc/index.js","../node_modules/safe-buffer/index.js","../node_modules/stream-shift/index.js","../node_modules/string_decoder/lib/string_decoder.js","../node_modules/supports-color/index.js","../src/main.ts","../src/types.ts","../node_modules/util-deprecate/node.js","../node_modules/wrappy/wrappy.js","../node_modules/ws/index.js","../node_modules/ws/lib/buffer-util.js","../node_modules/ws/lib/constants.js","../node_modules/ws/lib/event-target.js","../node_modules/ws/lib/extension.js","../node_modules/ws/lib/limiter.js","../node_modules/ws/lib/permessage-deflate.js","../node_modules/ws/lib/receiver.js","../node_modules/ws/lib/sender.js","../node_modules/ws/lib/stream.js","../node_modules/ws/lib/validation.js","../node_modules/ws/lib/websocket-server.js","../node_modules/ws/lib/websocket.js","../node_modules/xtend/immutable.js","../node_modules/yallist/iterator.js","../node_modules/yallist/yallist.js","../external node-commonjs \"buffer\"","../external node-commonjs \"crypto\"","../external node-commonjs \"events\"","../external node-commonjs \"http\"","../external node-commonjs \"https\"","../external node-commonjs \"net\"","../external node-commonjs \"os\"","../external node-commonjs \"stream\"","../external node-commonjs \"tls\"","../external node-commonjs \"tty\"","../external node-commonjs \"url\"","../external node-commonjs \"util\"","../external node-commonjs \"zlib\"","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/startup"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sdk = exports.MixinDeviceBase = exports.ScryptedDeviceBase = void 0;\n__exportStar(require(\"../types/gen/index\"), exports);\nconst index_1 = require(\"../types/gen/index\");\n/**\n * @category Core Reference\n */\nclass ScryptedDeviceBase extends index_1.DeviceBase {\n    constructor(nativeId) {\n        super();\n        this.nativeId = nativeId;\n    }\n    get storage() {\n        if (!this._storage) {\n            this._storage = deviceManager.getDeviceStorage(this.nativeId);\n        }\n        return this._storage;\n    }\n    get log() {\n        if (!this._log) {\n            this._log = deviceManager.getDeviceLogger(this.nativeId);\n        }\n        return this._log;\n    }\n    get console() {\n        if (!this._console) {\n            this._console = deviceManager.getDeviceConsole(this.nativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.nativeId);\n    }\n    _lazyLoadDeviceState() {\n        if (!this._deviceState) {\n            if (this.nativeId) {\n                this._deviceState = deviceManager.getDeviceState(this.nativeId);\n            }\n            else {\n                this._deviceState = deviceManager.getDeviceState();\n            }\n        }\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onDeviceEvent(this.nativeId, eventInterface, eventData);\n    }\n}\nexports.ScryptedDeviceBase = ScryptedDeviceBase;\n/**\n * @category Mixin Reference\n */\nclass MixinDeviceBase extends index_1.DeviceBase {\n    constructor(options) {\n        super();\n        this._listeners = new Set();\n        this.mixinDevice = options.mixinDevice;\n        this.mixinDeviceInterfaces = options.mixinDeviceInterfaces;\n        this.mixinStorageSuffix = options.mixinStorageSuffix;\n        this._deviceState = options.mixinDeviceState;\n        this.nativeId = systemManager.getDeviceById(this.id).nativeId;\n        this.mixinProviderNativeId = options.mixinProviderNativeId;\n        // RpcProxy will trap all properties, and the following check/hack will determine\n        // if the device state came from another node worker thread.\n        // This should ultimately be discouraged and warned at some point in the future.\n        if (this._deviceState.__rpcproxy_traps_all_properties && typeof this._deviceState.id === 'string') {\n            this._deviceState = deviceManager.createDeviceState(this._deviceState.id, this._deviceState.setState);\n        }\n    }\n    get storage() {\n        if (!this._storage) {\n            const mixinStorageSuffix = this.mixinStorageSuffix;\n            const mixinStorageKey = this.id + (mixinStorageSuffix ? ':' + mixinStorageSuffix : '');\n            this._storage = deviceManager.getMixinStorage(mixinStorageKey, this.mixinProviderNativeId);\n        }\n        return this._storage;\n    }\n    get console() {\n        if (!this._console) {\n            if (deviceManager.getMixinConsole)\n                this._console = deviceManager.getMixinConsole(this.id, this.mixinProviderNativeId);\n            else\n                this._console = deviceManager.getDeviceConsole(this.mixinProviderNativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.mixinProviderNativeId);\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onMixinEvent(this.id, this, eventInterface, eventData);\n    }\n    _lazyLoadDeviceState() {\n    }\n    manageListener(listener) {\n        this._listeners.add(listener);\n    }\n    release() {\n        for (const l of this._listeners) {\n            l.removeListener();\n        }\n    }\n}\nexports.MixinDeviceBase = MixinDeviceBase;\n(function () {\n    function _createGetState(state) {\n        return function () {\n            this._lazyLoadDeviceState();\n            // @ts-ignore: accessing private property\n            return this._deviceState?.[state];\n        };\n    }\n    function _createSetState(state) {\n        return function (value) {\n            this._lazyLoadDeviceState();\n            // @ts-ignore: accessing private property\n            if (!this._deviceState) {\n                console.warn('device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.');\n            }\n            else {\n                // @ts-ignore: accessing private property\n                this._deviceState[state] = value;\n            }\n        };\n    }\n    for (const field of Object.values(index_1.ScryptedInterfaceProperty)) {\n        if (field === index_1.ScryptedInterfaceProperty.nativeId)\n            continue;\n        Object.defineProperty(ScryptedDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n        Object.defineProperty(MixinDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n    }\n})();\nexports.sdk = {};\ntry {\n    let runtimeAPI;\n    try {\n        runtimeAPI = pluginRuntimeAPI;\n    }\n    catch (e) {\n    }\n    Object.assign(exports.sdk, {\n        log: deviceManager.getDeviceLogger(undefined),\n        deviceManager,\n        endpointManager,\n        mediaManager,\n        systemManager,\n        pluginHostAPI,\n        ...runtimeAPI,\n    });\n    try {\n        systemManager.setScryptedInterfaceDescriptors?.(index_1.TYPES_VERSION, index_1.ScryptedInterfaceDescriptors)?.catch(() => { });\n    }\n    catch (e) {\n    }\n}\ncatch (e) {\n    console.error('sdk initialization error, import @scrypted/types or use @scrypted/client instead', e);\n}\nexports.default = exports.sdk;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScryptedMimeTypes = exports.ScryptedInterface = exports.MediaPlayerState = exports.SecuritySystemObstruction = exports.SecuritySystemMode = exports.AirQuality = exports.AirPurifierMode = exports.AirPurifierStatus = exports.ChargeState = exports.LockState = exports.PanTiltZoomMovement = exports.ThermostatMode = exports.TemperatureUnit = exports.FanMode = exports.HumidityMode = exports.ScryptedDeviceType = exports.ScryptedInterfaceDescriptors = exports.ScryptedInterfaceMethod = exports.ScryptedInterfaceProperty = exports.DeviceBase = exports.TYPES_VERSION = void 0;\nexports.TYPES_VERSION = \"0.3.59\";\nclass DeviceBase {\n}\nexports.DeviceBase = DeviceBase;\nvar ScryptedInterfaceProperty;\n(function (ScryptedInterfaceProperty) {\n    ScryptedInterfaceProperty[\"id\"] = \"id\";\n    ScryptedInterfaceProperty[\"info\"] = \"info\";\n    ScryptedInterfaceProperty[\"interfaces\"] = \"interfaces\";\n    ScryptedInterfaceProperty[\"mixins\"] = \"mixins\";\n    ScryptedInterfaceProperty[\"name\"] = \"name\";\n    ScryptedInterfaceProperty[\"nativeId\"] = \"nativeId\";\n    ScryptedInterfaceProperty[\"pluginId\"] = \"pluginId\";\n    ScryptedInterfaceProperty[\"providedInterfaces\"] = \"providedInterfaces\";\n    ScryptedInterfaceProperty[\"providedName\"] = \"providedName\";\n    ScryptedInterfaceProperty[\"providedRoom\"] = \"providedRoom\";\n    ScryptedInterfaceProperty[\"providedType\"] = \"providedType\";\n    ScryptedInterfaceProperty[\"providerId\"] = \"providerId\";\n    ScryptedInterfaceProperty[\"room\"] = \"room\";\n    ScryptedInterfaceProperty[\"type\"] = \"type\";\n    ScryptedInterfaceProperty[\"scryptedRuntimeArguments\"] = \"scryptedRuntimeArguments\";\n    ScryptedInterfaceProperty[\"on\"] = \"on\";\n    ScryptedInterfaceProperty[\"brightness\"] = \"brightness\";\n    ScryptedInterfaceProperty[\"colorTemperature\"] = \"colorTemperature\";\n    ScryptedInterfaceProperty[\"rgb\"] = \"rgb\";\n    ScryptedInterfaceProperty[\"hsv\"] = \"hsv\";\n    ScryptedInterfaceProperty[\"running\"] = \"running\";\n    ScryptedInterfaceProperty[\"paused\"] = \"paused\";\n    ScryptedInterfaceProperty[\"docked\"] = \"docked\";\n    ScryptedInterfaceProperty[\"temperatureSetting\"] = \"temperatureSetting\";\n    ScryptedInterfaceProperty[\"temperature\"] = \"temperature\";\n    ScryptedInterfaceProperty[\"temperatureUnit\"] = \"temperatureUnit\";\n    ScryptedInterfaceProperty[\"humidity\"] = \"humidity\";\n    ScryptedInterfaceProperty[\"audioVolumes\"] = \"audioVolumes\";\n    ScryptedInterfaceProperty[\"recordingActive\"] = \"recordingActive\";\n    ScryptedInterfaceProperty[\"ptzCapabilities\"] = \"ptzCapabilities\";\n    ScryptedInterfaceProperty[\"lockState\"] = \"lockState\";\n    ScryptedInterfaceProperty[\"entryOpen\"] = \"entryOpen\";\n    ScryptedInterfaceProperty[\"batteryLevel\"] = \"batteryLevel\";\n    ScryptedInterfaceProperty[\"chargeState\"] = \"chargeState\";\n    ScryptedInterfaceProperty[\"online\"] = \"online\";\n    ScryptedInterfaceProperty[\"fromMimeType\"] = \"fromMimeType\";\n    ScryptedInterfaceProperty[\"toMimeType\"] = \"toMimeType\";\n    ScryptedInterfaceProperty[\"converters\"] = \"converters\";\n    ScryptedInterfaceProperty[\"binaryState\"] = \"binaryState\";\n    ScryptedInterfaceProperty[\"tampered\"] = \"tampered\";\n    ScryptedInterfaceProperty[\"powerDetected\"] = \"powerDetected\";\n    ScryptedInterfaceProperty[\"audioDetected\"] = \"audioDetected\";\n    ScryptedInterfaceProperty[\"motionDetected\"] = \"motionDetected\";\n    ScryptedInterfaceProperty[\"ambientLight\"] = \"ambientLight\";\n    ScryptedInterfaceProperty[\"occupied\"] = \"occupied\";\n    ScryptedInterfaceProperty[\"flooded\"] = \"flooded\";\n    ScryptedInterfaceProperty[\"ultraviolet\"] = \"ultraviolet\";\n    ScryptedInterfaceProperty[\"luminance\"] = \"luminance\";\n    ScryptedInterfaceProperty[\"position\"] = \"position\";\n    ScryptedInterfaceProperty[\"securitySystemState\"] = \"securitySystemState\";\n    ScryptedInterfaceProperty[\"pm10Density\"] = \"pm10Density\";\n    ScryptedInterfaceProperty[\"pm25Density\"] = \"pm25Density\";\n    ScryptedInterfaceProperty[\"vocDensity\"] = \"vocDensity\";\n    ScryptedInterfaceProperty[\"noxDensity\"] = \"noxDensity\";\n    ScryptedInterfaceProperty[\"co2ppm\"] = \"co2ppm\";\n    ScryptedInterfaceProperty[\"airQuality\"] = \"airQuality\";\n    ScryptedInterfaceProperty[\"airPurifierState\"] = \"airPurifierState\";\n    ScryptedInterfaceProperty[\"filterChangeIndication\"] = \"filterChangeIndication\";\n    ScryptedInterfaceProperty[\"filterLifeLevel\"] = \"filterLifeLevel\";\n    ScryptedInterfaceProperty[\"humiditySetting\"] = \"humiditySetting\";\n    ScryptedInterfaceProperty[\"fan\"] = \"fan\";\n    ScryptedInterfaceProperty[\"applicationInfo\"] = \"applicationInfo\";\n    ScryptedInterfaceProperty[\"systemDevice\"] = \"systemDevice\";\n})(ScryptedInterfaceProperty || (exports.ScryptedInterfaceProperty = ScryptedInterfaceProperty = {}));\nvar ScryptedInterfaceMethod;\n(function (ScryptedInterfaceMethod) {\n    ScryptedInterfaceMethod[\"listen\"] = \"listen\";\n    ScryptedInterfaceMethod[\"probe\"] = \"probe\";\n    ScryptedInterfaceMethod[\"setMixins\"] = \"setMixins\";\n    ScryptedInterfaceMethod[\"setName\"] = \"setName\";\n    ScryptedInterfaceMethod[\"setRoom\"] = \"setRoom\";\n    ScryptedInterfaceMethod[\"setType\"] = \"setType\";\n    ScryptedInterfaceMethod[\"getPluginJson\"] = \"getPluginJson\";\n    ScryptedInterfaceMethod[\"turnOff\"] = \"turnOff\";\n    ScryptedInterfaceMethod[\"turnOn\"] = \"turnOn\";\n    ScryptedInterfaceMethod[\"setBrightness\"] = \"setBrightness\";\n    ScryptedInterfaceMethod[\"getTemperatureMaxK\"] = \"getTemperatureMaxK\";\n    ScryptedInterfaceMethod[\"getTemperatureMinK\"] = \"getTemperatureMinK\";\n    ScryptedInterfaceMethod[\"setColorTemperature\"] = \"setColorTemperature\";\n    ScryptedInterfaceMethod[\"setRgb\"] = \"setRgb\";\n    ScryptedInterfaceMethod[\"setHsv\"] = \"setHsv\";\n    ScryptedInterfaceMethod[\"sendNotification\"] = \"sendNotification\";\n    ScryptedInterfaceMethod[\"start\"] = \"start\";\n    ScryptedInterfaceMethod[\"stop\"] = \"stop\";\n    ScryptedInterfaceMethod[\"pause\"] = \"pause\";\n    ScryptedInterfaceMethod[\"resume\"] = \"resume\";\n    ScryptedInterfaceMethod[\"dock\"] = \"dock\";\n    ScryptedInterfaceMethod[\"setTemperature\"] = \"setTemperature\";\n    ScryptedInterfaceMethod[\"setTemperatureUnit\"] = \"setTemperatureUnit\";\n    ScryptedInterfaceMethod[\"getPictureOptions\"] = \"getPictureOptions\";\n    ScryptedInterfaceMethod[\"takePicture\"] = \"takePicture\";\n    ScryptedInterfaceMethod[\"getAudioStream\"] = \"getAudioStream\";\n    ScryptedInterfaceMethod[\"setAudioVolumes\"] = \"setAudioVolumes\";\n    ScryptedInterfaceMethod[\"startDisplay\"] = \"startDisplay\";\n    ScryptedInterfaceMethod[\"stopDisplay\"] = \"stopDisplay\";\n    ScryptedInterfaceMethod[\"getVideoStream\"] = \"getVideoStream\";\n    ScryptedInterfaceMethod[\"getVideoStreamOptions\"] = \"getVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"getPrivacyMasks\"] = \"getPrivacyMasks\";\n    ScryptedInterfaceMethod[\"setPrivacyMasks\"] = \"setPrivacyMasks\";\n    ScryptedInterfaceMethod[\"getRecordingStream\"] = \"getRecordingStream\";\n    ScryptedInterfaceMethod[\"getRecordingStreamCurrentTime\"] = \"getRecordingStreamCurrentTime\";\n    ScryptedInterfaceMethod[\"getRecordingStreamOptions\"] = \"getRecordingStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStreamThumbnail\"] = \"getRecordingStreamThumbnail\";\n    ScryptedInterfaceMethod[\"deleteRecordingStream\"] = \"deleteRecordingStream\";\n    ScryptedInterfaceMethod[\"setRecordingActive\"] = \"setRecordingActive\";\n    ScryptedInterfaceMethod[\"ptzCommand\"] = \"ptzCommand\";\n    ScryptedInterfaceMethod[\"getRecordedEvents\"] = \"getRecordedEvents\";\n    ScryptedInterfaceMethod[\"getVideoClip\"] = \"getVideoClip\";\n    ScryptedInterfaceMethod[\"getVideoClipThumbnail\"] = \"getVideoClipThumbnail\";\n    ScryptedInterfaceMethod[\"getVideoClips\"] = \"getVideoClips\";\n    ScryptedInterfaceMethod[\"removeVideoClips\"] = \"removeVideoClips\";\n    ScryptedInterfaceMethod[\"setVideoStreamOptions\"] = \"setVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"startIntercom\"] = \"startIntercom\";\n    ScryptedInterfaceMethod[\"stopIntercom\"] = \"stopIntercom\";\n    ScryptedInterfaceMethod[\"lock\"] = \"lock\";\n    ScryptedInterfaceMethod[\"unlock\"] = \"unlock\";\n    ScryptedInterfaceMethod[\"addPassword\"] = \"addPassword\";\n    ScryptedInterfaceMethod[\"getPasswords\"] = \"getPasswords\";\n    ScryptedInterfaceMethod[\"removePassword\"] = \"removePassword\";\n    ScryptedInterfaceMethod[\"activate\"] = \"activate\";\n    ScryptedInterfaceMethod[\"deactivate\"] = \"deactivate\";\n    ScryptedInterfaceMethod[\"isReversible\"] = \"isReversible\";\n    ScryptedInterfaceMethod[\"closeEntry\"] = \"closeEntry\";\n    ScryptedInterfaceMethod[\"openEntry\"] = \"openEntry\";\n    ScryptedInterfaceMethod[\"getDevice\"] = \"getDevice\";\n    ScryptedInterfaceMethod[\"releaseDevice\"] = \"releaseDevice\";\n    ScryptedInterfaceMethod[\"adoptDevice\"] = \"adoptDevice\";\n    ScryptedInterfaceMethod[\"discoverDevices\"] = \"discoverDevices\";\n    ScryptedInterfaceMethod[\"createDevice\"] = \"createDevice\";\n    ScryptedInterfaceMethod[\"getCreateDeviceSettings\"] = \"getCreateDeviceSettings\";\n    ScryptedInterfaceMethod[\"reboot\"] = \"reboot\";\n    ScryptedInterfaceMethod[\"getRefreshFrequency\"] = \"getRefreshFrequency\";\n    ScryptedInterfaceMethod[\"refresh\"] = \"refresh\";\n    ScryptedInterfaceMethod[\"getMediaStatus\"] = \"getMediaStatus\";\n    ScryptedInterfaceMethod[\"load\"] = \"load\";\n    ScryptedInterfaceMethod[\"seek\"] = \"seek\";\n    ScryptedInterfaceMethod[\"skipNext\"] = \"skipNext\";\n    ScryptedInterfaceMethod[\"skipPrevious\"] = \"skipPrevious\";\n    ScryptedInterfaceMethod[\"convert\"] = \"convert\";\n    ScryptedInterfaceMethod[\"convertMedia\"] = \"convertMedia\";\n    ScryptedInterfaceMethod[\"getSettings\"] = \"getSettings\";\n    ScryptedInterfaceMethod[\"putSetting\"] = \"putSetting\";\n    ScryptedInterfaceMethod[\"armSecuritySystem\"] = \"armSecuritySystem\";\n    ScryptedInterfaceMethod[\"disarmSecuritySystem\"] = \"disarmSecuritySystem\";\n    ScryptedInterfaceMethod[\"setAirPurifierState\"] = \"setAirPurifierState\";\n    ScryptedInterfaceMethod[\"getReadmeMarkdown\"] = \"getReadmeMarkdown\";\n    ScryptedInterfaceMethod[\"getOauthUrl\"] = \"getOauthUrl\";\n    ScryptedInterfaceMethod[\"onOauthCallback\"] = \"onOauthCallback\";\n    ScryptedInterfaceMethod[\"canMixin\"] = \"canMixin\";\n    ScryptedInterfaceMethod[\"getMixin\"] = \"getMixin\";\n    ScryptedInterfaceMethod[\"releaseMixin\"] = \"releaseMixin\";\n    ScryptedInterfaceMethod[\"onRequest\"] = \"onRequest\";\n    ScryptedInterfaceMethod[\"onConnection\"] = \"onConnection\";\n    ScryptedInterfaceMethod[\"onPush\"] = \"onPush\";\n    ScryptedInterfaceMethod[\"run\"] = \"run\";\n    ScryptedInterfaceMethod[\"eval\"] = \"eval\";\n    ScryptedInterfaceMethod[\"loadScripts\"] = \"loadScripts\";\n    ScryptedInterfaceMethod[\"saveScript\"] = \"saveScript\";\n    ScryptedInterfaceMethod[\"trackObjects\"] = \"trackObjects\";\n    ScryptedInterfaceMethod[\"getDetectionInput\"] = \"getDetectionInput\";\n    ScryptedInterfaceMethod[\"getObjectTypes\"] = \"getObjectTypes\";\n    ScryptedInterfaceMethod[\"detectObjects\"] = \"detectObjects\";\n    ScryptedInterfaceMethod[\"generateObjectDetections\"] = \"generateObjectDetections\";\n    ScryptedInterfaceMethod[\"getDetectionModel\"] = \"getDetectionModel\";\n    ScryptedInterfaceMethod[\"setHumidity\"] = \"setHumidity\";\n    ScryptedInterfaceMethod[\"setFan\"] = \"setFan\";\n    ScryptedInterfaceMethod[\"startRTCSignalingSession\"] = \"startRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"createRTCSignalingSession\"] = \"createRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"getScryptedUserAccessControl\"] = \"getScryptedUserAccessControl\";\n    ScryptedInterfaceMethod[\"generateVideoFrames\"] = \"generateVideoFrames\";\n    ScryptedInterfaceMethod[\"connectStream\"] = \"connectStream\";\n    ScryptedInterfaceMethod[\"getTTYSettings\"] = \"getTTYSettings\";\n})(ScryptedInterfaceMethod || (exports.ScryptedInterfaceMethod = ScryptedInterfaceMethod = {}));\nexports.ScryptedInterfaceDescriptors = {\n    ScryptedDevice: {\n        name: 'ScryptedDevice',\n        methods: [\n            'listen',\n            'probe',\n            'setMixins',\n            'setName',\n            'setRoom',\n            'setType'\n        ],\n        properties: [\n            'id',\n            'info',\n            'interfaces',\n            'mixins',\n            'name',\n            'nativeId',\n            'pluginId',\n            'providedInterfaces',\n            'providedName',\n            'providedRoom',\n            'providedType',\n            'providerId',\n            'room',\n            'type'\n        ]\n    },\n    ScryptedPlugin: {\n        name: 'ScryptedPlugin',\n        methods: [\n            'getPluginJson'\n        ],\n        properties: []\n    },\n    ScryptedPluginRuntime: {\n        name: 'ScryptedPluginRuntime',\n        methods: [],\n        properties: [\n            'scryptedRuntimeArguments'\n        ]\n    },\n    OnOff: {\n        name: 'OnOff',\n        methods: [\n            'turnOff',\n            'turnOn'\n        ],\n        properties: [\n            'on'\n        ]\n    },\n    Brightness: {\n        name: 'Brightness',\n        methods: [\n            'setBrightness'\n        ],\n        properties: [\n            'brightness'\n        ]\n    },\n    ColorSettingTemperature: {\n        name: 'ColorSettingTemperature',\n        methods: [\n            'getTemperatureMaxK',\n            'getTemperatureMinK',\n            'setColorTemperature'\n        ],\n        properties: [\n            'colorTemperature'\n        ]\n    },\n    ColorSettingRgb: {\n        name: 'ColorSettingRgb',\n        methods: [\n            'setRgb'\n        ],\n        properties: [\n            'rgb'\n        ]\n    },\n    ColorSettingHsv: {\n        name: 'ColorSettingHsv',\n        methods: [\n            'setHsv'\n        ],\n        properties: [\n            'hsv'\n        ]\n    },\n    Notifier: {\n        name: 'Notifier',\n        methods: [\n            'sendNotification'\n        ],\n        properties: []\n    },\n    StartStop: {\n        name: 'StartStop',\n        methods: [\n            'start',\n            'stop'\n        ],\n        properties: [\n            'running'\n        ]\n    },\n    Pause: {\n        name: 'Pause',\n        methods: [\n            'pause',\n            'resume'\n        ],\n        properties: [\n            'paused'\n        ]\n    },\n    Dock: {\n        name: 'Dock',\n        methods: [\n            'dock'\n        ],\n        properties: [\n            'docked'\n        ]\n    },\n    TemperatureSetting: {\n        name: 'TemperatureSetting',\n        methods: [\n            'setTemperature'\n        ],\n        properties: [\n            'temperatureSetting'\n        ]\n    },\n    Thermometer: {\n        name: 'Thermometer',\n        methods: [\n            'setTemperatureUnit'\n        ],\n        properties: [\n            'temperature',\n            'temperatureUnit'\n        ]\n    },\n    HumiditySensor: {\n        name: 'HumiditySensor',\n        methods: [],\n        properties: [\n            'humidity'\n        ]\n    },\n    Camera: {\n        name: 'Camera',\n        methods: [\n            'getPictureOptions',\n            'takePicture'\n        ],\n        properties: []\n    },\n    Microphone: {\n        name: 'Microphone',\n        methods: [\n            'getAudioStream'\n        ],\n        properties: []\n    },\n    AudioVolumeControl: {\n        name: 'AudioVolumeControl',\n        methods: [\n            'setAudioVolumes'\n        ],\n        properties: [\n            'audioVolumes'\n        ]\n    },\n    Display: {\n        name: 'Display',\n        methods: [\n            'startDisplay',\n            'stopDisplay'\n        ],\n        properties: []\n    },\n    VideoCamera: {\n        name: 'VideoCamera',\n        methods: [\n            'getVideoStream',\n            'getVideoStreamOptions'\n        ],\n        properties: []\n    },\n    VideoCameraMask: {\n        name: 'VideoCameraMask',\n        methods: [\n            'getPrivacyMasks',\n            'setPrivacyMasks'\n        ],\n        properties: []\n    },\n    VideoRecorder: {\n        name: 'VideoRecorder',\n        methods: [\n            'getRecordingStream',\n            'getRecordingStreamCurrentTime',\n            'getRecordingStreamOptions',\n            'getRecordingStreamThumbnail'\n        ],\n        properties: [\n            'recordingActive'\n        ]\n    },\n    VideoRecorderManagement: {\n        name: 'VideoRecorderManagement',\n        methods: [\n            'deleteRecordingStream',\n            'setRecordingActive'\n        ],\n        properties: []\n    },\n    PanTiltZoom: {\n        name: 'PanTiltZoom',\n        methods: [\n            'ptzCommand'\n        ],\n        properties: [\n            'ptzCapabilities'\n        ]\n    },\n    EventRecorder: {\n        name: 'EventRecorder',\n        methods: [\n            'getRecordedEvents'\n        ],\n        properties: []\n    },\n    VideoClips: {\n        name: 'VideoClips',\n        methods: [\n            'getVideoClip',\n            'getVideoClipThumbnail',\n            'getVideoClips',\n            'removeVideoClips'\n        ],\n        properties: []\n    },\n    VideoCameraConfiguration: {\n        name: 'VideoCameraConfiguration',\n        methods: [\n            'setVideoStreamOptions'\n        ],\n        properties: []\n    },\n    Intercom: {\n        name: 'Intercom',\n        methods: [\n            'startIntercom',\n            'stopIntercom'\n        ],\n        properties: []\n    },\n    Lock: {\n        name: 'Lock',\n        methods: [\n            'lock',\n            'unlock'\n        ],\n        properties: [\n            'lockState'\n        ]\n    },\n    PasswordStore: {\n        name: 'PasswordStore',\n        methods: [\n            'addPassword',\n            'getPasswords',\n            'removePassword'\n        ],\n        properties: []\n    },\n    Scene: {\n        name: 'Scene',\n        methods: [\n            'activate',\n            'deactivate',\n            'isReversible'\n        ],\n        properties: []\n    },\n    Entry: {\n        name: 'Entry',\n        methods: [\n            'closeEntry',\n            'openEntry'\n        ],\n        properties: []\n    },\n    EntrySensor: {\n        name: 'EntrySensor',\n        methods: [],\n        properties: [\n            'entryOpen'\n        ]\n    },\n    DeviceProvider: {\n        name: 'DeviceProvider',\n        methods: [\n            'getDevice',\n            'releaseDevice'\n        ],\n        properties: []\n    },\n    DeviceDiscovery: {\n        name: 'DeviceDiscovery',\n        methods: [\n            'adoptDevice',\n            'discoverDevices'\n        ],\n        properties: []\n    },\n    DeviceCreator: {\n        name: 'DeviceCreator',\n        methods: [\n            'createDevice',\n            'getCreateDeviceSettings'\n        ],\n        properties: []\n    },\n    Battery: {\n        name: 'Battery',\n        methods: [],\n        properties: [\n            'batteryLevel'\n        ]\n    },\n    Charger: {\n        name: 'Charger',\n        methods: [],\n        properties: [\n            'chargeState'\n        ]\n    },\n    Reboot: {\n        name: 'Reboot',\n        methods: [\n            'reboot'\n        ],\n        properties: []\n    },\n    Refresh: {\n        name: 'Refresh',\n        methods: [\n            'getRefreshFrequency',\n            'refresh'\n        ],\n        properties: []\n    },\n    MediaPlayer: {\n        name: 'MediaPlayer',\n        methods: [\n            'getMediaStatus',\n            'load',\n            'seek',\n            'skipNext',\n            'skipPrevious'\n        ],\n        properties: []\n    },\n    Online: {\n        name: 'Online',\n        methods: [],\n        properties: [\n            'online'\n        ]\n    },\n    BufferConverter: {\n        name: 'BufferConverter',\n        methods: [\n            'convert'\n        ],\n        properties: [\n            'fromMimeType',\n            'toMimeType'\n        ]\n    },\n    MediaConverter: {\n        name: 'MediaConverter',\n        methods: [\n            'convertMedia'\n        ],\n        properties: [\n            'converters'\n        ]\n    },\n    Settings: {\n        name: 'Settings',\n        methods: [\n            'getSettings',\n            'putSetting'\n        ],\n        properties: []\n    },\n    BinarySensor: {\n        name: 'BinarySensor',\n        methods: [],\n        properties: [\n            'binaryState'\n        ]\n    },\n    TamperSensor: {\n        name: 'TamperSensor',\n        methods: [],\n        properties: [\n            'tampered'\n        ]\n    },\n    PowerSensor: {\n        name: 'PowerSensor',\n        methods: [],\n        properties: [\n            'powerDetected'\n        ]\n    },\n    AudioSensor: {\n        name: 'AudioSensor',\n        methods: [],\n        properties: [\n            'audioDetected'\n        ]\n    },\n    MotionSensor: {\n        name: 'MotionSensor',\n        methods: [],\n        properties: [\n            'motionDetected'\n        ]\n    },\n    AmbientLightSensor: {\n        name: 'AmbientLightSensor',\n        methods: [],\n        properties: [\n            'ambientLight'\n        ]\n    },\n    OccupancySensor: {\n        name: 'OccupancySensor',\n        methods: [],\n        properties: [\n            'occupied'\n        ]\n    },\n    FloodSensor: {\n        name: 'FloodSensor',\n        methods: [],\n        properties: [\n            'flooded'\n        ]\n    },\n    UltravioletSensor: {\n        name: 'UltravioletSensor',\n        methods: [],\n        properties: [\n            'ultraviolet'\n        ]\n    },\n    LuminanceSensor: {\n        name: 'LuminanceSensor',\n        methods: [],\n        properties: [\n            'luminance'\n        ]\n    },\n    PositionSensor: {\n        name: 'PositionSensor',\n        methods: [],\n        properties: [\n            'position'\n        ]\n    },\n    SecuritySystem: {\n        name: 'SecuritySystem',\n        methods: [\n            'armSecuritySystem',\n            'disarmSecuritySystem'\n        ],\n        properties: [\n            'securitySystemState'\n        ]\n    },\n    PM10Sensor: {\n        name: 'PM10Sensor',\n        methods: [],\n        properties: [\n            'pm10Density'\n        ]\n    },\n    PM25Sensor: {\n        name: 'PM25Sensor',\n        methods: [],\n        properties: [\n            'pm25Density'\n        ]\n    },\n    VOCSensor: {\n        name: 'VOCSensor',\n        methods: [],\n        properties: [\n            'vocDensity'\n        ]\n    },\n    NOXSensor: {\n        name: 'NOXSensor',\n        methods: [],\n        properties: [\n            'noxDensity'\n        ]\n    },\n    CO2Sensor: {\n        name: 'CO2Sensor',\n        methods: [],\n        properties: [\n            'co2ppm'\n        ]\n    },\n    AirQualitySensor: {\n        name: 'AirQualitySensor',\n        methods: [],\n        properties: [\n            'airQuality'\n        ]\n    },\n    AirPurifier: {\n        name: 'AirPurifier',\n        methods: [\n            'setAirPurifierState'\n        ],\n        properties: [\n            'airPurifierState'\n        ]\n    },\n    FilterMaintenance: {\n        name: 'FilterMaintenance',\n        methods: [],\n        properties: [\n            'filterChangeIndication',\n            'filterLifeLevel'\n        ]\n    },\n    Readme: {\n        name: 'Readme',\n        methods: [\n            'getReadmeMarkdown'\n        ],\n        properties: []\n    },\n    OauthClient: {\n        name: 'OauthClient',\n        methods: [\n            'getOauthUrl',\n            'onOauthCallback'\n        ],\n        properties: []\n    },\n    MixinProvider: {\n        name: 'MixinProvider',\n        methods: [\n            'canMixin',\n            'getMixin',\n            'releaseMixin'\n        ],\n        properties: []\n    },\n    HttpRequestHandler: {\n        name: 'HttpRequestHandler',\n        methods: [\n            'onRequest'\n        ],\n        properties: []\n    },\n    EngineIOHandler: {\n        name: 'EngineIOHandler',\n        methods: [\n            'onConnection'\n        ],\n        properties: []\n    },\n    PushHandler: {\n        name: 'PushHandler',\n        methods: [\n            'onPush'\n        ],\n        properties: []\n    },\n    Program: {\n        name: 'Program',\n        methods: [\n            'run'\n        ],\n        properties: []\n    },\n    Scriptable: {\n        name: 'Scriptable',\n        methods: [\n            'eval',\n            'loadScripts',\n            'saveScript'\n        ],\n        properties: []\n    },\n    ObjectTracker: {\n        name: 'ObjectTracker',\n        methods: [\n            'trackObjects'\n        ],\n        properties: []\n    },\n    ObjectDetector: {\n        name: 'ObjectDetector',\n        methods: [\n            'getDetectionInput',\n            'getObjectTypes'\n        ],\n        properties: []\n    },\n    ObjectDetection: {\n        name: 'ObjectDetection',\n        methods: [\n            'detectObjects',\n            'generateObjectDetections',\n            'getDetectionModel'\n        ],\n        properties: []\n    },\n    ObjectDetectionPreview: {\n        name: 'ObjectDetectionPreview',\n        methods: [],\n        properties: []\n    },\n    ObjectDetectionGenerator: {\n        name: 'ObjectDetectionGenerator',\n        methods: [],\n        properties: []\n    },\n    HumiditySetting: {\n        name: 'HumiditySetting',\n        methods: [\n            'setHumidity'\n        ],\n        properties: [\n            'humiditySetting'\n        ]\n    },\n    Fan: {\n        name: 'Fan',\n        methods: [\n            'setFan'\n        ],\n        properties: [\n            'fan'\n        ]\n    },\n    RTCSignalingChannel: {\n        name: 'RTCSignalingChannel',\n        methods: [\n            'startRTCSignalingSession'\n        ],\n        properties: []\n    },\n    RTCSignalingClient: {\n        name: 'RTCSignalingClient',\n        methods: [\n            'createRTCSignalingSession'\n        ],\n        properties: []\n    },\n    LauncherApplication: {\n        name: 'LauncherApplication',\n        methods: [],\n        properties: [\n            'applicationInfo'\n        ]\n    },\n    ScryptedUser: {\n        name: 'ScryptedUser',\n        methods: [\n            'getScryptedUserAccessControl'\n        ],\n        properties: []\n    },\n    VideoFrameGenerator: {\n        name: 'VideoFrameGenerator',\n        methods: [\n            'generateVideoFrames'\n        ],\n        properties: []\n    },\n    StreamService: {\n        name: 'StreamService',\n        methods: [\n            'connectStream'\n        ],\n        properties: []\n    },\n    TTY: {\n        name: 'TTY',\n        methods: [],\n        properties: []\n    },\n    TTYSettings: {\n        name: 'TTYSettings',\n        methods: [\n            'getTTYSettings'\n        ],\n        properties: []\n    },\n    ScryptedSystemDevice: {\n        name: 'ScryptedSystemDevice',\n        methods: [],\n        properties: [\n            'systemDevice'\n        ]\n    },\n    ScryptedDeviceCreator: {\n        name: 'ScryptedDeviceCreator',\n        methods: [],\n        properties: []\n    },\n    ScryptedSettings: {\n        name: 'ScryptedSettings',\n        methods: [],\n        properties: []\n    }\n};\n/**\n * @category Core Reference\n */\nvar ScryptedDeviceType;\n(function (ScryptedDeviceType) {\n    ScryptedDeviceType[\"Builtin\"] = \"Builtin\";\n    ScryptedDeviceType[\"Camera\"] = \"Camera\";\n    ScryptedDeviceType[\"Fan\"] = \"Fan\";\n    ScryptedDeviceType[\"Light\"] = \"Light\";\n    ScryptedDeviceType[\"Switch\"] = \"Switch\";\n    ScryptedDeviceType[\"Outlet\"] = \"Outlet\";\n    ScryptedDeviceType[\"Sensor\"] = \"Sensor\";\n    ScryptedDeviceType[\"Scene\"] = \"Scene\";\n    ScryptedDeviceType[\"Program\"] = \"Program\";\n    ScryptedDeviceType[\"Automation\"] = \"Automation\";\n    ScryptedDeviceType[\"Vacuum\"] = \"Vacuum\";\n    ScryptedDeviceType[\"Notifier\"] = \"Notifier\";\n    ScryptedDeviceType[\"Thermostat\"] = \"Thermostat\";\n    ScryptedDeviceType[\"Lock\"] = \"Lock\";\n    ScryptedDeviceType[\"PasswordControl\"] = \"PasswordControl\";\n    /**\n     * Displays have audio and video output.\n     */\n    ScryptedDeviceType[\"Display\"] = \"Display\";\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    ScryptedDeviceType[\"SmartDisplay\"] = \"SmartDisplay\";\n    ScryptedDeviceType[\"Speaker\"] = \"Speaker\";\n    /**\n     * Smart Speakers have two way audio.\n     */\n    ScryptedDeviceType[\"SmartSpeaker\"] = \"SmartSpeaker\";\n    ScryptedDeviceType[\"Event\"] = \"Event\";\n    ScryptedDeviceType[\"Entry\"] = \"Entry\";\n    ScryptedDeviceType[\"Garage\"] = \"Garage\";\n    ScryptedDeviceType[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedDeviceType[\"DataSource\"] = \"DataSource\";\n    ScryptedDeviceType[\"API\"] = \"API\";\n    ScryptedDeviceType[\"Doorbell\"] = \"Doorbell\";\n    ScryptedDeviceType[\"Irrigation\"] = \"Irrigation\";\n    ScryptedDeviceType[\"Valve\"] = \"Valve\";\n    ScryptedDeviceType[\"Person\"] = \"Person\";\n    ScryptedDeviceType[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedDeviceType[\"WindowCovering\"] = \"WindowCovering\";\n    ScryptedDeviceType[\"Siren\"] = \"Siren\";\n    ScryptedDeviceType[\"AirPurifier\"] = \"AirPurifier\";\n    ScryptedDeviceType[\"Unknown\"] = \"Unknown\";\n})(ScryptedDeviceType || (exports.ScryptedDeviceType = ScryptedDeviceType = {}));\nvar HumidityMode;\n(function (HumidityMode) {\n    HumidityMode[\"Humidify\"] = \"Humidify\";\n    HumidityMode[\"Dehumidify\"] = \"Dehumidify\";\n    HumidityMode[\"Auto\"] = \"Auto\";\n    HumidityMode[\"Off\"] = \"Off\";\n})(HumidityMode || (exports.HumidityMode = HumidityMode = {}));\nvar FanMode;\n(function (FanMode) {\n    FanMode[\"Auto\"] = \"Auto\";\n    FanMode[\"Manual\"] = \"Manual\";\n})(FanMode || (exports.FanMode = FanMode = {}));\nvar TemperatureUnit;\n(function (TemperatureUnit) {\n    TemperatureUnit[\"C\"] = \"C\";\n    TemperatureUnit[\"F\"] = \"F\";\n})(TemperatureUnit || (exports.TemperatureUnit = TemperatureUnit = {}));\nvar ThermostatMode;\n(function (ThermostatMode) {\n    ThermostatMode[\"Off\"] = \"Off\";\n    ThermostatMode[\"Cool\"] = \"Cool\";\n    ThermostatMode[\"Heat\"] = \"Heat\";\n    ThermostatMode[\"HeatCool\"] = \"HeatCool\";\n    ThermostatMode[\"Auto\"] = \"Auto\";\n    ThermostatMode[\"FanOnly\"] = \"FanOnly\";\n    ThermostatMode[\"Purifier\"] = \"Purifier\";\n    ThermostatMode[\"Eco\"] = \"Eco\";\n    ThermostatMode[\"Dry\"] = \"Dry\";\n    ThermostatMode[\"On\"] = \"On\";\n})(ThermostatMode || (exports.ThermostatMode = ThermostatMode = {}));\nvar PanTiltZoomMovement;\n(function (PanTiltZoomMovement) {\n    PanTiltZoomMovement[\"Absolute\"] = \"Absolute\";\n    PanTiltZoomMovement[\"Relative\"] = \"Relative\";\n    PanTiltZoomMovement[\"Continuous\"] = \"Continuous\";\n    PanTiltZoomMovement[\"Preset\"] = \"Preset\";\n    PanTiltZoomMovement[\"Home\"] = \"Home\";\n})(PanTiltZoomMovement || (exports.PanTiltZoomMovement = PanTiltZoomMovement = {}));\nvar LockState;\n(function (LockState) {\n    LockState[\"Locked\"] = \"Locked\";\n    LockState[\"Unlocked\"] = \"Unlocked\";\n    LockState[\"Jammed\"] = \"Jammed\";\n})(LockState || (exports.LockState = LockState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"Trickle\"] = \"trickle\";\n    ChargeState[\"Charging\"] = \"charging\";\n    ChargeState[\"NotCharging\"] = \"not-charging\";\n})(ChargeState || (exports.ChargeState = ChargeState = {}));\nvar AirPurifierStatus;\n(function (AirPurifierStatus) {\n    AirPurifierStatus[\"Inactive\"] = \"Inactive\";\n    AirPurifierStatus[\"Idle\"] = \"Idle\";\n    AirPurifierStatus[\"Active\"] = \"Active\";\n    AirPurifierStatus[\"ActiveNightMode\"] = \"ActiveNightMode\";\n})(AirPurifierStatus || (exports.AirPurifierStatus = AirPurifierStatus = {}));\nvar AirPurifierMode;\n(function (AirPurifierMode) {\n    AirPurifierMode[\"Manual\"] = \"Manual\";\n    AirPurifierMode[\"Automatic\"] = \"Automatic\";\n})(AirPurifierMode || (exports.AirPurifierMode = AirPurifierMode = {}));\nvar AirQuality;\n(function (AirQuality) {\n    AirQuality[\"Unknown\"] = \"Unknown\";\n    AirQuality[\"Excellent\"] = \"Excellent\";\n    AirQuality[\"Good\"] = \"Good\";\n    AirQuality[\"Fair\"] = \"Fair\";\n    AirQuality[\"Inferior\"] = \"Inferior\";\n    AirQuality[\"Poor\"] = \"Poor\";\n})(AirQuality || (exports.AirQuality = AirQuality = {}));\nvar SecuritySystemMode;\n(function (SecuritySystemMode) {\n    SecuritySystemMode[\"Disarmed\"] = \"Disarmed\";\n    SecuritySystemMode[\"HomeArmed\"] = \"HomeArmed\";\n    SecuritySystemMode[\"AwayArmed\"] = \"AwayArmed\";\n    SecuritySystemMode[\"NightArmed\"] = \"NightArmed\";\n})(SecuritySystemMode || (exports.SecuritySystemMode = SecuritySystemMode = {}));\nvar SecuritySystemObstruction;\n(function (SecuritySystemObstruction) {\n    SecuritySystemObstruction[\"Sensor\"] = \"Sensor\";\n    SecuritySystemObstruction[\"Occupied\"] = \"Occupied\";\n    SecuritySystemObstruction[\"Time\"] = \"Time\";\n    SecuritySystemObstruction[\"Error\"] = \"Error\";\n})(SecuritySystemObstruction || (exports.SecuritySystemObstruction = SecuritySystemObstruction = {}));\nvar MediaPlayerState;\n(function (MediaPlayerState) {\n    MediaPlayerState[\"Idle\"] = \"Idle\";\n    MediaPlayerState[\"Playing\"] = \"Playing\";\n    MediaPlayerState[\"Paused\"] = \"Paused\";\n    MediaPlayerState[\"Buffering\"] = \"Buffering\";\n})(MediaPlayerState || (exports.MediaPlayerState = MediaPlayerState = {}));\nvar ScryptedInterface;\n(function (ScryptedInterface) {\n    ScryptedInterface[\"ScryptedDevice\"] = \"ScryptedDevice\";\n    ScryptedInterface[\"ScryptedPlugin\"] = \"ScryptedPlugin\";\n    ScryptedInterface[\"ScryptedPluginRuntime\"] = \"ScryptedPluginRuntime\";\n    ScryptedInterface[\"OnOff\"] = \"OnOff\";\n    ScryptedInterface[\"Brightness\"] = \"Brightness\";\n    ScryptedInterface[\"ColorSettingTemperature\"] = \"ColorSettingTemperature\";\n    ScryptedInterface[\"ColorSettingRgb\"] = \"ColorSettingRgb\";\n    ScryptedInterface[\"ColorSettingHsv\"] = \"ColorSettingHsv\";\n    ScryptedInterface[\"Notifier\"] = \"Notifier\";\n    ScryptedInterface[\"StartStop\"] = \"StartStop\";\n    ScryptedInterface[\"Pause\"] = \"Pause\";\n    ScryptedInterface[\"Dock\"] = \"Dock\";\n    ScryptedInterface[\"TemperatureSetting\"] = \"TemperatureSetting\";\n    ScryptedInterface[\"Thermometer\"] = \"Thermometer\";\n    ScryptedInterface[\"HumiditySensor\"] = \"HumiditySensor\";\n    ScryptedInterface[\"Camera\"] = \"Camera\";\n    ScryptedInterface[\"Microphone\"] = \"Microphone\";\n    ScryptedInterface[\"AudioVolumeControl\"] = \"AudioVolumeControl\";\n    ScryptedInterface[\"Display\"] = \"Display\";\n    ScryptedInterface[\"VideoCamera\"] = \"VideoCamera\";\n    ScryptedInterface[\"VideoCameraMask\"] = \"VideoCameraMask\";\n    ScryptedInterface[\"VideoRecorder\"] = \"VideoRecorder\";\n    ScryptedInterface[\"VideoRecorderManagement\"] = \"VideoRecorderManagement\";\n    ScryptedInterface[\"PanTiltZoom\"] = \"PanTiltZoom\";\n    ScryptedInterface[\"EventRecorder\"] = \"EventRecorder\";\n    ScryptedInterface[\"VideoClips\"] = \"VideoClips\";\n    ScryptedInterface[\"VideoCameraConfiguration\"] = \"VideoCameraConfiguration\";\n    ScryptedInterface[\"Intercom\"] = \"Intercom\";\n    ScryptedInterface[\"Lock\"] = \"Lock\";\n    ScryptedInterface[\"PasswordStore\"] = \"PasswordStore\";\n    ScryptedInterface[\"Scene\"] = \"Scene\";\n    ScryptedInterface[\"Entry\"] = \"Entry\";\n    ScryptedInterface[\"EntrySensor\"] = \"EntrySensor\";\n    ScryptedInterface[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedInterface[\"DeviceDiscovery\"] = \"DeviceDiscovery\";\n    ScryptedInterface[\"DeviceCreator\"] = \"DeviceCreator\";\n    ScryptedInterface[\"Battery\"] = \"Battery\";\n    ScryptedInterface[\"Charger\"] = \"Charger\";\n    ScryptedInterface[\"Reboot\"] = \"Reboot\";\n    ScryptedInterface[\"Refresh\"] = \"Refresh\";\n    ScryptedInterface[\"MediaPlayer\"] = \"MediaPlayer\";\n    ScryptedInterface[\"Online\"] = \"Online\";\n    ScryptedInterface[\"BufferConverter\"] = \"BufferConverter\";\n    ScryptedInterface[\"MediaConverter\"] = \"MediaConverter\";\n    ScryptedInterface[\"Settings\"] = \"Settings\";\n    ScryptedInterface[\"BinarySensor\"] = \"BinarySensor\";\n    ScryptedInterface[\"TamperSensor\"] = \"TamperSensor\";\n    ScryptedInterface[\"PowerSensor\"] = \"PowerSensor\";\n    ScryptedInterface[\"AudioSensor\"] = \"AudioSensor\";\n    ScryptedInterface[\"MotionSensor\"] = \"MotionSensor\";\n    ScryptedInterface[\"AmbientLightSensor\"] = \"AmbientLightSensor\";\n    ScryptedInterface[\"OccupancySensor\"] = \"OccupancySensor\";\n    ScryptedInterface[\"FloodSensor\"] = \"FloodSensor\";\n    ScryptedInterface[\"UltravioletSensor\"] = \"UltravioletSensor\";\n    ScryptedInterface[\"LuminanceSensor\"] = \"LuminanceSensor\";\n    ScryptedInterface[\"PositionSensor\"] = \"PositionSensor\";\n    ScryptedInterface[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedInterface[\"PM10Sensor\"] = \"PM10Sensor\";\n    ScryptedInterface[\"PM25Sensor\"] = \"PM25Sensor\";\n    ScryptedInterface[\"VOCSensor\"] = \"VOCSensor\";\n    ScryptedInterface[\"NOXSensor\"] = \"NOXSensor\";\n    ScryptedInterface[\"CO2Sensor\"] = \"CO2Sensor\";\n    ScryptedInterface[\"AirQualitySensor\"] = \"AirQualitySensor\";\n    ScryptedInterface[\"AirPurifier\"] = \"AirPurifier\";\n    ScryptedInterface[\"FilterMaintenance\"] = \"FilterMaintenance\";\n    ScryptedInterface[\"Readme\"] = \"Readme\";\n    ScryptedInterface[\"OauthClient\"] = \"OauthClient\";\n    ScryptedInterface[\"MixinProvider\"] = \"MixinProvider\";\n    ScryptedInterface[\"HttpRequestHandler\"] = \"HttpRequestHandler\";\n    ScryptedInterface[\"EngineIOHandler\"] = \"EngineIOHandler\";\n    ScryptedInterface[\"PushHandler\"] = \"PushHandler\";\n    ScryptedInterface[\"Program\"] = \"Program\";\n    ScryptedInterface[\"Scriptable\"] = \"Scriptable\";\n    ScryptedInterface[\"ObjectTracker\"] = \"ObjectTracker\";\n    ScryptedInterface[\"ObjectDetector\"] = \"ObjectDetector\";\n    ScryptedInterface[\"ObjectDetection\"] = \"ObjectDetection\";\n    ScryptedInterface[\"ObjectDetectionPreview\"] = \"ObjectDetectionPreview\";\n    ScryptedInterface[\"ObjectDetectionGenerator\"] = \"ObjectDetectionGenerator\";\n    ScryptedInterface[\"HumiditySetting\"] = \"HumiditySetting\";\n    ScryptedInterface[\"Fan\"] = \"Fan\";\n    ScryptedInterface[\"RTCSignalingChannel\"] = \"RTCSignalingChannel\";\n    ScryptedInterface[\"RTCSignalingClient\"] = \"RTCSignalingClient\";\n    ScryptedInterface[\"LauncherApplication\"] = \"LauncherApplication\";\n    ScryptedInterface[\"ScryptedUser\"] = \"ScryptedUser\";\n    ScryptedInterface[\"VideoFrameGenerator\"] = \"VideoFrameGenerator\";\n    ScryptedInterface[\"StreamService\"] = \"StreamService\";\n    ScryptedInterface[\"TTY\"] = \"TTY\";\n    ScryptedInterface[\"TTYSettings\"] = \"TTYSettings\";\n    ScryptedInterface[\"ScryptedSystemDevice\"] = \"ScryptedSystemDevice\";\n    ScryptedInterface[\"ScryptedDeviceCreator\"] = \"ScryptedDeviceCreator\";\n    ScryptedInterface[\"ScryptedSettings\"] = \"ScryptedSettings\";\n})(ScryptedInterface || (exports.ScryptedInterface = ScryptedInterface = {}));\nvar ScryptedMimeTypes;\n(function (ScryptedMimeTypes) {\n    ScryptedMimeTypes[\"Url\"] = \"text/x-uri\";\n    ScryptedMimeTypes[\"InsecureLocalUrl\"] = \"text/x-insecure-local-uri\";\n    ScryptedMimeTypes[\"LocalUrl\"] = \"text/x-local-uri\";\n    ScryptedMimeTypes[\"ServerId\"] = \"text/x-server-id\";\n    ScryptedMimeTypes[\"PushEndpoint\"] = \"text/x-push-endpoint\";\n    ScryptedMimeTypes[\"SchemePrefix\"] = \"x-scrypted/x-scrypted-scheme-\";\n    ScryptedMimeTypes[\"MediaStreamUrl\"] = \"text/x-media-url\";\n    ScryptedMimeTypes[\"MediaObject\"] = \"x-scrypted/x-scrypted-media-object\";\n    ScryptedMimeTypes[\"RequestMediaObject\"] = \"x-scrypted/x-scrypted-request-media-object\";\n    ScryptedMimeTypes[\"RequestMediaStream\"] = \"x-scrypted/x-scrypted-request-stream\";\n    ScryptedMimeTypes[\"MediaStreamFeedback\"] = \"x-scrypted/x-media-stream-feedback\";\n    ScryptedMimeTypes[\"FFmpegInput\"] = \"x-scrypted/x-ffmpeg-input\";\n    ScryptedMimeTypes[\"FFmpegTranscodeStream\"] = \"x-scrypted/x-ffmpeg-transcode-stream\";\n    ScryptedMimeTypes[\"RTCSignalingChannel\"] = \"x-scrypted/x-scrypted-rtc-signaling-channel\";\n    ScryptedMimeTypes[\"RTCSignalingSession\"] = \"x-scrypted/x-scrypted-rtc-signaling-session\";\n    ScryptedMimeTypes[\"RTCConnectionManagement\"] = \"x-scrypted/x-scrypted-rtc-connection-management\";\n    ScryptedMimeTypes[\"Image\"] = \"x-scrypted/x-scrypted-image\";\n})(ScryptedMimeTypes || (exports.ScryptedMimeTypes = ScryptedMimeTypes = {}));\n//# sourceMappingURL=index.js.map","'use strict'\n\nconst { Buffer } = require('buffer')\nconst symbol = Symbol.for('BufferList')\n\nfunction BufferList (buf) {\n  if (!(this instanceof BufferList)) {\n    return new BufferList(buf)\n  }\n\n  BufferList._init.call(this, buf)\n}\n\nBufferList._init = function _init (buf) {\n  Object.defineProperty(this, symbol, { value: true })\n\n  this._bufs = []\n  this.length = 0\n\n  if (buf) {\n    this.append(buf)\n  }\n}\n\nBufferList.prototype._new = function _new (buf) {\n  return new BufferList(buf)\n}\n\nBufferList.prototype._offset = function _offset (offset) {\n  if (offset === 0) {\n    return [0, 0]\n  }\n\n  let tot = 0\n\n  for (let i = 0; i < this._bufs.length; i++) {\n    const _t = tot + this._bufs[i].length\n    if (offset < _t || i === this._bufs.length - 1) {\n      return [i, offset - tot]\n    }\n    tot = _t\n  }\n}\n\nBufferList.prototype._reverseOffset = function (blOffset) {\n  const bufferId = blOffset[0]\n  let offset = blOffset[1]\n\n  for (let i = 0; i < bufferId; i++) {\n    offset += this._bufs[i].length\n  }\n\n  return offset\n}\n\nBufferList.prototype.get = function get (index) {\n  if (index > this.length || index < 0) {\n    return undefined\n  }\n\n  const offset = this._offset(index)\n\n  return this._bufs[offset[0]][offset[1]]\n}\n\nBufferList.prototype.slice = function slice (start, end) {\n  if (typeof start === 'number' && start < 0) {\n    start += this.length\n  }\n\n  if (typeof end === 'number' && end < 0) {\n    end += this.length\n  }\n\n  return this.copy(null, 0, start, end)\n}\n\nBufferList.prototype.copy = function copy (dst, dstStart, srcStart, srcEnd) {\n  if (typeof srcStart !== 'number' || srcStart < 0) {\n    srcStart = 0\n  }\n\n  if (typeof srcEnd !== 'number' || srcEnd > this.length) {\n    srcEnd = this.length\n  }\n\n  if (srcStart >= this.length) {\n    return dst || Buffer.alloc(0)\n  }\n\n  if (srcEnd <= 0) {\n    return dst || Buffer.alloc(0)\n  }\n\n  const copy = !!dst\n  const off = this._offset(srcStart)\n  const len = srcEnd - srcStart\n  let bytes = len\n  let bufoff = (copy && dstStart) || 0\n  let start = off[1]\n\n  // copy/slice everything\n  if (srcStart === 0 && srcEnd === this.length) {\n    if (!copy) {\n      // slice, but full concat if multiple buffers\n      return this._bufs.length === 1\n        ? this._bufs[0]\n        : Buffer.concat(this._bufs, this.length)\n    }\n\n    // copy, need to copy individual buffers\n    for (let i = 0; i < this._bufs.length; i++) {\n      this._bufs[i].copy(dst, bufoff)\n      bufoff += this._bufs[i].length\n    }\n\n    return dst\n  }\n\n  // easy, cheap case where it's a subset of one of the buffers\n  if (bytes <= this._bufs[off[0]].length - start) {\n    return copy\n      ? this._bufs[off[0]].copy(dst, dstStart, start, start + bytes)\n      : this._bufs[off[0]].slice(start, start + bytes)\n  }\n\n  if (!copy) {\n    // a slice, we need something to copy in to\n    dst = Buffer.allocUnsafe(len)\n  }\n\n  for (let i = off[0]; i < this._bufs.length; i++) {\n    const l = this._bufs[i].length - start\n\n    if (bytes > l) {\n      this._bufs[i].copy(dst, bufoff, start)\n      bufoff += l\n    } else {\n      this._bufs[i].copy(dst, bufoff, start, start + bytes)\n      bufoff += l\n      break\n    }\n\n    bytes -= l\n\n    if (start) {\n      start = 0\n    }\n  }\n\n  // safeguard so that we don't return uninitialized memory\n  if (dst.length > bufoff) return dst.slice(0, bufoff)\n\n  return dst\n}\n\nBufferList.prototype.shallowSlice = function shallowSlice (start, end) {\n  start = start || 0\n  end = typeof end !== 'number' ? this.length : end\n\n  if (start < 0) {\n    start += this.length\n  }\n\n  if (end < 0) {\n    end += this.length\n  }\n\n  if (start === end) {\n    return this._new()\n  }\n\n  const startOffset = this._offset(start)\n  const endOffset = this._offset(end)\n  const buffers = this._bufs.slice(startOffset[0], endOffset[0] + 1)\n\n  if (endOffset[1] === 0) {\n    buffers.pop()\n  } else {\n    buffers[buffers.length - 1] = buffers[buffers.length - 1].slice(0, endOffset[1])\n  }\n\n  if (startOffset[1] !== 0) {\n    buffers[0] = buffers[0].slice(startOffset[1])\n  }\n\n  return this._new(buffers)\n}\n\nBufferList.prototype.toString = function toString (encoding, start, end) {\n  return this.slice(start, end).toString(encoding)\n}\n\nBufferList.prototype.consume = function consume (bytes) {\n  // first, normalize the argument, in accordance with how Buffer does it\n  bytes = Math.trunc(bytes)\n  // do nothing if not a positive number\n  if (Number.isNaN(bytes) || bytes <= 0) return this\n\n  while (this._bufs.length) {\n    if (bytes >= this._bufs[0].length) {\n      bytes -= this._bufs[0].length\n      this.length -= this._bufs[0].length\n      this._bufs.shift()\n    } else {\n      this._bufs[0] = this._bufs[0].slice(bytes)\n      this.length -= bytes\n      break\n    }\n  }\n\n  return this\n}\n\nBufferList.prototype.duplicate = function duplicate () {\n  const copy = this._new()\n\n  for (let i = 0; i < this._bufs.length; i++) {\n    copy.append(this._bufs[i])\n  }\n\n  return copy\n}\n\nBufferList.prototype.append = function append (buf) {\n  if (buf == null) {\n    return this\n  }\n\n  if (buf.buffer) {\n    // append a view of the underlying ArrayBuffer\n    this._appendBuffer(Buffer.from(buf.buffer, buf.byteOffset, buf.byteLength))\n  } else if (Array.isArray(buf)) {\n    for (let i = 0; i < buf.length; i++) {\n      this.append(buf[i])\n    }\n  } else if (this._isBufferList(buf)) {\n    // unwrap argument into individual BufferLists\n    for (let i = 0; i < buf._bufs.length; i++) {\n      this.append(buf._bufs[i])\n    }\n  } else {\n    // coerce number arguments to strings, since Buffer(number) does\n    // uninitialized memory allocation\n    if (typeof buf === 'number') {\n      buf = buf.toString()\n    }\n\n    this._appendBuffer(Buffer.from(buf))\n  }\n\n  return this\n}\n\nBufferList.prototype._appendBuffer = function appendBuffer (buf) {\n  this._bufs.push(buf)\n  this.length += buf.length\n}\n\nBufferList.prototype.indexOf = function (search, offset, encoding) {\n  if (encoding === undefined && typeof offset === 'string') {\n    encoding = offset\n    offset = undefined\n  }\n\n  if (typeof search === 'function' || Array.isArray(search)) {\n    throw new TypeError('The \"value\" argument must be one of type string, Buffer, BufferList, or Uint8Array.')\n  } else if (typeof search === 'number') {\n    search = Buffer.from([search])\n  } else if (typeof search === 'string') {\n    search = Buffer.from(search, encoding)\n  } else if (this._isBufferList(search)) {\n    search = search.slice()\n  } else if (Array.isArray(search.buffer)) {\n    search = Buffer.from(search.buffer, search.byteOffset, search.byteLength)\n  } else if (!Buffer.isBuffer(search)) {\n    search = Buffer.from(search)\n  }\n\n  offset = Number(offset || 0)\n\n  if (isNaN(offset)) {\n    offset = 0\n  }\n\n  if (offset < 0) {\n    offset = this.length + offset\n  }\n\n  if (offset < 0) {\n    offset = 0\n  }\n\n  if (search.length === 0) {\n    return offset > this.length ? this.length : offset\n  }\n\n  const blOffset = this._offset(offset)\n  let blIndex = blOffset[0] // index of which internal buffer we're working on\n  let buffOffset = blOffset[1] // offset of the internal buffer we're working on\n\n  // scan over each buffer\n  for (; blIndex < this._bufs.length; blIndex++) {\n    const buff = this._bufs[blIndex]\n\n    while (buffOffset < buff.length) {\n      const availableWindow = buff.length - buffOffset\n\n      if (availableWindow >= search.length) {\n        const nativeSearchResult = buff.indexOf(search, buffOffset)\n\n        if (nativeSearchResult !== -1) {\n          return this._reverseOffset([blIndex, nativeSearchResult])\n        }\n\n        buffOffset = buff.length - search.length + 1 // end of native search window\n      } else {\n        const revOffset = this._reverseOffset([blIndex, buffOffset])\n\n        if (this._match(revOffset, search)) {\n          return revOffset\n        }\n\n        buffOffset++\n      }\n    }\n\n    buffOffset = 0\n  }\n\n  return -1\n}\n\nBufferList.prototype._match = function (offset, search) {\n  if (this.length - offset < search.length) {\n    return false\n  }\n\n  for (let searchOffset = 0; searchOffset < search.length; searchOffset++) {\n    if (this.get(offset + searchOffset) !== search[searchOffset]) {\n      return false\n    }\n  }\n  return true\n}\n\n;(function () {\n  const methods = {\n    readDoubleBE: 8,\n    readDoubleLE: 8,\n    readFloatBE: 4,\n    readFloatLE: 4,\n    readInt32BE: 4,\n    readInt32LE: 4,\n    readUInt32BE: 4,\n    readUInt32LE: 4,\n    readInt16BE: 2,\n    readInt16LE: 2,\n    readUInt16BE: 2,\n    readUInt16LE: 2,\n    readInt8: 1,\n    readUInt8: 1,\n    readIntBE: null,\n    readIntLE: null,\n    readUIntBE: null,\n    readUIntLE: null\n  }\n\n  for (const m in methods) {\n    (function (m) {\n      if (methods[m] === null) {\n        BufferList.prototype[m] = function (offset, byteLength) {\n          return this.slice(offset, offset + byteLength)[m](0, byteLength)\n        }\n      } else {\n        BufferList.prototype[m] = function (offset = 0) {\n          return this.slice(offset, offset + methods[m])[m](0)\n        }\n      }\n    }(m))\n  }\n}())\n\n// Used internally by the class and also as an indicator of this object being\n// a `BufferList`. It's not possible to use `instanceof BufferList` in a browser\n// environment because there could be multiple different copies of the\n// BufferList class and some `BufferList`s might be `BufferList`s.\nBufferList.prototype._isBufferList = function _isBufferList (b) {\n  return b instanceof BufferList || BufferList.isBufferList(b)\n}\n\nBufferList.isBufferList = function isBufferList (b) {\n  return b != null && b[symbol]\n}\n\nmodule.exports = BufferList\n","'use strict'\n\nconst DuplexStream = require('readable-stream').Duplex\nconst inherits = require('inherits')\nconst BufferList = require('./BufferList')\n\nfunction BufferListStream (callback) {\n  if (!(this instanceof BufferListStream)) {\n    return new BufferListStream(callback)\n  }\n\n  if (typeof callback === 'function') {\n    this._callback = callback\n\n    const piper = function piper (err) {\n      if (this._callback) {\n        this._callback(err)\n        this._callback = null\n      }\n    }.bind(this)\n\n    this.on('pipe', function onPipe (src) {\n      src.on('error', piper)\n    })\n    this.on('unpipe', function onUnpipe (src) {\n      src.removeListener('error', piper)\n    })\n\n    callback = null\n  }\n\n  BufferList._init.call(this, callback)\n  DuplexStream.call(this)\n}\n\ninherits(BufferListStream, DuplexStream)\nObject.assign(BufferListStream.prototype, BufferList.prototype)\n\nBufferListStream.prototype._new = function _new (callback) {\n  return new BufferListStream(callback)\n}\n\nBufferListStream.prototype._write = function _write (buf, encoding, callback) {\n  this._appendBuffer(buf)\n\n  if (typeof callback === 'function') {\n    callback()\n  }\n}\n\nBufferListStream.prototype._read = function _read (size) {\n  if (!this.length) {\n    return this.push(null)\n  }\n\n  size = Math.min(size, this.length)\n  this.push(this.slice(0, size))\n  this.consume(size)\n}\n\nBufferListStream.prototype.end = function end (chunk) {\n  DuplexStream.prototype.end.call(this, chunk)\n\n  if (this._callback) {\n    this._callback(null, this.slice())\n    this._callback = null\n  }\n}\n\nBufferListStream.prototype._destroy = function _destroy (err, cb) {\n  this._bufs.length = 0\n  this.length = 0\n  cb(err)\n}\n\nBufferListStream.prototype._isBufferList = function _isBufferList (b) {\n  return b instanceof BufferListStream || b instanceof BufferList || BufferListStream.isBufferList(b)\n}\n\nBufferListStream.isBufferList = BufferList.isBufferList\n\nmodule.exports = BufferListStream\nmodule.exports.BufferListStream = BufferListStream\nmodule.exports.BufferList = BufferList\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.formatWithOptions()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.formatWithOptions(exports.inspectOpts, ...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","var stream = require('readable-stream')\nvar eos = require('end-of-stream')\nvar inherits = require('inherits')\nvar shift = require('stream-shift')\n\nvar SIGNAL_FLUSH = (Buffer.from && Buffer.from !== Uint8Array.from)\n  ? Buffer.from([0])\n  : new Buffer([0])\n\nvar onuncork = function(self, fn) {\n  if (self._corked) self.once('uncork', fn)\n  else fn()\n}\n\nvar autoDestroy = function (self, err) {\n  if (self._autoDestroy) self.destroy(err)\n}\n\nvar destroyer = function(self, end) {\n  return function(err) {\n    if (err) autoDestroy(self, err.message === 'premature close' ? null : err)\n    else if (end && !self._ended) self.end()\n  }\n}\n\nvar end = function(ws, fn) {\n  if (!ws) return fn()\n  if (ws._writableState && ws._writableState.finished) return fn()\n  if (ws._writableState) return ws.end(fn)\n  ws.end()\n  fn()\n}\n\nvar noop = function() {}\n\nvar toStreams2 = function(rs) {\n  return new (stream.Readable)({objectMode:true, highWaterMark:16}).wrap(rs)\n}\n\nvar Duplexify = function(writable, readable, opts) {\n  if (!(this instanceof Duplexify)) return new Duplexify(writable, readable, opts)\n  stream.Duplex.call(this, opts)\n\n  this._writable = null\n  this._readable = null\n  this._readable2 = null\n\n  this._autoDestroy = !opts || opts.autoDestroy !== false\n  this._forwardDestroy = !opts || opts.destroy !== false\n  this._forwardEnd = !opts || opts.end !== false\n  this._corked = 1 // start corked\n  this._ondrain = null\n  this._drained = false\n  this._forwarding = false\n  this._unwrite = null\n  this._unread = null\n  this._ended = false\n\n  this.destroyed = false\n\n  if (writable) this.setWritable(writable)\n  if (readable) this.setReadable(readable)\n}\n\ninherits(Duplexify, stream.Duplex)\n\nDuplexify.obj = function(writable, readable, opts) {\n  if (!opts) opts = {}\n  opts.objectMode = true\n  opts.highWaterMark = 16\n  return new Duplexify(writable, readable, opts)\n}\n\nDuplexify.prototype.cork = function() {\n  if (++this._corked === 1) this.emit('cork')\n}\n\nDuplexify.prototype.uncork = function() {\n  if (this._corked && --this._corked === 0) this.emit('uncork')\n}\n\nDuplexify.prototype.setWritable = function(writable) {\n  if (this._unwrite) this._unwrite()\n\n  if (this.destroyed) {\n    if (writable && writable.destroy) writable.destroy()\n    return\n  }\n\n  if (writable === null || writable === false) {\n    this.end()\n    return\n  }\n\n  var self = this\n  var unend = eos(writable, {writable:true, readable:false}, destroyer(this, this._forwardEnd))\n\n  var ondrain = function() {\n    var ondrain = self._ondrain\n    self._ondrain = null\n    if (ondrain) ondrain()\n  }\n\n  var clear = function() {\n    self._writable.removeListener('drain', ondrain)\n    unend()\n  }\n\n  if (this._unwrite) process.nextTick(ondrain) // force a drain on stream reset to avoid livelocks\n\n  this._writable = writable\n  this._writable.on('drain', ondrain)\n  this._unwrite = clear\n\n  this.uncork() // always uncork setWritable\n}\n\nDuplexify.prototype.setReadable = function(readable) {\n  if (this._unread) this._unread()\n\n  if (this.destroyed) {\n    if (readable && readable.destroy) readable.destroy()\n    return\n  }\n\n  if (readable === null || readable === false) {\n    this.push(null)\n    this.resume()\n    return\n  }\n\n  var self = this\n  var unend = eos(readable, {writable:false, readable:true}, destroyer(this))\n\n  var onreadable = function() {\n    self._forward()\n  }\n\n  var onend = function() {\n    self.push(null)\n  }\n\n  var clear = function() {\n    self._readable2.removeListener('readable', onreadable)\n    self._readable2.removeListener('end', onend)\n    unend()\n  }\n\n  this._drained = true\n  this._readable = readable\n  this._readable2 = readable._readableState ? readable : toStreams2(readable)\n  this._readable2.on('readable', onreadable)\n  this._readable2.on('end', onend)\n  this._unread = clear\n\n  this._forward()\n}\n\nDuplexify.prototype._read = function() {\n  this._drained = true\n  this._forward()\n}\n\nDuplexify.prototype._forward = function() {\n  if (this._forwarding || !this._readable2 || !this._drained) return\n  this._forwarding = true\n\n  var data\n\n  while (this._drained && (data = shift(this._readable2)) !== null) {\n    if (this.destroyed) continue\n    this._drained = this.push(data)\n  }\n\n  this._forwarding = false\n}\n\nDuplexify.prototype.destroy = function(err, cb) {\n  if (!cb) cb = noop\n  if (this.destroyed) return cb(null)\n  this.destroyed = true\n\n  var self = this\n  process.nextTick(function() {\n    self._destroy(err)\n    cb(null)\n  })\n}\n\nDuplexify.prototype._destroy = function(err) {\n  if (err) {\n    var ondrain = this._ondrain\n    this._ondrain = null\n    if (ondrain) ondrain(err)\n    else this.emit('error', err)\n  }\n\n  if (this._forwardDestroy) {\n    if (this._readable && this._readable.destroy) this._readable.destroy()\n    if (this._writable && this._writable.destroy) this._writable.destroy()\n  }\n\n  this.emit('close')\n}\n\nDuplexify.prototype._write = function(data, enc, cb) {\n  if (this.destroyed) return\n  if (this._corked) return onuncork(this, this._write.bind(this, data, enc, cb))\n  if (data === SIGNAL_FLUSH) return this._finish(cb)\n  if (!this._writable) return cb()\n\n  if (this._writable.write(data) === false) this._ondrain = cb\n  else if (!this.destroyed) cb()\n}\n\nDuplexify.prototype._finish = function(cb) {\n  var self = this\n  this.emit('preend')\n  onuncork(this, function() {\n    end(self._forwardEnd && self._writable, function() {\n      // haxx to not emit prefinish twice\n      if (self._writableState.prefinished === false) self._writableState.prefinished = true\n      self.emit('prefinish')\n      onuncork(self, cb)\n    })\n  })\n}\n\nDuplexify.prototype.end = function(data, enc, cb) {\n  if (typeof data === 'function') return this.end(null, null, data)\n  if (typeof enc === 'function') return this.end(data, null, enc)\n  this._ended = true\n  if (data) this.write(data)\n  if (!this._writableState.ending && !this._writableState.destroyed) this.write(SIGNAL_FLUSH)\n  return stream.Writable.prototype.end.call(this, cb)\n}\n\nmodule.exports = Duplexify\n","var once = require('once');\n\nvar noop = function() {};\n\nvar isRequest = function(stream) {\n\treturn stream.setHeader && typeof stream.abort === 'function';\n};\n\nvar isChildProcess = function(stream) {\n\treturn stream.stdio && Array.isArray(stream.stdio) && stream.stdio.length === 3\n};\n\nvar eos = function(stream, opts, callback) {\n\tif (typeof opts === 'function') return eos(stream, null, opts);\n\tif (!opts) opts = {};\n\n\tcallback = once(callback || noop);\n\n\tvar ws = stream._writableState;\n\tvar rs = stream._readableState;\n\tvar readable = opts.readable || (opts.readable !== false && stream.readable);\n\tvar writable = opts.writable || (opts.writable !== false && stream.writable);\n\tvar cancelled = false;\n\n\tvar onlegacyfinish = function() {\n\t\tif (!stream.writable) onfinish();\n\t};\n\n\tvar onfinish = function() {\n\t\twritable = false;\n\t\tif (!readable) callback.call(stream);\n\t};\n\n\tvar onend = function() {\n\t\treadable = false;\n\t\tif (!writable) callback.call(stream);\n\t};\n\n\tvar onexit = function(exitCode) {\n\t\tcallback.call(stream, exitCode ? new Error('exited with error code: ' + exitCode) : null);\n\t};\n\n\tvar onerror = function(err) {\n\t\tcallback.call(stream, err);\n\t};\n\n\tvar onclose = function() {\n\t\tprocess.nextTick(onclosenexttick);\n\t};\n\n\tvar onclosenexttick = function() {\n\t\tif (cancelled) return;\n\t\tif (readable && !(rs && (rs.ended && !rs.destroyed))) return callback.call(stream, new Error('premature close'));\n\t\tif (writable && !(ws && (ws.ended && !ws.destroyed))) return callback.call(stream, new Error('premature close'));\n\t};\n\n\tvar onrequest = function() {\n\t\tstream.req.on('finish', onfinish);\n\t};\n\n\tif (isRequest(stream)) {\n\t\tstream.on('complete', onfinish);\n\t\tstream.on('abort', onclose);\n\t\tif (stream.req) onrequest();\n\t\telse stream.on('request', onrequest);\n\t} else if (writable && !ws) { // legacy streams\n\t\tstream.on('end', onlegacyfinish);\n\t\tstream.on('close', onlegacyfinish);\n\t}\n\n\tif (isChildProcess(stream)) stream.on('exit', onexit);\n\n\tstream.on('end', onend);\n\tstream.on('finish', onfinish);\n\tif (opts.error !== false) stream.on('error', onerror);\n\tstream.on('close', onclose);\n\n\treturn function() {\n\t\tcancelled = true;\n\t\tstream.removeListener('complete', onfinish);\n\t\tstream.removeListener('abort', onclose);\n\t\tstream.removeListener('request', onrequest);\n\t\tif (stream.req) stream.req.removeListener('finish', onfinish);\n\t\tstream.removeListener('end', onlegacyfinish);\n\t\tstream.removeListener('close', onlegacyfinish);\n\t\tstream.removeListener('finish', onfinish);\n\t\tstream.removeListener('exit', onexit);\n\t\tstream.removeListener('end', onend);\n\t\tstream.removeListener('error', onerror);\n\t\tstream.removeListener('close', onclose);\n\t};\n};\n\nmodule.exports = eos;\n","'use strict';\nmodule.exports = (flag, argv) => {\n\targv = argv || process.argv;\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst pos = argv.indexOf(prefix + flag);\n\tconst terminatorPos = argv.indexOf('--');\n\treturn pos !== -1 && (terminatorPos === -1 ? true : pos < terminatorPos);\n};\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","var __extends = this && this.t || function() {\n    var extendStatics = function(e, n) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(e, n) {\n            e.__proto__ = n;\n        } || function(e, n) {\n            for (var t in n) if (Object.prototype.hasOwnProperty.call(n, t)) e[t] = n[t];\n        };\n        return extendStatics(e, n);\n    };\n    return function(e, n) {\n        if (typeof n !== \"function\" && n !== null) throw new TypeError(\"Class extends value \" + String(n) + \" is not a constructor or null\");\n        extendStatics(e, n);\n        function __() {\n            this.constructor = e;\n        }\n        e.prototype = n === null ? Object.create(n) : (__.prototype = n.prototype, new __);\n    };\n}();\n\nvar TreeNode = function() {\n    function TreeNode(e, n) {\n        this.ee = 1;\n        this.u = undefined;\n        this.p = undefined;\n        this.K = undefined;\n        this.N = undefined;\n        this.rr = undefined;\n        this.u = e;\n        this.p = n;\n    }\n    TreeNode.prototype.L = function() {\n        var e = this;\n        if (e.ee === 1 && e.rr.rr === e) {\n            e = e.N;\n        } else if (e.K) {\n            e = e.K;\n            while (e.N) {\n                e = e.N;\n            }\n        } else {\n            var n = e.rr;\n            while (n.K === e) {\n                e = n;\n                n = e.rr;\n            }\n            e = n;\n        }\n        return e;\n    };\n    TreeNode.prototype.m = function() {\n        var e = this;\n        if (e.N) {\n            e = e.N;\n            while (e.K) {\n                e = e.K;\n            }\n            return e;\n        } else {\n            var n = e.rr;\n            while (n.N === e) {\n                e = n;\n                n = e.rr;\n            }\n            if (e.N !== n) {\n                return n;\n            } else return e;\n        }\n    };\n    TreeNode.prototype.ne = function() {\n        var e = this.rr;\n        var n = this.N;\n        var t = n.K;\n        if (e.rr === this) e.rr = n; else if (e.K === this) e.K = n; else e.N = n;\n        n.rr = e;\n        n.K = this;\n        this.rr = n;\n        this.N = t;\n        if (t) t.rr = this;\n        return n;\n    };\n    TreeNode.prototype.te = function() {\n        var e = this.rr;\n        var n = this.K;\n        var t = n.N;\n        if (e.rr === this) e.rr = n; else if (e.K === this) e.K = n; else e.N = n;\n        n.rr = e;\n        n.N = this;\n        this.rr = n;\n        this.K = t;\n        if (t) t.rr = this;\n        return n;\n    };\n    return TreeNode;\n}();\n\nexport { TreeNode };\n\nvar TreeNodeEnableIndex = function(e) {\n    __extends(TreeNodeEnableIndex, e);\n    function TreeNodeEnableIndex() {\n        var n = e !== null && e.apply(this, arguments) || this;\n        n.tr = 1;\n        return n;\n    }\n    TreeNodeEnableIndex.prototype.ne = function() {\n        var n = e.prototype.ne.call(this);\n        this.ie();\n        n.ie();\n        return n;\n    };\n    TreeNodeEnableIndex.prototype.te = function() {\n        var n = e.prototype.te.call(this);\n        this.ie();\n        n.ie();\n        return n;\n    };\n    TreeNodeEnableIndex.prototype.ie = function() {\n        this.tr = 1;\n        if (this.K) {\n            this.tr += this.K.tr;\n        }\n        if (this.N) {\n            this.tr += this.N.tr;\n        }\n    };\n    return TreeNodeEnableIndex;\n}(TreeNode);\n\nexport { TreeNodeEnableIndex };\n//# sourceMappingURL=TreeNode.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(n, t) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(n, t) {\n            n.__proto__ = t;\n        } || function(n, t) {\n            for (var r in t) if (Object.prototype.hasOwnProperty.call(t, r)) n[r] = t[r];\n        };\n        return extendStatics(n, t);\n    };\n    return function(n, t) {\n        if (typeof t !== \"function\" && t !== null) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n        extendStatics(n, t);\n        function __() {\n            this.constructor = n;\n        }\n        n.prototype = t === null ? Object.create(t) : (__.prototype = t.prototype, new __);\n    };\n}();\n\nvar ContainerIterator = function() {\n    function ContainerIterator(n) {\n        if (n === void 0) {\n            n = 0;\n        }\n        this.iteratorType = n;\n    }\n    ContainerIterator.prototype.equals = function(n) {\n        return this.o === n.o;\n    };\n    return ContainerIterator;\n}();\n\nexport { ContainerIterator };\n\nvar Base = function() {\n    function Base() {\n        this.M = 0;\n    }\n    Object.defineProperty(Base.prototype, \"length\", {\n        get: function() {\n            return this.M;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.size = function() {\n        return this.M;\n    };\n    Base.prototype.empty = function() {\n        return this.M === 0;\n    };\n    return Base;\n}();\n\nexport { Base };\n\nvar Container = function(n) {\n    __extends(Container, n);\n    function Container() {\n        return n !== null && n.apply(this, arguments) || this;\n    }\n    return Container;\n}(Base);\n\nexport { Container };\n//# sourceMappingURL=index.js.map\n","export function throwIteratorAccessError() {\n    throw new RangeError(\"Iterator access denied!\");\n}\n//# sourceMappingURL=throwError.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(e, r) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(e, r) {\n            e.__proto__ = r;\n        } || function(e, r) {\n            for (var i in r) if (Object.prototype.hasOwnProperty.call(r, i)) e[i] = r[i];\n        };\n        return extendStatics(e, r);\n    };\n    return function(e, r) {\n        if (typeof r !== \"function\" && r !== null) throw new TypeError(\"Class extends value \" + String(r) + \" is not a constructor or null\");\n        extendStatics(e, r);\n        function __() {\n            this.constructor = e;\n        }\n        e.prototype = r === null ? Object.create(r) : (__.prototype = r.prototype, new __);\n    };\n}();\n\nvar __read = this && this.q || function(e, r) {\n    var i = typeof Symbol === \"function\" && e[Symbol.iterator];\n    if (!i) return e;\n    var t = i.call(e), n, s = [], f;\n    try {\n        while ((r === void 0 || r-- > 0) && !(n = t.next()).done) s.push(n.value);\n    } catch (e) {\n        f = {\n            error: e\n        };\n    } finally {\n        try {\n            if (n && !n.done && (i = t[\"return\"])) i.call(t);\n        } finally {\n            if (f) throw f.error;\n        }\n    }\n    return s;\n};\n\nvar __values = this && this.V || function(e) {\n    var r = typeof Symbol === \"function\" && Symbol.iterator, i = r && e[r], t = 0;\n    if (i) return i.call(e);\n    if (e && typeof e.length === \"number\") return {\n        next: function() {\n            if (e && t >= e.length) e = void 0;\n            return {\n                value: e && e[t++],\n                done: !e\n            };\n        }\n    };\n    throw new TypeError(r ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport { TreeNode, TreeNodeEnableIndex } from \"./TreeNode\";\n\nimport { Container } from \"../../ContainerBase\";\n\nimport { throwIteratorAccessError } from \"../../../utils/throwError\";\n\nvar TreeContainer = function(e) {\n    __extends(TreeContainer, e);\n    function TreeContainer(r, i) {\n        if (r === void 0) {\n            r = function(e, r) {\n                if (e < r) return -1;\n                if (e > r) return 1;\n                return 0;\n            };\n        }\n        if (i === void 0) {\n            i = false;\n        }\n        var t = e.call(this) || this;\n        t.W = undefined;\n        t.$ = r;\n        if (i) {\n            t.re = TreeNodeEnableIndex;\n            t.v = function(e, r, i) {\n                var t = this.se(e, r, i);\n                if (t) {\n                    var n = t.rr;\n                    while (n !== this.h) {\n                        n.tr += 1;\n                        n = n.rr;\n                    }\n                    var s = this.fe(t);\n                    if (s) {\n                        var f = s, h = f.parentNode, u = f.grandParent, a = f.curNode;\n                        h.ie();\n                        u.ie();\n                        a.ie();\n                    }\n                }\n                return this.M;\n            };\n            t.G = function(e) {\n                var r = this.he(e);\n                while (r !== this.h) {\n                    r.tr -= 1;\n                    r = r.rr;\n                }\n            };\n        } else {\n            t.re = TreeNode;\n            t.v = function(e, r, i) {\n                var t = this.se(e, r, i);\n                if (t) this.fe(t);\n                return this.M;\n            };\n            t.G = t.he;\n        }\n        t.h = new t.re;\n        return t;\n    }\n    TreeContainer.prototype.U = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t < 0) {\n                e = e.N;\n            } else if (t > 0) {\n                i = e;\n                e = e.K;\n            } else return e;\n        }\n        return i;\n    };\n    TreeContainer.prototype.X = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t <= 0) {\n                e = e.N;\n            } else {\n                i = e;\n                e = e.K;\n            }\n        }\n        return i;\n    };\n    TreeContainer.prototype.Y = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t < 0) {\n                i = e;\n                e = e.N;\n            } else if (t > 0) {\n                e = e.K;\n            } else return e;\n        }\n        return i;\n    };\n    TreeContainer.prototype.Z = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t < 0) {\n                i = e;\n                e = e.N;\n            } else {\n                e = e.K;\n            }\n        }\n        return i;\n    };\n    TreeContainer.prototype.ue = function(e) {\n        while (true) {\n            var r = e.rr;\n            if (r === this.h) return;\n            if (e.ee === 1) {\n                e.ee = 0;\n                return;\n            }\n            if (e === r.K) {\n                var i = r.N;\n                if (i.ee === 1) {\n                    i.ee = 0;\n                    r.ee = 1;\n                    if (r === this.W) {\n                        this.W = r.ne();\n                    } else r.ne();\n                } else {\n                    if (i.N && i.N.ee === 1) {\n                        i.ee = r.ee;\n                        r.ee = 0;\n                        i.N.ee = 0;\n                        if (r === this.W) {\n                            this.W = r.ne();\n                        } else r.ne();\n                        return;\n                    } else if (i.K && i.K.ee === 1) {\n                        i.ee = 1;\n                        i.K.ee = 0;\n                        i.te();\n                    } else {\n                        i.ee = 1;\n                        e = r;\n                    }\n                }\n            } else {\n                var i = r.K;\n                if (i.ee === 1) {\n                    i.ee = 0;\n                    r.ee = 1;\n                    if (r === this.W) {\n                        this.W = r.te();\n                    } else r.te();\n                } else {\n                    if (i.K && i.K.ee === 1) {\n                        i.ee = r.ee;\n                        r.ee = 0;\n                        i.K.ee = 0;\n                        if (r === this.W) {\n                            this.W = r.te();\n                        } else r.te();\n                        return;\n                    } else if (i.N && i.N.ee === 1) {\n                        i.ee = 1;\n                        i.N.ee = 0;\n                        i.ne();\n                    } else {\n                        i.ee = 1;\n                        e = r;\n                    }\n                }\n            }\n        }\n    };\n    TreeContainer.prototype.he = function(e) {\n        var r, i;\n        if (this.M === 1) {\n            this.clear();\n            return this.h;\n        }\n        var t = e;\n        while (t.K || t.N) {\n            if (t.N) {\n                t = t.N;\n                while (t.K) t = t.K;\n            } else {\n                t = t.K;\n            }\n            r = __read([ t.u, e.u ], 2), e.u = r[0], t.u = r[1];\n            i = __read([ t.p, e.p ], 2), e.p = i[0], t.p = i[1];\n            e = t;\n        }\n        if (this.h.K === t) {\n            this.h.K = t.rr;\n        } else if (this.h.N === t) {\n            this.h.N = t.rr;\n        }\n        this.ue(t);\n        var n = t.rr;\n        if (t === n.K) {\n            n.K = undefined;\n        } else n.N = undefined;\n        this.M -= 1;\n        this.W.ee = 0;\n        return n;\n    };\n    TreeContainer.prototype.ae = function(e, r) {\n        if (e === undefined) return false;\n        var i = this.ae(e.K, r);\n        if (i) return true;\n        if (r(e)) return true;\n        return this.ae(e.N, r);\n    };\n    TreeContainer.prototype.fe = function(e) {\n        while (true) {\n            var r = e.rr;\n            if (r.ee === 0) return;\n            var i = r.rr;\n            if (r === i.K) {\n                var t = i.N;\n                if (t && t.ee === 1) {\n                    t.ee = r.ee = 0;\n                    if (i === this.W) return;\n                    i.ee = 1;\n                    e = i;\n                    continue;\n                } else if (e === r.N) {\n                    e.ee = 0;\n                    if (e.K) e.K.rr = r;\n                    if (e.N) e.N.rr = i;\n                    r.N = e.K;\n                    i.K = e.N;\n                    e.K = r;\n                    e.N = i;\n                    if (i === this.W) {\n                        this.W = e;\n                        this.h.rr = e;\n                    } else {\n                        var n = i.rr;\n                        if (n.K === i) {\n                            n.K = e;\n                        } else n.N = e;\n                    }\n                    e.rr = i.rr;\n                    r.rr = e;\n                    i.rr = e;\n                    i.ee = 1;\n                    return {\n                        parentNode: r,\n                        grandParent: i,\n                        curNode: e\n                    };\n                } else {\n                    r.ee = 0;\n                    if (i === this.W) {\n                        this.W = i.te();\n                    } else i.te();\n                    i.ee = 1;\n                }\n            } else {\n                var t = i.K;\n                if (t && t.ee === 1) {\n                    t.ee = r.ee = 0;\n                    if (i === this.W) return;\n                    i.ee = 1;\n                    e = i;\n                    continue;\n                } else if (e === r.K) {\n                    e.ee = 0;\n                    if (e.K) e.K.rr = i;\n                    if (e.N) e.N.rr = r;\n                    i.N = e.K;\n                    r.K = e.N;\n                    e.K = i;\n                    e.N = r;\n                    if (i === this.W) {\n                        this.W = e;\n                        this.h.rr = e;\n                    } else {\n                        var n = i.rr;\n                        if (n.K === i) {\n                            n.K = e;\n                        } else n.N = e;\n                    }\n                    e.rr = i.rr;\n                    r.rr = e;\n                    i.rr = e;\n                    i.ee = 1;\n                    return {\n                        parentNode: r,\n                        grandParent: i,\n                        curNode: e\n                    };\n                } else {\n                    r.ee = 0;\n                    if (i === this.W) {\n                        this.W = i.ne();\n                    } else i.ne();\n                    i.ee = 1;\n                }\n            }\n            return;\n        }\n    };\n    TreeContainer.prototype.se = function(e, r, i) {\n        if (this.W === undefined) {\n            this.M += 1;\n            this.W = new this.re(e, r);\n            this.W.ee = 0;\n            this.W.rr = this.h;\n            this.h.rr = this.W;\n            this.h.K = this.W;\n            this.h.N = this.W;\n            return;\n        }\n        var t;\n        var n = this.h.K;\n        var s = this.$(n.u, e);\n        if (s === 0) {\n            n.p = r;\n            return;\n        } else if (s > 0) {\n            n.K = new this.re(e, r);\n            n.K.rr = n;\n            t = n.K;\n            this.h.K = t;\n        } else {\n            var f = this.h.N;\n            var h = this.$(f.u, e);\n            if (h === 0) {\n                f.p = r;\n                return;\n            } else if (h < 0) {\n                f.N = new this.re(e, r);\n                f.N.rr = f;\n                t = f.N;\n                this.h.N = t;\n            } else {\n                if (i !== undefined) {\n                    var u = i.o;\n                    if (u !== this.h) {\n                        var a = this.$(u.u, e);\n                        if (a === 0) {\n                            u.p = r;\n                            return;\n                        } else if (a > 0) {\n                            var o = u.L();\n                            var l = this.$(o.u, e);\n                            if (l === 0) {\n                                o.p = r;\n                                return;\n                            } else if (l < 0) {\n                                t = new this.re(e, r);\n                                if (o.N === undefined) {\n                                    o.N = t;\n                                    t.rr = o;\n                                } else {\n                                    u.K = t;\n                                    t.rr = u;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (t === undefined) {\n                    t = this.W;\n                    while (true) {\n                        var v = this.$(t.u, e);\n                        if (v > 0) {\n                            if (t.K === undefined) {\n                                t.K = new this.re(e, r);\n                                t.K.rr = t;\n                                t = t.K;\n                                break;\n                            }\n                            t = t.K;\n                        } else if (v < 0) {\n                            if (t.N === undefined) {\n                                t.N = new this.re(e, r);\n                                t.N.rr = t;\n                                t = t.N;\n                                break;\n                            }\n                            t = t.N;\n                        } else {\n                            t.p = r;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n        this.M += 1;\n        return t;\n    };\n    TreeContainer.prototype.g = function(e, r) {\n        while (e) {\n            var i = this.$(e.u, r);\n            if (i < 0) {\n                e = e.N;\n            } else if (i > 0) {\n                e = e.K;\n            } else return e;\n        }\n        return e || this.h;\n    };\n    TreeContainer.prototype.clear = function() {\n        this.M = 0;\n        this.W = undefined;\n        this.h.rr = undefined;\n        this.h.K = this.h.N = undefined;\n    };\n    TreeContainer.prototype.updateKeyByIterator = function(e, r) {\n        var i = e.o;\n        if (i === this.h) {\n            throwIteratorAccessError();\n        }\n        if (this.M === 1) {\n            i.u = r;\n            return true;\n        }\n        if (i === this.h.K) {\n            if (this.$(i.m().u, r) > 0) {\n                i.u = r;\n                return true;\n            }\n            return false;\n        }\n        if (i === this.h.N) {\n            if (this.$(i.L().u, r) < 0) {\n                i.u = r;\n                return true;\n            }\n            return false;\n        }\n        var t = i.L().u;\n        if (this.$(t, r) >= 0) return false;\n        var n = i.m().u;\n        if (this.$(n, r) <= 0) return false;\n        i.u = r;\n        return true;\n    };\n    TreeContainer.prototype.eraseElementByPos = function(e) {\n        if (e < 0 || e > this.M - 1) {\n            throw new RangeError;\n        }\n        var r = 0;\n        var i = this;\n        this.ae(this.W, (function(t) {\n            if (e === r) {\n                i.G(t);\n                return true;\n            }\n            r += 1;\n            return false;\n        }));\n        return this.M;\n    };\n    TreeContainer.prototype.eraseElementByKey = function(e) {\n        if (this.M === 0) return false;\n        var r = this.g(this.W, e);\n        if (r === this.h) return false;\n        this.G(r);\n        return true;\n    };\n    TreeContainer.prototype.eraseElementByIterator = function(e) {\n        var r = e.o;\n        if (r === this.h) {\n            throwIteratorAccessError();\n        }\n        var i = r.N === undefined;\n        var t = e.iteratorType === 0;\n        if (t) {\n            if (i) e.next();\n        } else {\n            if (!i || r.K === undefined) e.next();\n        }\n        this.G(r);\n        return e;\n    };\n    TreeContainer.prototype.forEach = function(e) {\n        var r, i;\n        var t = 0;\n        try {\n            for (var n = __values(this), s = n.next(); !s.done; s = n.next()) {\n                var f = s.value;\n                e(f, t++, this);\n            }\n        } catch (e) {\n            r = {\n                error: e\n            };\n        } finally {\n            try {\n                if (s && !s.done && (i = n.return)) i.call(n);\n            } finally {\n                if (r) throw r.error;\n            }\n        }\n    };\n    TreeContainer.prototype.getElementByPos = function(e) {\n        var r, i;\n        if (e < 0 || e > this.M - 1) {\n            throw new RangeError;\n        }\n        var t;\n        var n = 0;\n        try {\n            for (var s = __values(this), f = s.next(); !f.done; f = s.next()) {\n                var h = f.value;\n                if (n === e) {\n                    t = h;\n                    break;\n                }\n                n += 1;\n            }\n        } catch (e) {\n            r = {\n                error: e\n            };\n        } finally {\n            try {\n                if (f && !f.done && (i = s.return)) i.call(s);\n            } finally {\n                if (r) throw r.error;\n            }\n        }\n        return t;\n    };\n    TreeContainer.prototype.getHeight = function() {\n        if (this.M === 0) return 0;\n        var traversal = function(e) {\n            if (!e) return 0;\n            return Math.max(traversal(e.K), traversal(e.N)) + 1;\n        };\n        return traversal(this.W);\n    };\n    return TreeContainer;\n}(Container);\n\nexport default TreeContainer;\n//# sourceMappingURL=index.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(r, t) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(r, t) {\n            r.__proto__ = t;\n        } || function(r, t) {\n            for (var e in t) if (Object.prototype.hasOwnProperty.call(t, e)) r[e] = t[e];\n        };\n        return extendStatics(r, t);\n    };\n    return function(r, t) {\n        if (typeof t !== \"function\" && t !== null) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n        extendStatics(r, t);\n        function __() {\n            this.constructor = r;\n        }\n        r.prototype = t === null ? Object.create(t) : (__.prototype = t.prototype, new __);\n    };\n}();\n\nimport { ContainerIterator } from \"../../ContainerBase\";\n\nimport { throwIteratorAccessError } from \"../../../utils/throwError\";\n\nvar TreeIterator = function(r) {\n    __extends(TreeIterator, r);\n    function TreeIterator(t, e, i) {\n        var n = r.call(this, i) || this;\n        n.o = t;\n        n.h = e;\n        if (n.iteratorType === 0) {\n            n.pre = function() {\n                if (this.o === this.h.K) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.L();\n                return this;\n            };\n            n.next = function() {\n                if (this.o === this.h) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.m();\n                return this;\n            };\n        } else {\n            n.pre = function() {\n                if (this.o === this.h.N) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.m();\n                return this;\n            };\n            n.next = function() {\n                if (this.o === this.h) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.L();\n                return this;\n            };\n        }\n        return n;\n    }\n    Object.defineProperty(TreeIterator.prototype, \"index\", {\n        get: function() {\n            var r = this.o;\n            var t = this.h.rr;\n            if (r === this.h) {\n                if (t) {\n                    return t.tr - 1;\n                }\n                return 0;\n            }\n            var e = 0;\n            if (r.K) {\n                e += r.K.tr;\n            }\n            while (r !== t) {\n                var i = r.rr;\n                if (r === i.N) {\n                    e += 1;\n                    if (i.K) {\n                        e += i.K.tr;\n                    }\n                }\n                r = i;\n            }\n            return e;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return TreeIterator;\n}(ContainerIterator);\n\nexport default TreeIterator;\n//# sourceMappingURL=TreeIterator.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(e, t) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(e, t) {\n            e.__proto__ = t;\n        } || function(e, t) {\n            for (var r in t) if (Object.prototype.hasOwnProperty.call(t, r)) e[r] = t[r];\n        };\n        return extendStatics(e, t);\n    };\n    return function(e, t) {\n        if (typeof t !== \"function\" && t !== null) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n        extendStatics(e, t);\n        function __() {\n            this.constructor = e;\n        }\n        e.prototype = t === null ? Object.create(t) : (__.prototype = t.prototype, new __);\n    };\n}();\n\nvar __generator = this && this.i || function(e, t) {\n    var r = {\n        label: 0,\n        sent: function() {\n            if (o[0] & 1) throw o[1];\n            return o[1];\n        },\n        trys: [],\n        ops: []\n    }, n, i, o, u;\n    return u = {\n        next: verb(0),\n        throw: verb(1),\n        return: verb(2)\n    }, typeof Symbol === \"function\" && (u[Symbol.iterator] = function() {\n        return this;\n    }), u;\n    function verb(e) {\n        return function(t) {\n            return step([ e, t ]);\n        };\n    }\n    function step(u) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n        while (r) try {\n            if (n = 1, i && (o = u[0] & 2 ? i[\"return\"] : u[0] ? i[\"throw\"] || ((o = i[\"return\"]) && o.call(i), \n            0) : i.next) && !(o = o.call(i, u[1])).done) return o;\n            if (i = 0, o) u = [ u[0] & 2, o.value ];\n            switch (u[0]) {\n              case 0:\n              case 1:\n                o = u;\n                break;\n\n              case 4:\n                r.label++;\n                return {\n                    value: u[1],\n                    done: false\n                };\n\n              case 5:\n                r.label++;\n                i = u[1];\n                u = [ 0 ];\n                continue;\n\n              case 7:\n                u = r.ops.pop();\n                r.trys.pop();\n                continue;\n\n              default:\n                if (!(o = r.trys, o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {\n                    r = 0;\n                    continue;\n                }\n                if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {\n                    r.label = u[1];\n                    break;\n                }\n                if (u[0] === 6 && r.label < o[1]) {\n                    r.label = o[1];\n                    o = u;\n                    break;\n                }\n                if (o && r.label < o[2]) {\n                    r.label = o[2];\n                    r.ops.push(u);\n                    break;\n                }\n                if (o[2]) r.ops.pop();\n                r.trys.pop();\n                continue;\n            }\n            u = t.call(e, r);\n        } catch (e) {\n            u = [ 6, e ];\n            i = 0;\n        } finally {\n            n = o = 0;\n        }\n        if (u[0] & 5) throw u[1];\n        return {\n            value: u[0] ? u[1] : void 0,\n            done: true\n        };\n    }\n};\n\nvar __values = this && this.V || function(e) {\n    var t = typeof Symbol === \"function\" && Symbol.iterator, r = t && e[t], n = 0;\n    if (r) return r.call(e);\n    if (e && typeof e.length === \"number\") return {\n        next: function() {\n            if (e && n >= e.length) e = void 0;\n            return {\n                value: e && e[n++],\n                done: !e\n            };\n        }\n    };\n    throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport TreeContainer from \"./Base\";\n\nimport TreeIterator from \"./Base/TreeIterator\";\n\nimport { throwIteratorAccessError } from \"../../utils/throwError\";\n\nvar OrderedSetIterator = function(e) {\n    __extends(OrderedSetIterator, e);\n    function OrderedSetIterator(t, r, n, i) {\n        var o = e.call(this, t, r, i) || this;\n        o.container = n;\n        return o;\n    }\n    Object.defineProperty(OrderedSetIterator.prototype, \"pointer\", {\n        get: function() {\n            if (this.o === this.h) {\n                throwIteratorAccessError();\n            }\n            return this.o.u;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OrderedSetIterator.prototype.copy = function() {\n        return new OrderedSetIterator(this.o, this.h, this.container, this.iteratorType);\n    };\n    return OrderedSetIterator;\n}(TreeIterator);\n\nvar OrderedSet = function(e) {\n    __extends(OrderedSet, e);\n    function OrderedSet(t, r, n) {\n        if (t === void 0) {\n            t = [];\n        }\n        var i = e.call(this, r, n) || this;\n        var o = i;\n        t.forEach((function(e) {\n            o.insert(e);\n        }));\n        return i;\n    }\n    OrderedSet.prototype.P = function(e) {\n        return __generator(this, (function(t) {\n            switch (t.label) {\n              case 0:\n                if (e === undefined) return [ 2 ];\n                return [ 5, __values(this.P(e.K)) ];\n\n              case 1:\n                t.sent();\n                return [ 4, e.u ];\n\n              case 2:\n                t.sent();\n                return [ 5, __values(this.P(e.N)) ];\n\n              case 3:\n                t.sent();\n                return [ 2 ];\n            }\n        }));\n    };\n    OrderedSet.prototype.begin = function() {\n        return new OrderedSetIterator(this.h.K || this.h, this.h, this);\n    };\n    OrderedSet.prototype.end = function() {\n        return new OrderedSetIterator(this.h, this.h, this);\n    };\n    OrderedSet.prototype.rBegin = function() {\n        return new OrderedSetIterator(this.h.N || this.h, this.h, this, 1);\n    };\n    OrderedSet.prototype.rEnd = function() {\n        return new OrderedSetIterator(this.h, this.h, this, 1);\n    };\n    OrderedSet.prototype.front = function() {\n        return this.h.K ? this.h.K.u : undefined;\n    };\n    OrderedSet.prototype.back = function() {\n        return this.h.N ? this.h.N.u : undefined;\n    };\n    OrderedSet.prototype.insert = function(e, t) {\n        return this.v(e, undefined, t);\n    };\n    OrderedSet.prototype.find = function(e) {\n        var t = this.g(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.lowerBound = function(e) {\n        var t = this.U(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.upperBound = function(e) {\n        var t = this.X(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.reverseLowerBound = function(e) {\n        var t = this.Y(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.reverseUpperBound = function(e) {\n        var t = this.Z(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.union = function(e) {\n        var t = this;\n        e.forEach((function(e) {\n            t.insert(e);\n        }));\n        return this.M;\n    };\n    OrderedSet.prototype[Symbol.iterator] = function() {\n        return this.P(this.W);\n    };\n    return OrderedSet;\n}(TreeContainer);\n\nexport default OrderedSet;\n//# sourceMappingURL=OrderedSet.js.map\n","'use strict'\n\n// A linked list to keep track of recently-used-ness\nconst Yallist = require('yallist')\n\nconst MAX = Symbol('max')\nconst LENGTH = Symbol('length')\nconst LENGTH_CALCULATOR = Symbol('lengthCalculator')\nconst ALLOW_STALE = Symbol('allowStale')\nconst MAX_AGE = Symbol('maxAge')\nconst DISPOSE = Symbol('dispose')\nconst NO_DISPOSE_ON_SET = Symbol('noDisposeOnSet')\nconst LRU_LIST = Symbol('lruList')\nconst CACHE = Symbol('cache')\nconst UPDATE_AGE_ON_GET = Symbol('updateAgeOnGet')\n\nconst naiveLength = () => 1\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nclass LRUCache {\n  constructor (options) {\n    if (typeof options === 'number')\n      options = { max: options }\n\n    if (!options)\n      options = {}\n\n    if (options.max && (typeof options.max !== 'number' || options.max < 0))\n      throw new TypeError('max must be a non-negative number')\n    // Kind of weird to have a default max of Infinity, but oh well.\n    const max = this[MAX] = options.max || Infinity\n\n    const lc = options.length || naiveLength\n    this[LENGTH_CALCULATOR] = (typeof lc !== 'function') ? naiveLength : lc\n    this[ALLOW_STALE] = options.stale || false\n    if (options.maxAge && typeof options.maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n    this[MAX_AGE] = options.maxAge || 0\n    this[DISPOSE] = options.dispose\n    this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n    this[UPDATE_AGE_ON_GET] = options.updateAgeOnGet || false\n    this.reset()\n  }\n\n  // resize the cache when the max changes.\n  set max (mL) {\n    if (typeof mL !== 'number' || mL < 0)\n      throw new TypeError('max must be a non-negative number')\n\n    this[MAX] = mL || Infinity\n    trim(this)\n  }\n  get max () {\n    return this[MAX]\n  }\n\n  set allowStale (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  }\n  get allowStale () {\n    return this[ALLOW_STALE]\n  }\n\n  set maxAge (mA) {\n    if (typeof mA !== 'number')\n      throw new TypeError('maxAge must be a non-negative number')\n\n    this[MAX_AGE] = mA\n    trim(this)\n  }\n  get maxAge () {\n    return this[MAX_AGE]\n  }\n\n  // resize the cache when the lengthCalculator changes.\n  set lengthCalculator (lC) {\n    if (typeof lC !== 'function')\n      lC = naiveLength\n\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(hit => {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      })\n    }\n    trim(this)\n  }\n  get lengthCalculator () { return this[LENGTH_CALCULATOR] }\n\n  get length () { return this[LENGTH] }\n  get itemCount () { return this[LRU_LIST].length }\n\n  rforEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].tail; walker !== null;) {\n      const prev = walker.prev\n      forEachStep(this, fn, walker, thisp)\n      walker = prev\n    }\n  }\n\n  forEach (fn, thisp) {\n    thisp = thisp || this\n    for (let walker = this[LRU_LIST].head; walker !== null;) {\n      const next = walker.next\n      forEachStep(this, fn, walker, thisp)\n      walker = next\n    }\n  }\n\n  keys () {\n    return this[LRU_LIST].toArray().map(k => k.key)\n  }\n\n  values () {\n    return this[LRU_LIST].toArray().map(k => k.value)\n  }\n\n  reset () {\n    if (this[DISPOSE] &&\n        this[LRU_LIST] &&\n        this[LRU_LIST].length) {\n      this[LRU_LIST].forEach(hit => this[DISPOSE](hit.key, hit.value))\n    }\n\n    this[CACHE] = new Map() // hash of items by key\n    this[LRU_LIST] = new Yallist() // list of items in order of use recency\n    this[LENGTH] = 0 // length of items in the list\n  }\n\n  dump () {\n    return this[LRU_LIST].map(hit =>\n      isStale(this, hit) ? false : {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }).toArray().filter(h => h)\n  }\n\n  dumpLru () {\n    return this[LRU_LIST]\n  }\n\n  set (key, value, maxAge) {\n    maxAge = maxAge || this[MAX_AGE]\n\n    if (maxAge && typeof maxAge !== 'number')\n      throw new TypeError('maxAge must be a number')\n\n    const now = maxAge ? Date.now() : 0\n    const len = this[LENGTH_CALCULATOR](value, key)\n\n    if (this[CACHE].has(key)) {\n      if (len > this[MAX]) {\n        del(this, this[CACHE].get(key))\n        return false\n      }\n\n      const node = this[CACHE].get(key)\n      const item = node.value\n\n      // dispose of the old one before overwriting\n      // split out into 2 ifs for better coverage tracking\n      if (this[DISPOSE]) {\n        if (!this[NO_DISPOSE_ON_SET])\n          this[DISPOSE](key, item.value)\n      }\n\n      item.now = now\n      item.maxAge = maxAge\n      item.value = value\n      this[LENGTH] += len - item.length\n      item.length = len\n      this.get(key)\n      trim(this)\n      return true\n    }\n\n    const hit = new Entry(key, value, len, now, maxAge)\n\n    // oversized objects fall out of cache automatically.\n    if (hit.length > this[MAX]) {\n      if (this[DISPOSE])\n        this[DISPOSE](key, value)\n\n      return false\n    }\n\n    this[LENGTH] += hit.length\n    this[LRU_LIST].unshift(hit)\n    this[CACHE].set(key, this[LRU_LIST].head)\n    trim(this)\n    return true\n  }\n\n  has (key) {\n    if (!this[CACHE].has(key)) return false\n    const hit = this[CACHE].get(key).value\n    return !isStale(this, hit)\n  }\n\n  get (key) {\n    return get(this, key, true)\n  }\n\n  peek (key) {\n    return get(this, key, false)\n  }\n\n  pop () {\n    const node = this[LRU_LIST].tail\n    if (!node)\n      return null\n\n    del(this, node)\n    return node.value\n  }\n\n  del (key) {\n    del(this, this[CACHE].get(key))\n  }\n\n  load (arr) {\n    // reset the cache\n    this.reset()\n\n    const now = Date.now()\n    // A previous serialized cache has the most recent items first\n    for (let l = arr.length - 1; l >= 0; l--) {\n      const hit = arr[l]\n      const expiresAt = hit.e || 0\n      if (expiresAt === 0)\n        // the item was created without expiration in a non aged cache\n        this.set(hit.k, hit.v)\n      else {\n        const maxAge = expiresAt - now\n        // dont add already expired items\n        if (maxAge > 0) {\n          this.set(hit.k, hit.v, maxAge)\n        }\n      }\n    }\n  }\n\n  prune () {\n    this[CACHE].forEach((value, key) => get(this, key, false))\n  }\n}\n\nconst get = (self, key, doUse) => {\n  const node = self[CACHE].get(key)\n  if (node) {\n    const hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE])\n        return undefined\n    } else {\n      if (doUse) {\n        if (self[UPDATE_AGE_ON_GET])\n          node.value.now = Date.now()\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    return hit.value\n  }\n}\n\nconst isStale = (self, hit) => {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE]))\n    return false\n\n  const diff = Date.now() - hit.now\n  return hit.maxAge ? diff > hit.maxAge\n    : self[MAX_AGE] && (diff > self[MAX_AGE])\n}\n\nconst trim = self => {\n  if (self[LENGTH] > self[MAX]) {\n    for (let walker = self[LRU_LIST].tail;\n      self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      const prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nconst del = (self, node) => {\n  if (node) {\n    const hit = node.value\n    if (self[DISPOSE])\n      self[DISPOSE](hit.key, hit.value)\n\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\nclass Entry {\n  constructor (key, value, length, now, maxAge) {\n    this.key = key\n    this.value = value\n    this.length = length\n    this.now = now\n    this.maxAge = maxAge || 0\n  }\n}\n\nconst forEachStep = (self, fn, node, thisp) => {\n  let hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE])\n      hit = undefined\n  }\n  if (hit)\n    fn.call(thisp, hit.value, hit.key, self)\n}\n\nmodule.exports = LRUCache\n","/* Protocol - protocol constants */\nconst protocol = module.exports\n\n/* Command code => mnemonic */\nprotocol.types = {\n  0: 'reserved',\n  1: 'connect',\n  2: 'connack',\n  3: 'publish',\n  4: 'puback',\n  5: 'pubrec',\n  6: 'pubrel',\n  7: 'pubcomp',\n  8: 'subscribe',\n  9: 'suback',\n  10: 'unsubscribe',\n  11: 'unsuback',\n  12: 'pingreq',\n  13: 'pingresp',\n  14: 'disconnect',\n  15: 'auth'\n}\n\n/* Mnemonic => Command code */\nprotocol.codes = {}\nfor (const k in protocol.types) {\n  const v = protocol.types[k]\n  protocol.codes[v] = k\n}\n\n/* Header */\nprotocol.CMD_SHIFT = 4\nprotocol.CMD_MASK = 0xF0\nprotocol.DUP_MASK = 0x08\nprotocol.QOS_MASK = 0x03\nprotocol.QOS_SHIFT = 1\nprotocol.RETAIN_MASK = 0x01\n\n/* Length */\nprotocol.VARBYTEINT_MASK = 0x7F\nprotocol.VARBYTEINT_FIN_MASK = 0x80\nprotocol.VARBYTEINT_MAX = 268435455\n\n/* Connack */\nprotocol.SESSIONPRESENT_MASK = 0x01\nprotocol.SESSIONPRESENT_HEADER = Buffer.from([protocol.SESSIONPRESENT_MASK])\nprotocol.CONNACK_HEADER = Buffer.from([protocol.codes.connack << protocol.CMD_SHIFT])\n\n/* Connect */\nprotocol.USERNAME_MASK = 0x80\nprotocol.PASSWORD_MASK = 0x40\nprotocol.WILL_RETAIN_MASK = 0x20\nprotocol.WILL_QOS_MASK = 0x18\nprotocol.WILL_QOS_SHIFT = 3\nprotocol.WILL_FLAG_MASK = 0x04\nprotocol.CLEAN_SESSION_MASK = 0x02\nprotocol.CONNECT_HEADER = Buffer.from([protocol.codes.connect << protocol.CMD_SHIFT])\n\n/* Properties */\nprotocol.properties = {\n  sessionExpiryInterval: 17,\n  willDelayInterval: 24,\n  receiveMaximum: 33,\n  maximumPacketSize: 39,\n  topicAliasMaximum: 34,\n  requestResponseInformation: 25,\n  requestProblemInformation: 23,\n  userProperties: 38,\n  authenticationMethod: 21,\n  authenticationData: 22,\n  payloadFormatIndicator: 1,\n  messageExpiryInterval: 2,\n  contentType: 3,\n  responseTopic: 8,\n  correlationData: 9,\n  maximumQoS: 36,\n  retainAvailable: 37,\n  assignedClientIdentifier: 18,\n  reasonString: 31,\n  wildcardSubscriptionAvailable: 40,\n  subscriptionIdentifiersAvailable: 41,\n  sharedSubscriptionAvailable: 42,\n  serverKeepAlive: 19,\n  responseInformation: 26,\n  serverReference: 28,\n  topicAlias: 35,\n  subscriptionIdentifier: 11\n}\nprotocol.propertiesCodes = {}\nfor (const prop in protocol.properties) {\n  const id = protocol.properties[prop]\n  protocol.propertiesCodes[id] = prop\n}\nprotocol.propertiesTypes = {\n  sessionExpiryInterval: 'int32',\n  willDelayInterval: 'int32',\n  receiveMaximum: 'int16',\n  maximumPacketSize: 'int32',\n  topicAliasMaximum: 'int16',\n  requestResponseInformation: 'byte',\n  requestProblemInformation: 'byte',\n  userProperties: 'pair',\n  authenticationMethod: 'string',\n  authenticationData: 'binary',\n  payloadFormatIndicator: 'byte',\n  messageExpiryInterval: 'int32',\n  contentType: 'string',\n  responseTopic: 'string',\n  correlationData: 'binary',\n  maximumQoS: 'int8',\n  retainAvailable: 'byte',\n  assignedClientIdentifier: 'string',\n  reasonString: 'string',\n  wildcardSubscriptionAvailable: 'byte',\n  subscriptionIdentifiersAvailable: 'byte',\n  sharedSubscriptionAvailable: 'byte',\n  serverKeepAlive: 'int16',\n  responseInformation: 'string',\n  serverReference: 'string',\n  topicAlias: 'int16',\n  subscriptionIdentifier: 'var'\n}\n\nfunction genHeader (type) {\n  return [0, 1, 2].map(qos => {\n    return [0, 1].map(dup => {\n      return [0, 1].map(retain => {\n        const buf = Buffer.alloc(1)\n        buf.writeUInt8(\n          protocol.codes[type] << protocol.CMD_SHIFT |\n          (dup ? protocol.DUP_MASK : 0) |\n          qos << protocol.QOS_SHIFT | retain, 0, true)\n        return buf\n      })\n    })\n  })\n}\n\n/* Publish */\nprotocol.PUBLISH_HEADER = genHeader('publish')\n\n/* Subscribe */\nprotocol.SUBSCRIBE_HEADER = genHeader('subscribe')\nprotocol.SUBSCRIBE_OPTIONS_QOS_MASK = 0x03\nprotocol.SUBSCRIBE_OPTIONS_NL_MASK = 0x01\nprotocol.SUBSCRIBE_OPTIONS_NL_SHIFT = 2\nprotocol.SUBSCRIBE_OPTIONS_RAP_MASK = 0x01\nprotocol.SUBSCRIBE_OPTIONS_RAP_SHIFT = 3\nprotocol.SUBSCRIBE_OPTIONS_RH_MASK = 0x03\nprotocol.SUBSCRIBE_OPTIONS_RH_SHIFT = 4\nprotocol.SUBSCRIBE_OPTIONS_RH = [0x00, 0x10, 0x20]\nprotocol.SUBSCRIBE_OPTIONS_NL = 0x04\nprotocol.SUBSCRIBE_OPTIONS_RAP = 0x08\nprotocol.SUBSCRIBE_OPTIONS_QOS = [0x00, 0x01, 0x02]\n\n/* Unsubscribe */\nprotocol.UNSUBSCRIBE_HEADER = genHeader('unsubscribe')\n\n/* Confirmations */\nprotocol.ACKS = {\n  unsuback: genHeader('unsuback'),\n  puback: genHeader('puback'),\n  pubcomp: genHeader('pubcomp'),\n  pubrel: genHeader('pubrel'),\n  pubrec: genHeader('pubrec')\n}\n\nprotocol.SUBACK_HEADER = Buffer.from([protocol.codes.suback << protocol.CMD_SHIFT])\n\n/* Protocol versions */\nprotocol.VERSION3 = Buffer.from([3])\nprotocol.VERSION4 = Buffer.from([4])\nprotocol.VERSION5 = Buffer.from([5])\nprotocol.VERSION131 = Buffer.from([131])\nprotocol.VERSION132 = Buffer.from([132])\n\n/* QoS */\nprotocol.QOS = [0, 1, 2].map(qos => {\n  return Buffer.from([qos])\n})\n\n/* Empty packets */\nprotocol.EMPTY = {\n  pingreq: Buffer.from([protocol.codes.pingreq << 4, 0]),\n  pingresp: Buffer.from([protocol.codes.pingresp << 4, 0]),\n  disconnect: Buffer.from([protocol.codes.disconnect << 4, 0])\n}\n","const writeToStream = require('./writeToStream')\nconst EventEmitter = require('events')\n\nfunction generate (packet, opts) {\n  const stream = new Accumulator()\n  writeToStream(packet, stream, opts)\n  return stream.concat()\n}\n\nclass Accumulator extends EventEmitter {\n  constructor () {\n    super()\n    this._array = new Array(20)\n    this._i = 0\n  }\n\n  write (chunk) {\n    this._array[this._i++] = chunk\n    return true\n  }\n\n  concat () {\n    let length = 0\n    const lengths = new Array(this._array.length)\n    const list = this._array\n    let pos = 0\n    let i\n\n    for (i = 0; i < list.length && list[i] !== undefined; i++) {\n      if (typeof list[i] !== 'string') lengths[i] = list[i].length\n      else lengths[i] = Buffer.byteLength(list[i])\n\n      length += lengths[i]\n    }\n\n    const result = Buffer.allocUnsafe(length)\n\n    for (i = 0; i < list.length && list[i] !== undefined; i++) {\n      if (typeof list[i] !== 'string') {\n        list[i].copy(result, pos)\n        pos += lengths[i]\n      } else {\n        result.write(list[i], pos)\n        pos += lengths[i]\n      }\n    }\n\n    return result\n  }\n}\n\nmodule.exports = generate\n","exports.parser = require('./parser').parser\nexports.generate = require('./generate')\nexports.writeToStream = require('./writeToStream')\n","const max = 65536\nconst cache = {}\n\n// in node 6 Buffer.subarray returns a Uint8Array instead of a Buffer\n// later versions return a Buffer\n// alternative is Buffer.slice but that creates a new buffer\n// creating new buffers takes time\n// SubOk is only false on node < 8\nconst SubOk = Buffer.isBuffer(Buffer.from([1, 2]).subarray(0, 1))\n\nfunction generateBuffer (i) {\n  const buffer = Buffer.allocUnsafe(2)\n  buffer.writeUInt8(i >> 8, 0)\n  buffer.writeUInt8(i & 0x00FF, 0 + 1)\n\n  return buffer\n}\n\nfunction generateCache () {\n  for (let i = 0; i < max; i++) {\n    cache[i] = generateBuffer(i)\n  }\n}\n\nfunction genBufVariableByteInt (num) {\n  const maxLength = 4 // max 4 bytes\n  let digit = 0\n  let pos = 0\n  const buffer = Buffer.allocUnsafe(maxLength)\n\n  do {\n    digit = num % 128 | 0\n    num = num / 128 | 0\n    if (num > 0) digit = digit | 0x80\n\n    buffer.writeUInt8(digit, pos++)\n  } while (num > 0 && pos < maxLength)\n\n  if (num > 0) {\n    pos = 0\n  }\n\n  return SubOk ? buffer.subarray(0, pos) : buffer.slice(0, pos)\n}\n\nfunction generate4ByteBuffer (num) {\n  const buffer = Buffer.allocUnsafe(4)\n  buffer.writeUInt32BE(num, 0)\n  return buffer\n}\n\nmodule.exports = {\n  cache,\n  generateCache,\n  generateNumber: generateBuffer,\n  genBufVariableByteInt,\n  generate4ByteBuffer\n}\n","class Packet {\n  constructor () {\n    this.cmd = null\n    this.retain = false\n    this.qos = 0\n    this.dup = false\n    this.length = -1\n    this.topic = null\n    this.payload = null\n  }\n}\n\nmodule.exports = Packet\n","const bl = require('bl')\nconst EventEmitter = require('events')\nconst Packet = require('./packet')\nconst constants = require('./constants')\nconst debug = require('debug')('mqtt-packet:parser')\n\nclass Parser extends EventEmitter {\n  constructor () {\n    super()\n    this.parser = this.constructor.parser\n  }\n\n  static parser (opt) {\n    if (!(this instanceof Parser)) return (new Parser()).parser(opt)\n\n    this.settings = opt || {}\n\n    this._states = [\n      '_parseHeader',\n      '_parseLength',\n      '_parsePayload',\n      '_newPacket'\n    ]\n\n    this._resetState()\n    return this\n  }\n\n  _resetState () {\n    debug('_resetState: resetting packet, error, _list, and _stateCounter')\n    this.packet = new Packet()\n    this.error = null\n    this._list = bl()\n    this._stateCounter = 0\n  }\n\n  parse (buf) {\n    if (this.error) this._resetState()\n\n    this._list.append(buf)\n    debug('parse: current state: %s', this._states[this._stateCounter])\n    while ((this.packet.length !== -1 || this._list.length > 0) &&\n      this[this._states[this._stateCounter]]() &&\n      !this.error) {\n      this._stateCounter++\n      debug('parse: state complete. _stateCounter is now: %d', this._stateCounter)\n      debug('parse: packet.length: %d, buffer list length: %d', this.packet.length, this._list.length)\n      if (this._stateCounter >= this._states.length) this._stateCounter = 0\n    }\n    debug('parse: exited while loop. packet: %d, buffer list length: %d', this.packet.length, this._list.length)\n    return this._list.length\n  }\n\n  _parseHeader () {\n    // There is at least one byte in the buffer\n    const zero = this._list.readUInt8(0)\n    this.packet.cmd = constants.types[zero >> constants.CMD_SHIFT]\n    this.packet.retain = (zero & constants.RETAIN_MASK) !== 0\n    this.packet.qos = (zero >> constants.QOS_SHIFT) & constants.QOS_MASK\n    this.packet.dup = (zero & constants.DUP_MASK) !== 0\n    debug('_parseHeader: packet: %o', this.packet)\n\n    this._list.consume(1)\n\n    return true\n  }\n\n  _parseLength () {\n    // There is at least one byte in the list\n    const result = this._parseVarByteNum(true)\n\n    if (result) {\n      this.packet.length = result.value\n      this._list.consume(result.bytes)\n    }\n    debug('_parseLength %d', result.value)\n    return !!result\n  }\n\n  _parsePayload () {\n    debug('_parsePayload: payload %O', this._list)\n    let result = false\n\n    // Do we have a payload? Do we have enough data to complete the payload?\n    // PINGs have no payload\n    if (this.packet.length === 0 || this._list.length >= this.packet.length) {\n      this._pos = 0\n\n      switch (this.packet.cmd) {\n        case 'connect':\n          this._parseConnect()\n          break\n        case 'connack':\n          this._parseConnack()\n          break\n        case 'publish':\n          this._parsePublish()\n          break\n        case 'puback':\n        case 'pubrec':\n        case 'pubrel':\n        case 'pubcomp':\n          this._parseConfirmation()\n          break\n        case 'subscribe':\n          this._parseSubscribe()\n          break\n        case 'suback':\n          this._parseSuback()\n          break\n        case 'unsubscribe':\n          this._parseUnsubscribe()\n          break\n        case 'unsuback':\n          this._parseUnsuback()\n          break\n        case 'pingreq':\n        case 'pingresp':\n          // These are empty, nothing to do\n          break\n        case 'disconnect':\n          this._parseDisconnect()\n          break\n        case 'auth':\n          this._parseAuth()\n          break\n        default:\n          this._emitError(new Error('Not supported'))\n      }\n\n      result = true\n    }\n    debug('_parsePayload complete result: %s', result)\n    return result\n  }\n\n  _parseConnect () {\n    debug('_parseConnect')\n    let topic // Will topic\n    let payload // Will payload\n    let password // Password\n    let username // Username\n    const flags = {}\n    const packet = this.packet\n\n    // Parse protocolId\n    const protocolId = this._parseString()\n\n    if (protocolId === null) return this._emitError(new Error('Cannot parse protocolId'))\n    if (protocolId !== 'MQTT' && protocolId !== 'MQIsdp') {\n      return this._emitError(new Error('Invalid protocolId'))\n    }\n\n    packet.protocolId = protocolId\n\n    // Parse constants version number\n    if (this._pos >= this._list.length) return this._emitError(new Error('Packet too short'))\n\n    packet.protocolVersion = this._list.readUInt8(this._pos)\n\n    if (packet.protocolVersion >= 128) {\n      packet.bridgeMode = true\n      packet.protocolVersion = packet.protocolVersion - 128\n    }\n\n    if (packet.protocolVersion !== 3 && packet.protocolVersion !== 4 && packet.protocolVersion !== 5) {\n      return this._emitError(new Error('Invalid protocol version'))\n    }\n\n    this._pos++\n\n    if (this._pos >= this._list.length) {\n      return this._emitError(new Error('Packet too short'))\n    }\n\n    // Parse connect flags\n    flags.username = (this._list.readUInt8(this._pos) & constants.USERNAME_MASK)\n    flags.password = (this._list.readUInt8(this._pos) & constants.PASSWORD_MASK)\n    flags.will = (this._list.readUInt8(this._pos) & constants.WILL_FLAG_MASK)\n\n    if (flags.will) {\n      packet.will = {}\n      packet.will.retain = (this._list.readUInt8(this._pos) & constants.WILL_RETAIN_MASK) !== 0\n      packet.will.qos = (this._list.readUInt8(this._pos) &\n        constants.WILL_QOS_MASK) >> constants.WILL_QOS_SHIFT\n    }\n\n    packet.clean = (this._list.readUInt8(this._pos) & constants.CLEAN_SESSION_MASK) !== 0\n    this._pos++\n\n    // Parse keepalive\n    packet.keepalive = this._parseNum()\n    if (packet.keepalive === -1) return this._emitError(new Error('Packet too short'))\n\n    // parse properties\n    if (packet.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n    // Parse clientId\n    const clientId = this._parseString()\n    if (clientId === null) return this._emitError(new Error('Packet too short'))\n    packet.clientId = clientId\n    debug('_parseConnect: packet.clientId: %s', packet.clientId)\n\n    if (flags.will) {\n      if (packet.protocolVersion === 5) {\n        const willProperties = this._parseProperties()\n        if (Object.getOwnPropertyNames(willProperties).length) {\n          packet.will.properties = willProperties\n        }\n      }\n      // Parse will topic\n      topic = this._parseString()\n      if (topic === null) return this._emitError(new Error('Cannot parse will topic'))\n      packet.will.topic = topic\n      debug('_parseConnect: packet.will.topic: %s', packet.will.topic)\n\n      // Parse will payload\n      payload = this._parseBuffer()\n      if (payload === null) return this._emitError(new Error('Cannot parse will payload'))\n      packet.will.payload = payload\n      debug('_parseConnect: packet.will.paylaod: %s', packet.will.payload)\n    }\n\n    // Parse username\n    if (flags.username) {\n      username = this._parseString()\n      if (username === null) return this._emitError(new Error('Cannot parse username'))\n      packet.username = username\n      debug('_parseConnect: packet.username: %s', packet.username)\n    }\n\n    // Parse password\n    if (flags.password) {\n      password = this._parseBuffer()\n      if (password === null) return this._emitError(new Error('Cannot parse password'))\n      packet.password = password\n    }\n    // need for right parse auth packet and self set up\n    this.settings = packet\n    debug('_parseConnect: complete')\n    return packet\n  }\n\n  _parseConnack () {\n    debug('_parseConnack')\n    const packet = this.packet\n\n    if (this._list.length < 1) return null\n    packet.sessionPresent = !!(this._list.readUInt8(this._pos++) & constants.SESSIONPRESENT_MASK)\n\n    if (this.settings.protocolVersion === 5) {\n      if (this._list.length >= 2) {\n        packet.reasonCode = this._list.readUInt8(this._pos++)\n      } else {\n        packet.reasonCode = 0\n      }\n    } else {\n      if (this._list.length < 2) return null\n      packet.returnCode = this._list.readUInt8(this._pos++)\n    }\n\n    if (packet.returnCode === -1 || packet.reasonCode === -1) return this._emitError(new Error('Cannot parse return code'))\n    // mqtt 5 properties\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n    debug('_parseConnack: complete')\n  }\n\n  _parsePublish () {\n    debug('_parsePublish')\n    const packet = this.packet\n    packet.topic = this._parseString()\n\n    if (packet.topic === null) return this._emitError(new Error('Cannot parse topic'))\n\n    // Parse messageId\n    if (packet.qos > 0) if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    packet.payload = this._list.slice(this._pos, packet.length)\n    debug('_parsePublish: payload from buffer list: %o', packet.payload)\n  }\n\n  _parseSubscribe () {\n    debug('_parseSubscribe')\n    const packet = this.packet\n    let topic\n    let options\n    let qos\n    let rh\n    let rap\n    let nl\n    let subscription\n\n    if (packet.qos !== 1) {\n      return this._emitError(new Error('Wrong subscribe header'))\n    }\n\n    packet.subscriptions = []\n\n    if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    while (this._pos < packet.length) {\n      // Parse topic\n      topic = this._parseString()\n      if (topic === null) return this._emitError(new Error('Cannot parse topic'))\n      if (this._pos >= packet.length) return this._emitError(new Error('Malformed Subscribe Payload'))\n\n      options = this._parseByte()\n      qos = options & constants.SUBSCRIBE_OPTIONS_QOS_MASK\n      nl = ((options >> constants.SUBSCRIBE_OPTIONS_NL_SHIFT) & constants.SUBSCRIBE_OPTIONS_NL_MASK) !== 0\n      rap = ((options >> constants.SUBSCRIBE_OPTIONS_RAP_SHIFT) & constants.SUBSCRIBE_OPTIONS_RAP_MASK) !== 0\n      rh = (options >> constants.SUBSCRIBE_OPTIONS_RH_SHIFT) & constants.SUBSCRIBE_OPTIONS_RH_MASK\n\n      subscription = { topic, qos }\n\n      // mqtt 5 options\n      if (this.settings.protocolVersion === 5) {\n        subscription.nl = nl\n        subscription.rap = rap\n        subscription.rh = rh\n      } else if (this.settings.bridgeMode) {\n        subscription.rh = 0\n        subscription.rap = true\n        subscription.nl = true\n      }\n\n      // Push pair to subscriptions\n      debug('_parseSubscribe: push subscription `%s` to subscription', subscription)\n      packet.subscriptions.push(subscription)\n    }\n  }\n\n  _parseSuback () {\n    debug('_parseSuback')\n    const packet = this.packet\n    this.packet.granted = []\n\n    if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    // Parse granted QoSes\n    while (this._pos < this.packet.length) {\n      this.packet.granted.push(this._list.readUInt8(this._pos++))\n    }\n  }\n\n  _parseUnsubscribe () {\n    debug('_parseUnsubscribe')\n    const packet = this.packet\n\n    packet.unsubscriptions = []\n\n    // Parse messageId\n    if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    while (this._pos < packet.length) {\n      // Parse topic\n      const topic = this._parseString()\n      if (topic === null) return this._emitError(new Error('Cannot parse topic'))\n\n      // Push topic to unsubscriptions\n      debug('_parseUnsubscribe: push topic `%s` to unsubscriptions', topic)\n      packet.unsubscriptions.push(topic)\n    }\n  }\n\n  _parseUnsuback () {\n    debug('_parseUnsuback')\n    const packet = this.packet\n    if (!this._parseMessageId()) return this._emitError(new Error('Cannot parse messageId'))\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n      // Parse granted QoSes\n      packet.granted = []\n      while (this._pos < this.packet.length) {\n        this.packet.granted.push(this._list.readUInt8(this._pos++))\n      }\n    }\n  }\n\n  // parse packets like puback, pubrec, pubrel, pubcomp\n  _parseConfirmation () {\n    debug('_parseConfirmation: packet.cmd: `%s`', this.packet.cmd)\n    const packet = this.packet\n\n    this._parseMessageId()\n\n    if (this.settings.protocolVersion === 5) {\n      if (packet.length > 2) {\n        // response code\n        packet.reasonCode = this._parseByte()\n        debug('_parseConfirmation: packet.reasonCode `%d`', packet.reasonCode)\n      } else {\n        packet.reasonCode = 0\n      }\n\n      if (packet.length > 3) {\n        // properies mqtt 5\n        const properties = this._parseProperties()\n        if (Object.getOwnPropertyNames(properties).length) {\n          packet.properties = properties\n        }\n      }\n    }\n\n    return true\n  }\n\n  // parse disconnect packet\n  _parseDisconnect () {\n    const packet = this.packet\n    debug('_parseDisconnect')\n\n    if (this.settings.protocolVersion === 5) {\n      // response code\n      if (this._list.length > 0) {\n        packet.reasonCode = this._parseByte()\n      } else {\n        packet.reasonCode = 0\n      }\n      // properies mqtt 5\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    debug('_parseDisconnect result: true')\n    return true\n  }\n\n  // parse auth packet\n  _parseAuth () {\n    debug('_parseAuth')\n    const packet = this.packet\n\n    if (this.settings.protocolVersion !== 5) {\n      return this._emitError(new Error('Not supported auth packet for this version MQTT'))\n    }\n\n    // response code\n    packet.reasonCode = this._parseByte()\n    // properies mqtt 5\n    const properties = this._parseProperties()\n    if (Object.getOwnPropertyNames(properties).length) {\n      packet.properties = properties\n    }\n\n    debug('_parseAuth: result: true')\n    return true\n  }\n\n  _parseMessageId () {\n    const packet = this.packet\n\n    packet.messageId = this._parseNum()\n\n    if (packet.messageId === null) {\n      this._emitError(new Error('Cannot parse messageId'))\n      return false\n    }\n\n    debug('_parseMessageId: packet.messageId %d', packet.messageId)\n    return true\n  }\n\n  _parseString (maybeBuffer) {\n    const length = this._parseNum()\n    const end = length + this._pos\n\n    if (length === -1 || end > this._list.length || end > this.packet.length) return null\n\n    const result = this._list.toString('utf8', this._pos, end)\n    this._pos += length\n    debug('_parseString: result: %s', result)\n    return result\n  }\n\n  _parseStringPair () {\n    debug('_parseStringPair')\n    return {\n      name: this._parseString(),\n      value: this._parseString()\n    }\n  }\n\n  _parseBuffer () {\n    const length = this._parseNum()\n    const end = length + this._pos\n\n    if (length === -1 || end > this._list.length || end > this.packet.length) return null\n\n    const result = this._list.slice(this._pos, end)\n\n    this._pos += length\n    debug('_parseBuffer: result: %o', result)\n    return result\n  }\n\n  _parseNum () {\n    if (this._list.length - this._pos < 2) return -1\n\n    const result = this._list.readUInt16BE(this._pos)\n    this._pos += 2\n    debug('_parseNum: result: %s', result)\n    return result\n  }\n\n  _parse4ByteNum () {\n    if (this._list.length - this._pos < 4) return -1\n\n    const result = this._list.readUInt32BE(this._pos)\n    this._pos += 4\n    debug('_parse4ByteNum: result: %s', result)\n    return result\n  }\n\n  _parseVarByteNum (fullInfoFlag) {\n    debug('_parseVarByteNum')\n    const maxBytes = 4\n    let bytes = 0\n    let mul = 1\n    let value = 0\n    let result = false\n    let current\n    const padding = this._pos ? this._pos : 0\n\n    while (bytes < maxBytes && (padding + bytes) < this._list.length) {\n      current = this._list.readUInt8(padding + bytes++)\n      value += mul * (current & constants.VARBYTEINT_MASK)\n      mul *= 0x80\n\n      if ((current & constants.VARBYTEINT_FIN_MASK) === 0) {\n        result = true\n        break\n      }\n      if (this._list.length <= bytes) {\n        break\n      }\n    }\n\n    if (!result && bytes === maxBytes && this._list.length >= bytes) {\n      this._emitError(new Error('Invalid variable byte integer'))\n    }\n\n    if (padding) {\n      this._pos += bytes\n    }\n\n    result = result\n      ? fullInfoFlag ? {\n        bytes,\n        value\n      } : value\n      : false\n\n    debug('_parseVarByteNum: result: %o', result)\n    return result\n  }\n\n  _parseByte () {\n    let result\n    if (this._pos < this._list.length) {\n      result = this._list.readUInt8(this._pos)\n      this._pos++\n    }\n    debug('_parseByte: result: %o', result)\n    return result\n  }\n\n  _parseByType (type) {\n    debug('_parseByType: type: %s', type)\n    switch (type) {\n      case 'byte': {\n        return this._parseByte() !== 0\n      }\n      case 'int8': {\n        return this._parseByte()\n      }\n      case 'int16': {\n        return this._parseNum()\n      }\n      case 'int32': {\n        return this._parse4ByteNum()\n      }\n      case 'var': {\n        return this._parseVarByteNum()\n      }\n      case 'string': {\n        return this._parseString()\n      }\n      case 'pair': {\n        return this._parseStringPair()\n      }\n      case 'binary': {\n        return this._parseBuffer()\n      }\n    }\n  }\n\n  _parseProperties () {\n    debug('_parseProperties')\n    const length = this._parseVarByteNum()\n    const start = this._pos\n    const end = start + length\n    const result = {}\n    while (this._pos < end) {\n      const type = this._parseByte()\n      if (!type) {\n        this._emitError(new Error('Cannot parse property code type'))\n        return false\n      }\n      const name = constants.propertiesCodes[type]\n      if (!name) {\n        this._emitError(new Error('Unknown property'))\n        return false\n      }\n      // user properties process\n      if (name === 'userProperties') {\n        if (!result[name]) {\n          result[name] = Object.create(null)\n        }\n        const currentUserProperty = this._parseByType(constants.propertiesTypes[name])\n        if (result[name][currentUserProperty.name]) {\n          if (Array.isArray(result[name][currentUserProperty.name])) {\n            result[name][currentUserProperty.name].push(currentUserProperty.value)\n          } else {\n            const currentValue = result[name][currentUserProperty.name]\n            result[name][currentUserProperty.name] = [currentValue]\n            result[name][currentUserProperty.name].push(currentUserProperty.value)\n          }\n        } else {\n          result[name][currentUserProperty.name] = currentUserProperty.value\n        }\n        continue\n      }\n      if (result[name]) {\n        if (Array.isArray(result[name])) {\n          result[name].push(this._parseByType(constants.propertiesTypes[name]))\n        } else {\n          result[name] = [result[name]]\n          result[name].push(this._parseByType(constants.propertiesTypes[name]))\n        }\n      } else {\n        result[name] = this._parseByType(constants.propertiesTypes[name])\n      }\n    }\n    return result\n  }\n\n  _newPacket () {\n    debug('_newPacket')\n    if (this.packet) {\n      this._list.consume(this.packet.length)\n      debug('_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d', this.packet.cmd, this.packet.payload, this.packet.length)\n      this.emit('packet', this.packet)\n    }\n    debug('_newPacket: new packet')\n    this.packet = new Packet()\n\n    this._pos = 0\n\n    return true\n  }\n\n  _emitError (err) {\n    debug('_emitError')\n    this.error = err\n    this.emit('error', err)\n  }\n}\n\nmodule.exports = Parser\n","const protocol = require('./constants')\nconst empty = Buffer.allocUnsafe(0)\nconst zeroBuf = Buffer.from([0])\nconst numbers = require('./numbers')\nconst nextTick = require('process-nextick-args').nextTick\nconst debug = require('debug')('mqtt-packet:writeToStream')\n\nconst numCache = numbers.cache\nconst generateNumber = numbers.generateNumber\nconst generateCache = numbers.generateCache\nconst genBufVariableByteInt = numbers.genBufVariableByteInt\nconst generate4ByteBuffer = numbers.generate4ByteBuffer\nlet writeNumber = writeNumberCached\nlet toGenerate = true\n\nfunction generate (packet, stream, opts) {\n  debug('generate called')\n  if (stream.cork) {\n    stream.cork()\n    nextTick(uncork, stream)\n  }\n\n  if (toGenerate) {\n    toGenerate = false\n    generateCache()\n  }\n  debug('generate: packet.cmd: %s', packet.cmd)\n  switch (packet.cmd) {\n    case 'connect':\n      return connect(packet, stream, opts)\n    case 'connack':\n      return connack(packet, stream, opts)\n    case 'publish':\n      return publish(packet, stream, opts)\n    case 'puback':\n    case 'pubrec':\n    case 'pubrel':\n    case 'pubcomp':\n      return confirmation(packet, stream, opts)\n    case 'subscribe':\n      return subscribe(packet, stream, opts)\n    case 'suback':\n      return suback(packet, stream, opts)\n    case 'unsubscribe':\n      return unsubscribe(packet, stream, opts)\n    case 'unsuback':\n      return unsuback(packet, stream, opts)\n    case 'pingreq':\n    case 'pingresp':\n      return emptyPacket(packet, stream, opts)\n    case 'disconnect':\n      return disconnect(packet, stream, opts)\n    case 'auth':\n      return auth(packet, stream, opts)\n    default:\n      stream.emit('error', new Error('Unknown command'))\n      return false\n  }\n}\n/**\n * Controls numbers cache.\n * Set to \"false\" to allocate buffers on-the-flight instead of pre-generated cache\n */\nObject.defineProperty(generate, 'cacheNumbers', {\n  get () {\n    return writeNumber === writeNumberCached\n  },\n  set (value) {\n    if (value) {\n      if (!numCache || Object.keys(numCache).length === 0) toGenerate = true\n      writeNumber = writeNumberCached\n    } else {\n      toGenerate = false\n      writeNumber = writeNumberGenerated\n    }\n  }\n})\n\nfunction uncork (stream) {\n  stream.uncork()\n}\n\nfunction connect (packet, stream, opts) {\n  const settings = packet || {}\n  const protocolId = settings.protocolId || 'MQTT'\n  let protocolVersion = settings.protocolVersion || 4\n  const will = settings.will\n  let clean = settings.clean\n  const keepalive = settings.keepalive || 0\n  const clientId = settings.clientId || ''\n  const username = settings.username\n  const password = settings.password\n  /* mqtt5 new oprions */\n  const properties = settings.properties\n\n  if (clean === undefined) clean = true\n\n  let length = 0\n\n  // Must be a string and non-falsy\n  if (!protocolId ||\n     (typeof protocolId !== 'string' && !Buffer.isBuffer(protocolId))) {\n    stream.emit('error', new Error('Invalid protocolId'))\n    return false\n  } else length += protocolId.length + 2\n\n  // Must be 3 or 4 or 5\n  if (protocolVersion !== 3 && protocolVersion !== 4 && protocolVersion !== 5) {\n    stream.emit('error', new Error('Invalid protocol version'))\n    return false\n  } else length += 1\n\n  // ClientId might be omitted in 3.1.1 and 5, but only if cleanSession is set to 1\n  if ((typeof clientId === 'string' || Buffer.isBuffer(clientId)) &&\n     (clientId || protocolVersion >= 4) && (clientId || clean)) {\n    length += Buffer.byteLength(clientId) + 2\n  } else {\n    if (protocolVersion < 4) {\n      stream.emit('error', new Error('clientId must be supplied before 3.1.1'))\n      return false\n    }\n    if ((clean * 1) === 0) {\n      stream.emit('error', new Error('clientId must be given if cleanSession set to 0'))\n      return false\n    }\n  }\n\n  // Must be a two byte number\n  if (typeof keepalive !== 'number' ||\n      keepalive < 0 ||\n      keepalive > 65535 ||\n      keepalive % 1 !== 0) {\n    stream.emit('error', new Error('Invalid keepalive'))\n    return false\n  } else length += 2\n\n  // Connect flags\n  length += 1\n\n  // Properties\n  if (protocolVersion === 5) {\n    var propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // If will exists...\n  if (will) {\n    // It must be an object\n    if (typeof will !== 'object') {\n      stream.emit('error', new Error('Invalid will'))\n      return false\n    }\n    // It must have topic typeof string\n    if (!will.topic || typeof will.topic !== 'string') {\n      stream.emit('error', new Error('Invalid will topic'))\n      return false\n    } else {\n      length += Buffer.byteLength(will.topic) + 2\n    }\n\n    // Payload\n    length += 2 // payload length\n    if (will.payload) {\n      if (will.payload.length >= 0) {\n        if (typeof will.payload === 'string') {\n          length += Buffer.byteLength(will.payload)\n        } else {\n          length += will.payload.length\n        }\n      } else {\n        stream.emit('error', new Error('Invalid will payload'))\n        return false\n      }\n    }\n    // will properties\n    var willProperties = {}\n    if (protocolVersion === 5) {\n      willProperties = getProperties(stream, will.properties)\n      if (!willProperties) { return false }\n      length += willProperties.length\n    }\n  }\n\n  // Username\n  let providedUsername = false\n  if (username != null) {\n    if (isStringOrBuffer(username)) {\n      providedUsername = true\n      length += Buffer.byteLength(username) + 2\n    } else {\n      stream.emit('error', new Error('Invalid username'))\n      return false\n    }\n  }\n\n  // Password\n  if (password != null) {\n    if (!providedUsername) {\n      stream.emit('error', new Error('Username is required to use password'))\n      return false\n    }\n\n    if (isStringOrBuffer(password)) {\n      length += byteLength(password) + 2\n    } else {\n      stream.emit('error', new Error('Invalid password'))\n      return false\n    }\n  }\n\n  // Generate header\n  stream.write(protocol.CONNECT_HEADER)\n\n  // Generate length\n  writeVarByteInt(stream, length)\n\n  // Generate protocol ID\n  writeStringOrBuffer(stream, protocolId)\n\n  if (settings.bridgeMode) {\n    protocolVersion += 128\n  }\n\n  stream.write(\n    protocolVersion === 131\n      ? protocol.VERSION131\n      : protocolVersion === 132\n        ? protocol.VERSION132\n        : protocolVersion === 4\n          ? protocol.VERSION4\n          : protocolVersion === 5\n            ? protocol.VERSION5\n            : protocol.VERSION3\n  )\n\n  // Connect flags\n  let flags = 0\n  flags |= (username != null) ? protocol.USERNAME_MASK : 0\n  flags |= (password != null) ? protocol.PASSWORD_MASK : 0\n  flags |= (will && will.retain) ? protocol.WILL_RETAIN_MASK : 0\n  flags |= (will && will.qos) ? will.qos << protocol.WILL_QOS_SHIFT : 0\n  flags |= will ? protocol.WILL_FLAG_MASK : 0\n  flags |= clean ? protocol.CLEAN_SESSION_MASK : 0\n\n  stream.write(Buffer.from([flags]))\n\n  // Keepalive\n  writeNumber(stream, keepalive)\n\n  // Properties\n  if (protocolVersion === 5) {\n    propertiesData.write()\n  }\n\n  // Client ID\n  writeStringOrBuffer(stream, clientId)\n\n  // Will\n  if (will) {\n    if (protocolVersion === 5) {\n      willProperties.write()\n    }\n    writeString(stream, will.topic)\n    writeStringOrBuffer(stream, will.payload)\n  }\n\n  // Username and password\n  if (username != null) {\n    writeStringOrBuffer(stream, username)\n  }\n  if (password != null) {\n    writeStringOrBuffer(stream, password)\n  }\n  // This is a small packet that happens only once on a stream\n  // We assume the stream is always free to receive more data after this\n  return true\n}\n\nfunction connack (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const rc = version === 5 ? settings.reasonCode : settings.returnCode\n  const properties = settings.properties\n  let length = 2 // length of rc and sessionHeader\n\n  // Check return code\n  if (typeof rc !== 'number') {\n    stream.emit('error', new Error('Invalid return code'))\n    return false\n  }\n  // mqtt5 properties\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  stream.write(protocol.CONNACK_HEADER)\n  // length\n  writeVarByteInt(stream, length)\n  stream.write(settings.sessionPresent ? protocol.SESSIONPRESENT_HEADER : zeroBuf)\n\n  stream.write(Buffer.from([rc]))\n  if (propertiesData != null) {\n    propertiesData.write()\n  }\n  return true\n}\n\nfunction publish (packet, stream, opts) {\n  debug('publish: packet: %o', packet)\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const qos = settings.qos || 0\n  const retain = settings.retain ? protocol.RETAIN_MASK : 0\n  const topic = settings.topic\n  const payload = settings.payload || empty\n  const id = settings.messageId\n  const properties = settings.properties\n\n  let length = 0\n\n  // Topic must be a non-empty string or Buffer\n  if (typeof topic === 'string') length += Buffer.byteLength(topic) + 2\n  else if (Buffer.isBuffer(topic)) length += topic.length + 2\n  else {\n    stream.emit('error', new Error('Invalid topic'))\n    return false\n  }\n\n  // Get the payload length\n  if (!Buffer.isBuffer(payload)) length += Buffer.byteLength(payload)\n  else length += payload.length\n\n  // Message ID must a number if qos > 0\n  if (qos && typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else if (qos) length += 2\n\n  // mqtt5 properties\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.PUBLISH_HEADER[qos][settings.dup ? 1 : 0][retain ? 1 : 0])\n\n  // Remaining length\n  writeVarByteInt(stream, length)\n\n  // Topic\n  writeNumber(stream, byteLength(topic))\n  stream.write(topic)\n\n  // Message ID\n  if (qos > 0) writeNumber(stream, id)\n\n  // Properties\n  if (propertiesData != null) {\n    propertiesData.write()\n  }\n\n  // Payload\n  debug('publish: payload: %o', payload)\n  return stream.write(payload)\n}\n\n/* Puback, pubrec, pubrel and pubcomp */\nfunction confirmation (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const type = settings.cmd || 'puback'\n  const id = settings.messageId\n  const dup = (settings.dup && type === 'pubrel') ? protocol.DUP_MASK : 0\n  let qos = 0\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 3 : 2\n\n  if (type === 'pubrel') qos = 1\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    // Confirm should not add empty property length with no properties (rfc 3.4.2.2.1)\n    if (typeof properties === 'object') {\n      propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n      if (!propertiesData) { return false }\n      length += propertiesData.length\n    }\n  }\n\n  // Header\n  stream.write(protocol.ACKS[type][qos][dup][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // reason code in header\n  if (version === 5) {\n    stream.write(Buffer.from([reasonCode]))\n  }\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n  return true\n}\n\nfunction subscribe (packet, stream, opts) {\n  debug('subscribe: packet: ')\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const id = settings.messageId\n  const subs = settings.subscriptions\n  const properties = settings.properties\n\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else length += 2\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Check subscriptions\n  if (typeof subs === 'object' && subs.length) {\n    for (let i = 0; i < subs.length; i += 1) {\n      const itopic = subs[i].topic\n      const iqos = subs[i].qos\n\n      if (typeof itopic !== 'string') {\n        stream.emit('error', new Error('Invalid subscriptions - invalid topic'))\n        return false\n      }\n      if (typeof iqos !== 'number') {\n        stream.emit('error', new Error('Invalid subscriptions - invalid qos'))\n        return false\n      }\n\n      if (version === 5) {\n        const nl = subs[i].nl || false\n        if (typeof nl !== 'boolean') {\n          stream.emit('error', new Error('Invalid subscriptions - invalid No Local'))\n          return false\n        }\n        const rap = subs[i].rap || false\n        if (typeof rap !== 'boolean') {\n          stream.emit('error', new Error('Invalid subscriptions - invalid Retain as Published'))\n          return false\n        }\n        const rh = subs[i].rh || 0\n        if (typeof rh !== 'number' || rh > 2) {\n          stream.emit('error', new Error('Invalid subscriptions - invalid Retain Handling'))\n          return false\n        }\n      }\n\n      length += Buffer.byteLength(itopic) + 2 + 1\n    }\n  } else {\n    stream.emit('error', new Error('Invalid subscriptions'))\n    return false\n  }\n\n  // Generate header\n  debug('subscribe: writing to stream: %o', protocol.SUBSCRIBE_HEADER)\n  stream.write(protocol.SUBSCRIBE_HEADER[1][dup ? 1 : 0][0])\n\n  // Generate length\n  writeVarByteInt(stream, length)\n\n  // Generate message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  let result = true\n\n  // Generate subs\n  for (const sub of subs) {\n    const jtopic = sub.topic\n    const jqos = sub.qos\n    const jnl = +sub.nl\n    const jrap = +sub.rap\n    const jrh = sub.rh\n    let joptions\n\n    // Write topic string\n    writeString(stream, jtopic)\n\n    // options process\n    joptions = protocol.SUBSCRIBE_OPTIONS_QOS[jqos]\n    if (version === 5) {\n      joptions |= jnl ? protocol.SUBSCRIBE_OPTIONS_NL : 0\n      joptions |= jrap ? protocol.SUBSCRIBE_OPTIONS_RAP : 0\n      joptions |= jrh ? protocol.SUBSCRIBE_OPTIONS_RH[jrh] : 0\n    }\n    // Write options\n    result = stream.write(Buffer.from([joptions]))\n  }\n\n  return result\n}\n\nfunction suback (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const granted = settings.granted\n  const properties = settings.properties\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else length += 2\n\n  // Check granted qos vector\n  if (typeof granted === 'object' && granted.length) {\n    for (let i = 0; i < granted.length; i += 1) {\n      if (typeof granted[i] !== 'number') {\n        stream.emit('error', new Error('Invalid qos vector'))\n        return false\n      }\n      length += 1\n    }\n  } else {\n    stream.emit('error', new Error('Invalid qos vector'))\n    return false\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // header\n  stream.write(protocol.SUBACK_HEADER)\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  return stream.write(Buffer.from(granted))\n}\n\nfunction unsubscribe (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const unsubs = settings.unsubscriptions\n  const properties = settings.properties\n\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  } else {\n    length += 2\n  }\n  // Check unsubs\n  if (typeof unsubs === 'object' && unsubs.length) {\n    for (let i = 0; i < unsubs.length; i += 1) {\n      if (typeof unsubs[i] !== 'string') {\n        stream.emit('error', new Error('Invalid unsubscriptions'))\n        return false\n      }\n      length += Buffer.byteLength(unsubs[i]) + 2\n    }\n  } else {\n    stream.emit('error', new Error('Invalid unsubscriptions'))\n    return false\n  }\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.UNSUBSCRIBE_HEADER[1][dup ? 1 : 0][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  // Unsubs\n  let result = true\n  for (let j = 0; j < unsubs.length; j++) {\n    result = writeString(stream, unsubs[j])\n  }\n\n  return result\n}\n\nfunction unsuback (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const granted = settings.granted\n  const properties = settings.properties\n  const type = settings.cmd\n  const qos = 0\n\n  let length = 2\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.emit('error', new Error('Invalid messageId'))\n    return false\n  }\n\n  // Check granted\n  if (version === 5) {\n    if (typeof granted === 'object' && granted.length) {\n      for (let i = 0; i < granted.length; i += 1) {\n        if (typeof granted[i] !== 'number') {\n          stream.emit('error', new Error('Invalid qos vector'))\n          return false\n        }\n        length += 1\n      }\n    } else {\n      stream.emit('error', new Error('Invalid qos vector'))\n      return false\n    }\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.ACKS[type][qos][dup][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  // payload\n  if (version === 5) {\n    stream.write(Buffer.from(granted))\n  }\n  return true\n}\n\nfunction emptyPacket (packet, stream, opts) {\n  return stream.write(protocol.EMPTY[packet.cmd])\n}\n\nfunction disconnect (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 1 : 0\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(Buffer.from([protocol.codes.disconnect << 4]))\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // reason code in header\n  if (version === 5) {\n    stream.write(Buffer.from([reasonCode]))\n  }\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  return true\n}\n\nfunction auth (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 1 : 0\n\n  if (version !== 5) stream.emit('error', new Error('Invalid mqtt version for auth packet'))\n\n  // properies mqtt 5\n  const propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n  if (!propertiesData) { return false }\n  length += propertiesData.length\n\n  // Header\n  stream.write(Buffer.from([protocol.codes.auth << 4]))\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // reason code in header\n  stream.write(Buffer.from([reasonCode]))\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n  return true\n}\n\n/**\n * writeVarByteInt - write an MQTT style variable byte integer to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <Number> length - length (>0)\n * @returns <Number> number of bytes written\n *\n * @api private\n */\n\nconst varByteIntCache = {}\nfunction writeVarByteInt (stream, num) {\n  if (num > protocol.VARBYTEINT_MAX) {\n    stream.emit('error', new Error(`Invalid variable byte integer: ${num}`))\n    return false\n  }\n\n  let buffer = varByteIntCache[num]\n\n  if (!buffer) {\n    buffer = genBufVariableByteInt(num)\n    if (num < 16384) varByteIntCache[num] = buffer\n  }\n  debug('writeVarByteInt: writing to stream: %o', buffer)\n  return stream.write(buffer)\n}\n\n/**\n * writeString - write a utf8 string to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> string - string to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\n\nfunction writeString (stream, string) {\n  const strlen = Buffer.byteLength(string)\n  writeNumber(stream, strlen)\n\n  debug('writeString: %s', string)\n  return stream.write(string, 'utf8')\n}\n\n/**\n * writeStringPair - write a utf8 string pairs to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <String> name - string name to write\n * @param <String> value - string value to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\nfunction writeStringPair (stream, name, value) {\n  writeString(stream, name)\n  writeString(stream, value)\n}\n\n/**\n * writeNumber - write a two byte number to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> number - number to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\nfunction writeNumberCached (stream, number) {\n  debug('writeNumberCached: number: %d', number)\n  debug('writeNumberCached: %o', numCache[number])\n  return stream.write(numCache[number])\n}\nfunction writeNumberGenerated (stream, number) {\n  const generatedNumber = generateNumber(number)\n  debug('writeNumberGenerated: %o', generatedNumber)\n  return stream.write(generatedNumber)\n}\nfunction write4ByteNumber (stream, number) {\n  const generated4ByteBuffer = generate4ByteBuffer(number)\n  debug('write4ByteNumber: %o', generated4ByteBuffer)\n  return stream.write(generated4ByteBuffer)\n}\n/**\n * writeStringOrBuffer - write a String or Buffer with the its length prefix\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> toWrite - String or Buffer\n * @return <Number> number of bytes written\n */\nfunction writeStringOrBuffer (stream, toWrite) {\n  if (typeof toWrite === 'string') {\n    writeString(stream, toWrite)\n  } else if (toWrite) {\n    writeNumber(stream, toWrite.length)\n    stream.write(toWrite)\n  } else writeNumber(stream, 0)\n}\n\nfunction getProperties (stream, properties) {\n  /* connect properties */\n  if (typeof properties !== 'object' || properties.length != null) {\n    return {\n      length: 1,\n      write () {\n        writeProperties(stream, {}, 0)\n      }\n    }\n  }\n  let propertiesLength = 0\n  function getLengthProperty (name, value) {\n    const type = protocol.propertiesTypes[name]\n    let length = 0\n    switch (type) {\n      case 'byte': {\n        if (typeof value !== 'boolean') {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 1\n        break\n      }\n      case 'int8': {\n        if (typeof value !== 'number' || value < 0 || value > 0xff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 1\n        break\n      }\n      case 'binary': {\n        if (value && value === null) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + Buffer.byteLength(value) + 2\n        break\n      }\n      case 'int16': {\n        if (typeof value !== 'number' || value < 0 || value > 0xffff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 2\n        break\n      }\n      case 'int32': {\n        if (typeof value !== 'number' || value < 0 || value > 0xffffffff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 4\n        break\n      }\n      case 'var': {\n        // var byte integer is max 24 bits packed in 32 bits\n        if (typeof value !== 'number' || value < 0 || value > 0x0fffffff) {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + Buffer.byteLength(genBufVariableByteInt(value))\n        break\n      }\n      case 'string': {\n        if (typeof value !== 'string') {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 2 + Buffer.byteLength(value.toString())\n        break\n      }\n      case 'pair': {\n        if (typeof value !== 'object') {\n          stream.emit('error', new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += Object.getOwnPropertyNames(value).reduce((result, name) => {\n          const currentValue = value[name]\n          if (Array.isArray(currentValue)) {\n            result += currentValue.reduce((currentLength, value) => {\n              currentLength += 1 + 2 + Buffer.byteLength(name.toString()) + 2 + Buffer.byteLength(value.toString())\n              return currentLength\n            }, 0)\n          } else {\n            result += 1 + 2 + Buffer.byteLength(name.toString()) + 2 + Buffer.byteLength(value[name].toString())\n          }\n          return result\n        }, 0)\n        break\n      }\n      default: {\n        stream.emit('error', new Error(`Invalid property ${name}: ${value}`))\n        return false\n      }\n    }\n    return length\n  }\n  if (properties) {\n    for (const propName in properties) {\n      let propLength = 0\n      let propValueLength = 0\n      const propValue = properties[propName]\n      if (Array.isArray(propValue)) {\n        for (let valueIndex = 0; valueIndex < propValue.length; valueIndex++) {\n          propValueLength = getLengthProperty(propName, propValue[valueIndex])\n          if (!propValueLength) { return false }\n          propLength += propValueLength\n        }\n      } else {\n        propValueLength = getLengthProperty(propName, propValue)\n        if (!propValueLength) { return false }\n        propLength = propValueLength\n      }\n      if (!propLength) return false\n      propertiesLength += propLength\n    }\n  }\n  const propertiesLengthLength = Buffer.byteLength(genBufVariableByteInt(propertiesLength))\n\n  return {\n    length: propertiesLengthLength + propertiesLength,\n    write () {\n      writeProperties(stream, properties, propertiesLength)\n    }\n  }\n}\n\nfunction getPropertiesByMaximumPacketSize (stream, properties, opts, length) {\n  const mayEmptyProps = ['reasonString', 'userProperties']\n  const maximumPacketSize = opts && opts.properties && opts.properties.maximumPacketSize ? opts.properties.maximumPacketSize : 0\n\n  let propertiesData = getProperties(stream, properties)\n  if (maximumPacketSize) {\n    while (length + propertiesData.length > maximumPacketSize) {\n      const currentMayEmptyProp = mayEmptyProps.shift()\n      if (currentMayEmptyProp && properties[currentMayEmptyProp]) {\n        delete properties[currentMayEmptyProp]\n        propertiesData = getProperties(stream, properties)\n      } else {\n        return false\n      }\n    }\n  }\n  return propertiesData\n}\n\nfunction writeProperty (stream, propName, value) {\n  const type = protocol.propertiesTypes[propName]\n  switch (type) {\n    case 'byte': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      stream.write(Buffer.from([+value]))\n      break\n    }\n    case 'int8': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      stream.write(Buffer.from([value]))\n      break\n    }\n    case 'binary': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeStringOrBuffer(stream, value)\n      break\n    }\n    case 'int16': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeNumber(stream, value)\n      break\n    }\n    case 'int32': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      write4ByteNumber(stream, value)\n      break\n    }\n    case 'var': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeVarByteInt(stream, value)\n      break\n    }\n    case 'string': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeString(stream, value)\n      break\n    }\n    case 'pair': {\n      Object.getOwnPropertyNames(value).forEach(name => {\n        const currentValue = value[name]\n        if (Array.isArray(currentValue)) {\n          currentValue.forEach(value => {\n            stream.write(Buffer.from([protocol.properties[propName]]))\n            writeStringPair(stream, name.toString(), value.toString())\n          })\n        } else {\n          stream.write(Buffer.from([protocol.properties[propName]]))\n          writeStringPair(stream, name.toString(), currentValue.toString())\n        }\n      })\n      break\n    }\n    default: {\n      stream.emit('error', new Error(`Invalid property ${propName} value: ${value}`))\n      return false\n    }\n  }\n}\n\nfunction writeProperties (stream, properties, propertiesLength) {\n  /* write properties to stream */\n  writeVarByteInt(stream, propertiesLength)\n  for (const propName in properties) {\n    if (Object.prototype.hasOwnProperty.call(properties, propName) && properties[propName] !== null) {\n      const value = properties[propName]\n      if (Array.isArray(value)) {\n        for (let valueIndex = 0; valueIndex < value.length; valueIndex++) {\n          writeProperty(stream, propName, value[valueIndex])\n        }\n      } else {\n        writeProperty(stream, propName, value)\n      }\n    }\n  }\n}\n\nfunction byteLength (bufOrString) {\n  if (!bufOrString) return 0\n  else if (bufOrString instanceof Buffer) return bufOrString.length\n  else return Buffer.byteLength(bufOrString)\n}\n\nfunction isStringOrBuffer (field) {\n  return typeof field === 'string' || field instanceof Buffer\n}\n\nmodule.exports = generate\n","'use strict'\n\n/**\n * Module dependencies\n */\nconst EventEmitter = require('events').EventEmitter\nconst Store = require('./store')\nconst TopicAliasRecv = require('./topic-alias-recv')\nconst TopicAliasSend = require('./topic-alias-send')\nconst mqttPacket = require('mqtt-packet')\nconst DefaultMessageIdProvider = require('./default-message-id-provider')\nconst Writable = require('readable-stream').Writable\nconst inherits = require('inherits')\nconst reInterval = require('reinterval')\nconst clone = require('rfdc/default')\nconst validations = require('./validations')\nconst xtend = require('xtend')\nconst debug = require('debug')('mqttjs:client')\nconst nextTick = process ? process.nextTick : function (callback) { setTimeout(callback, 0) }\nconst setImmediate = global.setImmediate || function (callback) {\n  // works in node v0.8\n  nextTick(callback)\n}\nconst defaultConnectOptions = {\n  keepalive: 60,\n  reschedulePings: true,\n  protocolId: 'MQTT',\n  protocolVersion: 4,\n  reconnectPeriod: 1000,\n  connectTimeout: 30 * 1000,\n  clean: true,\n  resubscribe: true\n}\n\n\nconst errors = {\n  0: '',\n  1: 'Unacceptable protocol version',\n  2: 'Identifier rejected',\n  3: 'Server unavailable',\n  4: 'Bad username or password',\n  5: 'Not authorized',\n  16: 'No matching subscribers',\n  17: 'No subscription existed',\n  128: 'Unspecified error',\n  129: 'Malformed Packet',\n  130: 'Protocol Error',\n  131: 'Implementation specific error',\n  132: 'Unsupported Protocol Version',\n  133: 'Client Identifier not valid',\n  134: 'Bad User Name or Password',\n  135: 'Not authorized',\n  136: 'Server unavailable',\n  137: 'Server busy',\n  138: 'Banned',\n  139: 'Server shutting down',\n  140: 'Bad authentication method',\n  141: 'Keep Alive timeout',\n  142: 'Session taken over',\n  143: 'Topic Filter invalid',\n  144: 'Topic Name invalid',\n  145: 'Packet identifier in use',\n  146: 'Packet Identifier not found',\n  147: 'Receive Maximum exceeded',\n  148: 'Topic Alias invalid',\n  149: 'Packet too large',\n  150: 'Message rate too high',\n  151: 'Quota exceeded',\n  152: 'Administrative action',\n  153: 'Payload format invalid',\n  154: 'Retain not supported',\n  155: 'QoS not supported',\n  156: 'Use another server',\n  157: 'Server moved',\n  158: 'Shared Subscriptions not supported',\n  159: 'Connection rate exceeded',\n  160: 'Maximum connect time',\n  161: 'Subscription Identifiers not supported',\n  162: 'Wildcard Subscriptions not supported'\n}\n\nfunction defaultId () {\n  return 'mqttjs_' + Math.random().toString(16).substr(2, 8)\n}\n\nfunction applyTopicAlias (client, packet) {\n  if (client.options.protocolVersion === 5) {\n    if (packet.cmd === 'publish') {\n      let alias\n      if (packet.properties) {\n        alias = packet.properties.topicAlias\n      }\n      const topic = packet.topic.toString()\n      if (client.topicAliasSend) {\n        if (alias) {\n          if (topic.length !== 0) {\n            // register topic alias\n            debug('applyTopicAlias :: register topic: %s - alias: %d', topic, alias)\n            if (!client.topicAliasSend.put(topic, alias)) {\n              debug('applyTopicAlias :: error out of range. topic: %s - alias: %d', topic, alias)\n              return new Error('Sending Topic Alias out of range')\n            }\n          }\n        } else {\n          if (topic.length !== 0) {\n            if (client.options.autoAssignTopicAlias) {\n              alias = client.topicAliasSend.getAliasByTopic(topic)\n              if (alias) {\n                packet.topic = ''\n                packet.properties = { ...(packet.properties), topicAlias: alias }\n                debug('applyTopicAlias :: auto assign(use) topic: %s - alias: %d', topic, alias)\n              } else {\n                alias = client.topicAliasSend.getLruAlias()\n                client.topicAliasSend.put(topic, alias)\n                packet.properties = { ...(packet.properties), topicAlias: alias }\n                debug('applyTopicAlias :: auto assign topic: %s - alias: %d', topic, alias)\n              }\n            } else if (client.options.autoUseTopicAlias) {\n              alias = client.topicAliasSend.getAliasByTopic(topic)\n              if (alias) {\n                packet.topic = ''\n                packet.properties = { ...(packet.properties), topicAlias: alias }\n                debug('applyTopicAlias :: auto use topic: %s - alias: %d', topic, alias)\n              }\n            }\n          }\n        }\n      } else if (alias) {\n        debug('applyTopicAlias :: error out of range. topic: %s - alias: %d', topic, alias)\n        return new Error('Sending Topic Alias out of range')\n      }\n    }\n  }\n}\n\nfunction removeTopicAliasAndRecoverTopicName (client, packet) {\n  let alias\n  if (packet.properties) {\n    alias = packet.properties.topicAlias\n  }\n\n  let topic = packet.topic.toString()\n  if (topic.length === 0) {\n    // restore topic from alias\n    if (typeof alias === 'undefined') {\n      return new Error('Unregistered Topic Alias')\n    } else {\n      topic = client.topicAliasSend.getTopicByAlias(alias)\n      if (typeof topic === 'undefined') {\n        return new Error('Unregistered Topic Alias')\n      } else {\n        packet.topic = topic\n      }\n    }\n  }\n  if (alias) {\n    delete packet.properties.topicAlias\n  }\n}\n\nfunction sendPacket (client, packet, cb) {\n  debug('sendPacket :: packet: %O', packet)\n  debug('sendPacket :: emitting `packetsend`')\n\n  client.emit('packetsend', packet)\n\n  debug('sendPacket :: writing to stream')\n  const result = mqttPacket.writeToStream(packet, client.stream, client.options)\n  debug('sendPacket :: writeToStream result %s', result)\n  if (!result && cb && cb !== nop) {\n    debug('sendPacket :: handle events on `drain` once through callback.')\n    client.stream.once('drain', cb)\n  } else if (cb) {\n    debug('sendPacket :: invoking cb')\n    cb()\n  }\n}\n\nfunction flush (queue) {\n  if (queue) {\n    debug('flush: queue exists? %b', !!(queue))\n    Object.keys(queue).forEach(function (messageId) {\n      if (typeof queue[messageId].cb === 'function') {\n        queue[messageId].cb(new Error('Connection closed'))\n        // This is suspicious.  Why do we only delete this if we have a callbck?\n        // If this is by-design, then adding no as callback would cause this to get deleted unintentionally.\n        delete queue[messageId]\n      }\n    })\n  }\n}\n\nfunction flushVolatile (queue) {\n  if (queue) {\n    debug('flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function')\n    Object.keys(queue).forEach(function (messageId) {\n      if (queue[messageId].volatile && typeof queue[messageId].cb === 'function') {\n        queue[messageId].cb(new Error('Connection closed'))\n        delete queue[messageId]\n      }\n    })\n  }\n}\n\nfunction storeAndSend (client, packet, cb, cbStorePut) {\n  debug('storeAndSend :: store packet with cmd %s to outgoingStore', packet.cmd)\n  let storePacket = packet\n  let err\n  if (storePacket.cmd === 'publish') {\n    // The original packet is for sending.\n    // The cloned storePacket is for storing to resend on reconnect.\n    // Topic Alias must not be used after disconnected.\n    storePacket = clone(packet)\n    err = removeTopicAliasAndRecoverTopicName(client, storePacket)\n    if (err) {\n      return cb && cb(err)\n    }\n  }\n  client.outgoingStore.put(storePacket, function storedPacket (err) {\n    if (err) {\n      return cb && cb(err)\n    }\n    cbStorePut()\n    sendPacket(client, packet, cb)\n  })\n}\n\nfunction nop (error) {\n  debug('nop ::', error)\n}\n\n/**\n * MqttClient constructor\n *\n * @param {Stream} stream - stream\n * @param {Object} [options] - connection options\n * (see Connection#connect)\n */\nfunction MqttClient (streamBuilder, options) {\n  let k\n  const that = this\n\n  if (!(this instanceof MqttClient)) {\n    return new MqttClient(streamBuilder, options)\n  }\n\n  this.options = options || {}\n\n  // Defaults\n  for (k in defaultConnectOptions) {\n    if (typeof this.options[k] === 'undefined') {\n      this.options[k] = defaultConnectOptions[k]\n    } else {\n      this.options[k] = options[k]\n    }\n  }\n\n  debug('MqttClient :: options.protocol', options.protocol)\n  debug('MqttClient :: options.protocolVersion', options.protocolVersion)\n  debug('MqttClient :: options.username', options.username)\n  debug('MqttClient :: options.keepalive', options.keepalive)\n  debug('MqttClient :: options.reconnectPeriod', options.reconnectPeriod)\n  debug('MqttClient :: options.rejectUnauthorized', options.rejectUnauthorized)\n  debug('MqttClient :: options.topicAliasMaximum', options.topicAliasMaximum)\n\n  this.options.clientId = (typeof options.clientId === 'string') ? options.clientId : defaultId()\n\n  debug('MqttClient :: clientId', this.options.clientId)\n\n  this.options.customHandleAcks = (options.protocolVersion === 5 && options.customHandleAcks) ? options.customHandleAcks : function () { arguments[3](0) }\n\n  this.streamBuilder = streamBuilder\n\n  this.messageIdProvider = (typeof this.options.messageIdProvider === 'undefined') ? new DefaultMessageIdProvider() : this.options.messageIdProvider\n\n  // Inflight message storages\n  this.outgoingStore = options.outgoingStore || new Store()\n  this.incomingStore = options.incomingStore || new Store()\n\n  // Should QoS zero messages be queued when the connection is broken?\n  this.queueQoSZero = options.queueQoSZero === undefined ? true : options.queueQoSZero\n\n  // map of subscribed topics to support reconnection\n  this._resubscribeTopics = {}\n\n  // map of a subscribe messageId and a topic\n  this.messageIdToTopic = {}\n\n  // Ping timer, setup in _setupPingTimer\n  this.pingTimer = null\n  // Is the client connected?\n  this.connected = false\n  // Are we disconnecting?\n  this.disconnecting = false\n  // Packet queue\n  this.queue = []\n  // connack timer\n  this.connackTimer = null\n  // Reconnect timer\n  this.reconnectTimer = null\n  // Is processing store?\n  this._storeProcessing = false\n  // Packet Ids are put into the store during store processing\n  this._packetIdsDuringStoreProcessing = {}\n  // Store processing queue\n  this._storeProcessingQueue = []\n\n  // Inflight callbacks\n  this.outgoing = {}\n\n  // True if connection is first time.\n  this._firstConnection = true\n\n  if (options.topicAliasMaximum > 0) {\n    if (options.topicAliasMaximum > 0xffff) {\n      debug('MqttClient :: options.topicAliasMaximum is out of range')\n    } else {\n      this.topicAliasRecv = new TopicAliasRecv(options.topicAliasMaximum)\n    }\n  }\n\n  // Send queued packets\n  this.on('connect', function () {\n    const queue = this.queue\n\n    function deliver () {\n      const entry = queue.shift()\n      debug('deliver :: entry %o', entry)\n      let packet = null\n\n      if (!entry) {\n        that._resubscribe()\n        return\n      }\n\n      packet = entry.packet\n      debug('deliver :: call _sendPacket for %o', packet)\n      let send = true\n      if (packet.messageId && packet.messageId !== 0) {\n        if (!that.messageIdProvider.register(packet.messageId)) {\n          send = false\n        }\n      }\n      if (send) {\n        that._sendPacket(\n          packet,\n          function (err) {\n            if (entry.cb) {\n              entry.cb(err)\n            }\n            deliver()\n          }\n        )\n      } else {\n        debug('messageId: %d has already used. The message is skipped and removed.', packet.messageId)\n        deliver()\n      }\n    }\n\n    debug('connect :: sending queued packets')\n    deliver()\n  })\n\n  this.on('close', function () {\n    debug('close :: connected set to `false`')\n    this.connected = false\n\n    debug('close :: clearing connackTimer')\n    clearTimeout(this.connackTimer)\n\n    debug('close :: clearing ping timer')\n    if (that.pingTimer !== null) {\n      that.pingTimer.clear()\n      that.pingTimer = null\n    }\n\n    if (this.topicAliasRecv) {\n      this.topicAliasRecv.clear()\n    }\n\n    debug('close :: calling _setupReconnect')\n    this._setupReconnect()\n  })\n  EventEmitter.call(this)\n\n  debug('MqttClient :: setting up stream')\n  this._setupStream()\n}\ninherits(MqttClient, EventEmitter)\n\n/**\n * setup the event handlers in the inner stream.\n *\n * @api private\n */\nMqttClient.prototype._setupStream = function () {\n  const that = this\n  const writable = new Writable()\n  const parser = mqttPacket.parser(this.options)\n  let completeParse = null\n  const packets = []\n\n  debug('_setupStream :: calling method to clear reconnect')\n  this._clearReconnect()\n\n  debug('_setupStream :: using streamBuilder provided to client to create stream')\n  this.stream = this.streamBuilder(this)\n\n  parser.on('packet', function (packet) {\n    debug('parser :: on packet push to packets array.')\n    packets.push(packet)\n  })\n\n  function nextTickWork () {\n    if (packets.length) {\n      nextTick(work)\n    } else {\n      const done = completeParse\n      completeParse = null\n      done()\n    }\n  }\n\n  function work () {\n    debug('work :: getting next packet in queue')\n    const packet = packets.shift()\n\n    if (packet) {\n      debug('work :: packet pulled from queue')\n      that._handlePacket(packet, nextTickWork)\n    } else {\n      debug('work :: no packets in queue')\n      const done = completeParse\n      completeParse = null\n      debug('work :: done flag is %s', !!(done))\n      if (done) done()\n    }\n  }\n\n  writable._write = function (buf, enc, done) {\n    completeParse = done\n    debug('writable stream :: parsing buffer')\n    parser.parse(buf)\n    work()\n  }\n\n  function streamErrorHandler (error) {\n    debug('streamErrorHandler :: error', error.message)\n    // error.code will only be set on NodeJS env, browse don't allow to detect erros on sockets\n    // also emitting errors on browser seems to create issues \n    if (error.code) {\n      // handle error\n      debug('streamErrorHandler :: emitting error')\n      that.emit('error', error)\n    } else {\n      nop(error)\n    }\n  }\n\n  debug('_setupStream :: pipe stream to writable stream')\n  this.stream.pipe(writable)\n\n  // Suppress connection errors\n  this.stream.on('error', streamErrorHandler)\n\n  // Echo stream close\n  this.stream.on('close', function () {\n    debug('(%s)stream :: on close', that.options.clientId)\n    flushVolatile(that.outgoing)\n    debug('stream: emit close to MqttClient')\n    that.emit('close')\n  })\n\n  // Send a connect packet\n  debug('_setupStream: sending packet `connect`')\n  const connectPacket = Object.create(this.options)\n  connectPacket.cmd = 'connect'\n  if (this.topicAliasRecv) {\n    if (!connectPacket.properties) {\n      connectPacket.properties = {}\n    }\n    if (this.topicAliasRecv) {\n      connectPacket.properties.topicAliasMaximum = this.topicAliasRecv.max\n    }\n  }\n  // avoid message queue\n  sendPacket(this, connectPacket)\n\n  // Echo connection errors\n  parser.on('error', this.emit.bind(this, 'error'))\n\n  // auth\n  if (this.options.properties) {\n    if (!this.options.properties.authenticationMethod && this.options.properties.authenticationData) {\n      that.end(() =>\n        this.emit('error', new Error('Packet has no Authentication Method')\n        ))\n      return this\n    }\n    if (this.options.properties.authenticationMethod && this.options.authPacket && typeof this.options.authPacket === 'object') {\n      const authPacket = xtend({ cmd: 'auth', reasonCode: 0 }, this.options.authPacket)\n      sendPacket(this, authPacket)\n    }\n  }\n\n  // many drain listeners are needed for qos 1 callbacks if the connection is intermittent\n  this.stream.setMaxListeners(1000)\n\n  clearTimeout(this.connackTimer)\n  this.connackTimer = setTimeout(function () {\n    debug('!!connectTimeout hit!! Calling _cleanUp with force `true`')\n    that._cleanUp(true)\n  }, this.options.connectTimeout)\n}\n\nMqttClient.prototype._handlePacket = function (packet, done) {\n  const options = this.options\n\n  if (options.protocolVersion === 5 && options.properties && options.properties.maximumPacketSize && options.properties.maximumPacketSize < packet.length) {\n    this.emit('error', new Error('exceeding packets size ' + packet.cmd))\n    this.end({ reasonCode: 149, properties: { reasonString: 'Maximum packet size was exceeded' } })\n    return this\n  }\n  debug('_handlePacket :: emitting packetreceive')\n  this.emit('packetreceive', packet)\n\n  switch (packet.cmd) {\n    case 'publish':\n      this._handlePublish(packet, done)\n      break\n    case 'puback':\n    case 'pubrec':\n    case 'pubcomp':\n    case 'suback':\n    case 'unsuback':\n      this._handleAck(packet)\n      done()\n      break\n    case 'pubrel':\n      this._handlePubrel(packet, done)\n      break\n    case 'connack':\n      this._handleConnack(packet)\n      done()\n      break\n    case 'auth':\n      this._handleAuth(packet)\n      done()\n      break\n    case 'pingresp':\n      this._handlePingresp(packet)\n      done()\n      break\n    case 'disconnect':\n      this._handleDisconnect(packet)\n      done()\n      break\n    default:\n      // do nothing\n      // maybe we should do an error handling\n      // or just log it\n      break\n  }\n}\n\nMqttClient.prototype._checkDisconnecting = function (callback) {\n  if (this.disconnecting) {\n    if (callback && callback !== nop) {\n      callback(new Error('client disconnecting'))\n    } else {\n      this.emit('error', new Error('client disconnecting'))\n    }\n  }\n  return this.disconnecting\n}\n\n/**\n * publish - publish <message> to <topic>\n *\n * @param {String} topic - topic to publish to\n * @param {String, Buffer} message - message to publish\n * @param {Object} [opts] - publish options, includes:\n *    {Number} qos - qos level to publish on\n *    {Boolean} retain - whether or not to retain the message\n *    {Boolean} dup - whether or not mark a message as duplicate\n *    {Function} cbStorePut - function(){} called when message is put into `outgoingStore`\n * @param {Function} [callback] - function(err){}\n *    called when publish succeeds or fails\n * @returns {MqttClient} this - for chaining\n * @api public\n *\n * @example client.publish('topic', 'message');\n * @example\n *     client.publish('topic', 'message', {qos: 1, retain: true, dup: true});\n * @example client.publish('topic', 'message', console.log);\n */\nMqttClient.prototype.publish = function (topic, message, opts, callback) {\n  debug('publish :: message `%s` to topic `%s`', message, topic)\n  const options = this.options\n\n  // .publish(topic, payload, cb);\n  if (typeof opts === 'function') {\n    callback = opts\n    opts = null\n  }\n\n  // default opts\n  const defaultOpts = { qos: 0, retain: false, dup: false }\n  opts = xtend(defaultOpts, opts)\n\n  if (this._checkDisconnecting(callback)) {\n    return this\n  }\n\n  const that = this\n  const publishProc = function () {\n    let messageId = 0\n    if (opts.qos === 1 || opts.qos === 2) {\n      messageId = that._nextId()\n      if (messageId === null) {\n        debug('No messageId left')\n        return false\n      }\n    }\n    const packet = {\n      cmd: 'publish',\n      topic: topic,\n      payload: message,\n      qos: opts.qos,\n      retain: opts.retain,\n      messageId: messageId,\n      dup: opts.dup\n    }\n\n    if (options.protocolVersion === 5) {\n      packet.properties = opts.properties\n    }\n\n    debug('publish :: qos', opts.qos)\n    switch (opts.qos) {\n      case 1:\n      case 2:\n        // Add to callbacks\n        that.outgoing[packet.messageId] = {\n          volatile: false,\n          cb: callback || nop\n        }\n        debug('MqttClient:publish: packet cmd: %s', packet.cmd)\n        that._sendPacket(packet, undefined, opts.cbStorePut)\n        break\n      default:\n        debug('MqttClient:publish: packet cmd: %s', packet.cmd)\n        that._sendPacket(packet, callback, opts.cbStorePut)\n        break\n    }\n    return true\n  }\n\n  if (this._storeProcessing || this._storeProcessingQueue.length > 0 || !publishProc()) {\n    this._storeProcessingQueue.push(\n      {\n        invoke: publishProc,\n        cbStorePut: opts.cbStorePut,\n        callback: callback\n      }\n    )\n  }\n  return this\n}\n\n/**\n * subscribe - subscribe to <topic>\n *\n * @param {String, Array, Object} topic - topic(s) to subscribe to, supports objects in the form {'topic': qos}\n * @param {Object} [opts] - optional subscription options, includes:\n *    {Number} qos - subscribe qos level\n * @param {Function} [callback] - function(err, granted){} where:\n *    {Error} err - subscription error (none at the moment!)\n *    {Array} granted - array of {topic: 't', qos: 0}\n * @returns {MqttClient} this - for chaining\n * @api public\n * @example client.subscribe('topic');\n * @example client.subscribe('topic', {qos: 1});\n * @example client.subscribe({'topic': {qos: 0}, 'topic2': {qos: 1}}, console.log);\n * @example client.subscribe('topic', console.log);\n */\nMqttClient.prototype.subscribe = function () {\n  const that = this\n  const args = new Array(arguments.length)\n  for (let i = 0; i < arguments.length; i++) {\n    args[i] = arguments[i]\n  }\n  const subs = []\n  let obj = args.shift()\n  const resubscribe = obj.resubscribe\n  let callback = args.pop() || nop\n  let opts = args.pop()\n  const version = this.options.protocolVersion\n\n  delete obj.resubscribe\n\n  if (typeof obj === 'string') {\n    obj = [obj]\n  }\n\n  if (typeof callback !== 'function') {\n    opts = callback\n    callback = nop\n  }\n\n  const invalidTopic = validations.validateTopics(obj)\n  if (invalidTopic !== null) {\n    setImmediate(callback, new Error('Invalid topic ' + invalidTopic))\n    return this\n  }\n\n  if (this._checkDisconnecting(callback)) {\n    debug('subscribe: discconecting true')\n    return this\n  }\n\n  const defaultOpts = {\n    qos: 0\n  }\n  if (version === 5) {\n    defaultOpts.nl = false\n    defaultOpts.rap = false\n    defaultOpts.rh = 0\n  }\n  opts = xtend(defaultOpts, opts)\n\n  if (Array.isArray(obj)) {\n    obj.forEach(function (topic) {\n      debug('subscribe: array topic %s', topic)\n      if (!Object.prototype.hasOwnProperty.call(that._resubscribeTopics, topic) ||\n        that._resubscribeTopics[topic].qos < opts.qos ||\n          resubscribe) {\n        const currentOpts = {\n          topic: topic,\n          qos: opts.qos\n        }\n        if (version === 5) {\n          currentOpts.nl = opts.nl\n          currentOpts.rap = opts.rap\n          currentOpts.rh = opts.rh\n          currentOpts.properties = opts.properties\n        }\n        debug('subscribe: pushing topic `%s` and qos `%s` to subs list', currentOpts.topic, currentOpts.qos)\n        subs.push(currentOpts)\n      }\n    })\n  } else {\n    Object\n      .keys(obj)\n      .forEach(function (k) {\n        debug('subscribe: object topic %s', k)\n        if (!Object.prototype.hasOwnProperty.call(that._resubscribeTopics, k) ||\n          that._resubscribeTopics[k].qos < obj[k].qos ||\n            resubscribe) {\n          const currentOpts = {\n            topic: k,\n            qos: obj[k].qos\n          }\n          if (version === 5) {\n            currentOpts.nl = obj[k].nl\n            currentOpts.rap = obj[k].rap\n            currentOpts.rh = obj[k].rh\n            currentOpts.properties = opts.properties\n          }\n          debug('subscribe: pushing `%s` to subs list', currentOpts)\n          subs.push(currentOpts)\n        }\n      })\n  }\n\n  if (!subs.length) {\n    callback(null, [])\n    return this\n  }\n\n  const subscribeProc = function () {\n    const messageId = that._nextId()\n    if (messageId === null) {\n      debug('No messageId left')\n      return false\n    }\n\n    const packet = {\n      cmd: 'subscribe',\n      subscriptions: subs,\n      qos: 1,\n      retain: false,\n      dup: false,\n      messageId: messageId\n    }\n\n    if (opts.properties) {\n      packet.properties = opts.properties\n    }\n\n    // subscriptions to resubscribe to in case of disconnect\n    if (that.options.resubscribe) {\n      debug('subscribe :: resubscribe true')\n      const topics = []\n      subs.forEach(function (sub) {\n        if (that.options.reconnectPeriod > 0) {\n          const topic = { qos: sub.qos }\n          if (version === 5) {\n            topic.nl = sub.nl || false\n            topic.rap = sub.rap || false\n            topic.rh = sub.rh || 0\n            topic.properties = sub.properties\n          }\n          that._resubscribeTopics[sub.topic] = topic\n          topics.push(sub.topic)\n        }\n      })\n      that.messageIdToTopic[packet.messageId] = topics\n    }\n\n    that.outgoing[packet.messageId] = {\n      volatile: true,\n      cb: function (err, packet) {\n        if (!err) {\n          const granted = packet.granted\n          for (let i = 0; i < granted.length; i += 1) {\n            subs[i].qos = granted[i]\n          }\n        }\n\n        callback(err, subs)\n      }\n    }\n    debug('subscribe :: call _sendPacket')\n    that._sendPacket(packet)\n    return true\n  }\n\n  if (this._storeProcessing || this._storeProcessingQueue.length > 0 || !subscribeProc()) {\n    this._storeProcessingQueue.push(\n      {\n        invoke: subscribeProc,\n        callback: callback\n      }\n    )\n  }\n\n  return this\n}\n\n/**\n * unsubscribe - unsubscribe from topic(s)\n *\n * @param {String, Array} topic - topics to unsubscribe from\n * @param {Object} [opts] - optional subscription options, includes:\n *    {Object} properties - properties of unsubscribe packet\n * @param {Function} [callback] - callback fired on unsuback\n * @returns {MqttClient} this - for chaining\n * @api public\n * @example client.unsubscribe('topic');\n * @example client.unsubscribe('topic', console.log);\n */\nMqttClient.prototype.unsubscribe = function () {\n  const that = this\n  const args = new Array(arguments.length)\n  for (let i = 0; i < arguments.length; i++) {\n    args[i] = arguments[i]\n  }\n  let topic = args.shift()\n  let callback = args.pop() || nop\n  let opts = args.pop()\n  if (typeof topic === 'string') {\n    topic = [topic]\n  }\n\n  if (typeof callback !== 'function') {\n    opts = callback\n    callback = nop\n  }\n\n  const invalidTopic = validations.validateTopics(topic)\n  if (invalidTopic !== null) {\n    setImmediate(callback, new Error('Invalid topic ' + invalidTopic))\n    return this\n  }\n\n  if (that._checkDisconnecting(callback)) {\n    return this\n  }\n\n  const unsubscribeProc = function () {\n    const messageId = that._nextId()\n    if (messageId === null) {\n      debug('No messageId left')\n      return false\n    }\n    const packet = {\n      cmd: 'unsubscribe',\n      qos: 1,\n      messageId: messageId\n    }\n\n    if (typeof topic === 'string') {\n      packet.unsubscriptions = [topic]\n    } else if (Array.isArray(topic)) {\n      packet.unsubscriptions = topic\n    }\n\n    if (that.options.resubscribe) {\n      packet.unsubscriptions.forEach(function (topic) {\n        delete that._resubscribeTopics[topic]\n      })\n    }\n\n    if (typeof opts === 'object' && opts.properties) {\n      packet.properties = opts.properties\n    }\n\n    that.outgoing[packet.messageId] = {\n      volatile: true,\n      cb: callback\n    }\n\n    debug('unsubscribe: call _sendPacket')\n    that._sendPacket(packet)\n\n    return true\n  }\n\n  if (this._storeProcessing || this._storeProcessingQueue.length > 0 || !unsubscribeProc()) {\n    this._storeProcessingQueue.push(\n      {\n        invoke: unsubscribeProc,\n        callback: callback\n      }\n    )\n  }\n\n  return this\n}\n\n/**\n * end - close connection\n *\n * @returns {MqttClient} this - for chaining\n * @param {Boolean} force - do not wait for all in-flight messages to be acked\n * @param {Object} opts - added to the disconnect packet\n * @param {Function} cb - called when the client has been closed\n *\n * @api public\n */\nMqttClient.prototype.end = function (force, opts, cb) {\n  const that = this\n\n  debug('end :: (%s)', this.options.clientId)\n\n  if (force == null || typeof force !== 'boolean') {\n    cb = opts || nop\n    opts = force\n    force = false\n    if (typeof opts !== 'object') {\n      cb = opts\n      opts = null\n      if (typeof cb !== 'function') {\n        cb = nop\n      }\n    }\n  }\n\n  if (typeof opts !== 'object') {\n    cb = opts\n    opts = null\n  }\n\n  debug('end :: cb? %s', !!cb)\n  cb = cb || nop\n\n  function closeStores () {\n    debug('end :: closeStores: closing incoming and outgoing stores')\n    that.disconnected = true\n    that.incomingStore.close(function (e1) {\n      that.outgoingStore.close(function (e2) {\n        debug('end :: closeStores: emitting end')\n        that.emit('end')\n        if (cb) {\n          const err = e1 || e2\n          debug('end :: closeStores: invoking callback with args')\n          cb(err)\n        }\n      })\n    })\n    if (that._deferredReconnect) {\n      that._deferredReconnect()\n    }\n  }\n\n  function finish () {\n    // defer closesStores of an I/O cycle,\n    // just to make sure things are\n    // ok for websockets\n    debug('end :: (%s) :: finish :: calling _cleanUp with force %s', that.options.clientId, force)\n    that._cleanUp(force, () => {\n      debug('end :: finish :: calling process.nextTick on closeStores')\n      // const boundProcess = nextTick.bind(null, closeStores)\n      nextTick(closeStores.bind(that))\n    }, opts)\n  }\n\n  if (this.disconnecting) {\n    cb()\n    return this\n  }\n\n  this._clearReconnect()\n\n  this.disconnecting = true\n\n  if (!force && Object.keys(this.outgoing).length > 0) {\n    // wait 10ms, just to be sure we received all of it\n    debug('end :: (%s) :: calling finish in 10ms once outgoing is empty', that.options.clientId)\n    this.once('outgoingEmpty', setTimeout.bind(null, finish, 10))\n  } else {\n    debug('end :: (%s) :: immediately calling finish', that.options.clientId)\n    finish()\n  }\n\n  return this\n}\n\n/**\n * removeOutgoingMessage - remove a message in outgoing store\n * the outgoing callback will be called withe Error('Message removed') if the message is removed\n *\n * @param {Number} messageId - messageId to remove message\n * @returns {MqttClient} this - for chaining\n * @api public\n *\n * @example client.removeOutgoingMessage(client.getLastAllocated());\n */\nMqttClient.prototype.removeOutgoingMessage = function (messageId) {\n  const cb = this.outgoing[messageId] ? this.outgoing[messageId].cb : null\n  delete this.outgoing[messageId]\n  this.outgoingStore.del({ messageId: messageId }, function () {\n    cb(new Error('Message removed'))\n  })\n  return this\n}\n\n/**\n * reconnect - connect again using the same options as connect()\n *\n * @param {Object} [opts] - optional reconnect options, includes:\n *    {Store} incomingStore - a store for the incoming packets\n *    {Store} outgoingStore - a store for the outgoing packets\n *    if opts is not given, current stores are used\n * @returns {MqttClient} this - for chaining\n *\n * @api public\n */\nMqttClient.prototype.reconnect = function (opts) {\n  debug('client reconnect')\n  const that = this\n  const f = function () {\n    if (opts) {\n      that.options.incomingStore = opts.incomingStore\n      that.options.outgoingStore = opts.outgoingStore\n    } else {\n      that.options.incomingStore = null\n      that.options.outgoingStore = null\n    }\n    that.incomingStore = that.options.incomingStore || new Store()\n    that.outgoingStore = that.options.outgoingStore || new Store()\n    that.disconnecting = false\n    that.disconnected = false\n    that._deferredReconnect = null\n    that._reconnect()\n  }\n\n  if (this.disconnecting && !this.disconnected) {\n    this._deferredReconnect = f\n  } else {\n    f()\n  }\n  return this\n}\n\n/**\n * _reconnect - implement reconnection\n * @api privateish\n */\nMqttClient.prototype._reconnect = function () {\n  debug('_reconnect: emitting reconnect to client')\n  this.emit('reconnect')\n  if (this.connected) {\n    this.end(() => { this._setupStream() })\n    debug('client already connected. disconnecting first.')\n  } else {\n    debug('_reconnect: calling _setupStream')\n    this._setupStream()\n  }\n}\n\n/**\n * _setupReconnect - setup reconnect timer\n */\nMqttClient.prototype._setupReconnect = function () {\n  const that = this\n\n  if (!that.disconnecting && !that.reconnectTimer && (that.options.reconnectPeriod > 0)) {\n    if (!this.reconnecting) {\n      debug('_setupReconnect :: emit `offline` state')\n      this.emit('offline')\n      debug('_setupReconnect :: set `reconnecting` to `true`')\n      this.reconnecting = true\n    }\n    debug('_setupReconnect :: setting reconnectTimer for %d ms', that.options.reconnectPeriod)\n    that.reconnectTimer = setInterval(function () {\n      debug('reconnectTimer :: reconnect triggered!')\n      that._reconnect()\n    }, that.options.reconnectPeriod)\n  } else {\n    debug('_setupReconnect :: doing nothing...')\n  }\n}\n\n/**\n * _clearReconnect - clear the reconnect timer\n */\nMqttClient.prototype._clearReconnect = function () {\n  debug('_clearReconnect : clearing reconnect timer')\n  if (this.reconnectTimer) {\n    clearInterval(this.reconnectTimer)\n    this.reconnectTimer = null\n  }\n}\n\n/**\n * _cleanUp - clean up on connection end\n * @api private\n */\nMqttClient.prototype._cleanUp = function (forced, done) {\n  const opts = arguments[2]\n  if (done) {\n    debug('_cleanUp :: done callback provided for on stream close')\n    this.stream.on('close', done)\n  }\n\n  debug('_cleanUp :: forced? %s', forced)\n  if (forced) {\n    if ((this.options.reconnectPeriod === 0) && this.options.clean) {\n      flush(this.outgoing)\n    }\n    debug('_cleanUp :: (%s) :: destroying stream', this.options.clientId)\n    this.stream.destroy()\n  } else {\n    const packet = xtend({ cmd: 'disconnect' }, opts)\n    debug('_cleanUp :: (%s) :: call _sendPacket with disconnect packet', this.options.clientId)\n    this._sendPacket(\n      packet,\n      setImmediate.bind(\n        null,\n        this.stream.end.bind(this.stream)\n      )\n    )\n  }\n\n  if (!this.disconnecting) {\n    debug('_cleanUp :: client not disconnecting. Clearing and resetting reconnect.')\n    this._clearReconnect()\n    this._setupReconnect()\n  }\n\n  if (this.pingTimer !== null) {\n    debug('_cleanUp :: clearing pingTimer')\n    this.pingTimer.clear()\n    this.pingTimer = null\n  }\n\n  if (done && !this.connected) {\n    debug('_cleanUp :: (%s) :: removing stream `done` callback `close` listener', this.options.clientId)\n    this.stream.removeListener('close', done)\n    done()\n  }\n}\n\n/**\n * _sendPacket - send or queue a packet\n * @param {Object} packet - packet options\n * @param {Function} cb - callback when the packet is sent\n * @param {Function} cbStorePut - called when message is put into outgoingStore\n * @api private\n */\nMqttClient.prototype._sendPacket = function (packet, cb, cbStorePut) {\n  debug('_sendPacket :: (%s) ::  start', this.options.clientId)\n  cbStorePut = cbStorePut || nop\n  cb = cb || nop\n\n  const err = applyTopicAlias(this, packet)\n  if (err) {\n    cb(err)\n    return\n  }\n\n  if (!this.connected) {\n    // allow auth packets to be sent while authenticating with the broker (mqtt5 enhanced auth)\n    if (packet.cmd === 'auth') {\n      this._shiftPingInterval()\n      sendPacket(this, packet, cb)\n      return\n    }\n\n    debug('_sendPacket :: client not connected. Storing packet offline.')\n    this._storePacket(packet, cb, cbStorePut)\n    return\n  }\n\n  // When sending a packet, reschedule the ping timer\n  this._shiftPingInterval()\n\n  switch (packet.cmd) {\n    case 'publish':\n      break\n    case 'pubrel':\n      storeAndSend(this, packet, cb, cbStorePut)\n      return\n    default:\n      sendPacket(this, packet, cb)\n      return\n  }\n\n  switch (packet.qos) {\n    case 2:\n    case 1:\n      storeAndSend(this, packet, cb, cbStorePut)\n      break\n    /**\n     * no need of case here since it will be caught by default\n     * and jshint comply that before default it must be a break\n     * anyway it will result in -1 evaluation\n     */\n    case 0:\n      /* falls through */\n    default:\n      sendPacket(this, packet, cb)\n      break\n  }\n  debug('_sendPacket :: (%s) ::  end', this.options.clientId)\n}\n\n/**\n * _storePacket - queue a packet\n * @param {Object} packet - packet options\n * @param {Function} cb - callback when the packet is sent\n * @param {Function} cbStorePut - called when message is put into outgoingStore\n * @api private\n */\nMqttClient.prototype._storePacket = function (packet, cb, cbStorePut) {\n  debug('_storePacket :: packet: %o', packet)\n  debug('_storePacket :: cb? %s', !!cb)\n  cbStorePut = cbStorePut || nop\n\n  let storePacket = packet\n  if (storePacket.cmd === 'publish') {\n    // The original packet is for sending.\n    // The cloned storePacket is for storing to resend on reconnect.\n    // Topic Alias must not be used after disconnected.\n    storePacket = clone(packet)\n    const err = removeTopicAliasAndRecoverTopicName(this, storePacket)\n    if (err) {\n      return cb && cb(err)\n    }\n  }\n  // check that the packet is not a qos of 0, or that the command is not a publish\n  if (((storePacket.qos || 0) === 0 && this.queueQoSZero) || storePacket.cmd !== 'publish') {\n    this.queue.push({ packet: storePacket, cb: cb })\n  } else if (storePacket.qos > 0) {\n    cb = this.outgoing[storePacket.messageId] ? this.outgoing[storePacket.messageId].cb : null\n    this.outgoingStore.put(storePacket, function (err) {\n      if (err) {\n        return cb && cb(err)\n      }\n      cbStorePut()\n    })\n  } else if (cb) {\n    cb(new Error('No connection to broker'))\n  }\n}\n\n/**\n * _setupPingTimer - setup the ping timer\n *\n * @api private\n */\nMqttClient.prototype._setupPingTimer = function () {\n  debug('_setupPingTimer :: keepalive %d (seconds)', this.options.keepalive)\n  const that = this\n\n  if (!this.pingTimer && this.options.keepalive) {\n    this.pingResp = true\n    this.pingTimer = reInterval(function () {\n      that._checkPing()\n    }, this.options.keepalive * 1000)\n  }\n}\n\n/**\n * _shiftPingInterval - reschedule the ping interval\n *\n * @api private\n */\nMqttClient.prototype._shiftPingInterval = function () {\n  if (this.pingTimer && this.options.keepalive && this.options.reschedulePings) {\n    this.pingTimer.reschedule(this.options.keepalive * 1000)\n  }\n}\n/**\n * _checkPing - check if a pingresp has come back, and ping the server again\n *\n * @api private\n */\nMqttClient.prototype._checkPing = function () {\n  debug('_checkPing :: checking ping...')\n  if (this.pingResp) {\n    debug('_checkPing :: ping response received. Clearing flag and sending `pingreq`')\n    this.pingResp = false\n    this._sendPacket({ cmd: 'pingreq' })\n  } else {\n    // do a forced cleanup since socket will be in bad shape\n    debug('_checkPing :: calling _cleanUp with force true')\n    this._cleanUp(true)\n  }\n}\n\n/**\n * _handlePingresp - handle a pingresp\n *\n * @api private\n */\nMqttClient.prototype._handlePingresp = function () {\n  this.pingResp = true\n}\n\n/**\n * _handleConnack\n *\n * @param {Object} packet\n * @api private\n */\nMqttClient.prototype._handleConnack = function (packet) {\n  debug('_handleConnack')\n  const options = this.options\n  const version = options.protocolVersion\n  const rc = version === 5 ? packet.reasonCode : packet.returnCode\n\n  clearTimeout(this.connackTimer)\n  delete this.topicAliasSend\n\n  if (packet.properties) {\n    if (packet.properties.topicAliasMaximum) {\n      if (packet.properties.topicAliasMaximum > 0xffff) {\n        this.emit('error', new Error('topicAliasMaximum from broker is out of range'))\n        return\n      }\n      if (packet.properties.topicAliasMaximum > 0) {\n        this.topicAliasSend = new TopicAliasSend(packet.properties.topicAliasMaximum)\n      }\n    }\n    if (packet.properties.serverKeepAlive && options.keepalive) {\n      options.keepalive = packet.properties.serverKeepAlive\n      this._shiftPingInterval()\n    }\n    if (packet.properties.maximumPacketSize) {\n      if (!options.properties) { options.properties = {} }\n      options.properties.maximumPacketSize = packet.properties.maximumPacketSize\n    }\n  }\n\n  if (rc === 0) {\n    this.reconnecting = false\n    this._onConnect(packet)\n  } else if (rc > 0) {\n    const err = new Error('Connection refused: ' + errors[rc])\n    err.code = rc\n    this.emit('error', err)\n  }\n}\n\nMqttClient.prototype._handleAuth = function (packet) {\n  const options = this.options\n  const version = options.protocolVersion\n  const rc = version === 5 ? packet.reasonCode : packet.returnCode\n\n  if (version !== 5) {\n    const err = new Error('Protocol error: Auth packets are only supported in MQTT 5. Your version:' + version)\n    err.code = rc\n    this.emit('error', err)\n    return\n  }\n\n  const that = this\n  this.handleAuth(packet, function (err, packet) {\n    if (err) {\n      that.emit('error', err)\n      return\n    }\n\n    if (rc === 24) {\n      that.reconnecting = false\n      that._sendPacket(packet)\n    } else {\n      const error = new Error('Connection refused: ' + errors[rc])\n      err.code = rc\n      that.emit('error', error)\n    }\n  })\n}\n\n/**\n * @param packet the packet received by the broker\n * @return the auth packet to be returned to the broker\n * @api public\n */\nMqttClient.prototype.handleAuth = function (packet, callback) {\n  callback()\n}\n\n/**\n * _handlePublish\n *\n * @param {Object} packet\n * @api private\n */\n/*\nthose late 2 case should be rewrite to comply with coding style:\n\ncase 1:\ncase 0:\n  // do not wait sending a puback\n  // no callback passed\n  if (1 === qos) {\n    this._sendPacket({\n      cmd: 'puback',\n      messageId: messageId\n    });\n  }\n  // emit the message event for both qos 1 and 0\n  this.emit('message', topic, message, packet);\n  this.handleMessage(packet, done);\n  break;\ndefault:\n  // do nothing but every switch mus have a default\n  // log or throw an error about unknown qos\n  break;\n\nfor now i just suppressed the warnings\n*/\nMqttClient.prototype._handlePublish = function (packet, done) {\n  debug('_handlePublish: packet %o', packet)\n  done = typeof done !== 'undefined' ? done : nop\n  let topic = packet.topic.toString()\n  const message = packet.payload\n  const qos = packet.qos\n  const messageId = packet.messageId\n  const that = this\n  const options = this.options\n  const validReasonCodes = [0, 16, 128, 131, 135, 144, 145, 151, 153]\n  if (this.options.protocolVersion === 5) {\n    let alias\n    if (packet.properties) {\n      alias = packet.properties.topicAlias\n    }\n    if (typeof alias !== 'undefined') {\n      if (topic.length === 0) {\n        if (alias > 0 && alias <= 0xffff) {\n          const gotTopic = this.topicAliasRecv.getTopicByAlias(alias)\n          if (gotTopic) {\n            topic = gotTopic\n            debug('_handlePublish :: topic complemented by alias. topic: %s - alias: %d', topic, alias)\n          } else {\n            debug('_handlePublish :: unregistered topic alias. alias: %d', alias)\n            this.emit('error', new Error('Received unregistered Topic Alias'))\n            return\n          }\n        } else {\n          debug('_handlePublish :: topic alias out of range. alias: %d', alias)\n          this.emit('error', new Error('Received Topic Alias is out of range'))\n          return\n        }\n      } else {\n        if (this.topicAliasRecv.put(topic, alias)) {\n          debug('_handlePublish :: registered topic: %s - alias: %d', topic, alias)\n        } else {\n          debug('_handlePublish :: topic alias out of range. alias: %d', alias)\n          this.emit('error', new Error('Received Topic Alias is out of range'))\n          return\n        }\n      }\n    }\n  }\n  debug('_handlePublish: qos %d', qos)\n  switch (qos) {\n    case 2: {\n      options.customHandleAcks(topic, message, packet, function (error, code) {\n        if (!(error instanceof Error)) {\n          code = error\n          error = null\n        }\n        if (error) { return that.emit('error', error) }\n        if (validReasonCodes.indexOf(code) === -1) { return that.emit('error', new Error('Wrong reason code for pubrec')) }\n        if (code) {\n          that._sendPacket({ cmd: 'pubrec', messageId: messageId, reasonCode: code }, done)\n        } else {\n          that.incomingStore.put(packet, function () {\n            that._sendPacket({ cmd: 'pubrec', messageId: messageId }, done)\n          })\n        }\n      })\n      break\n    }\n    case 1: {\n      // emit the message event\n      options.customHandleAcks(topic, message, packet, function (error, code) {\n        if (!(error instanceof Error)) {\n          code = error\n          error = null\n        }\n        if (error) { return that.emit('error', error) }\n        if (validReasonCodes.indexOf(code) === -1) { return that.emit('error', new Error('Wrong reason code for puback')) }\n        if (!code) { that.emit('message', topic, message, packet) }\n        that.handleMessage(packet, function (err) {\n          if (err) {\n            return done && done(err)\n          }\n          that._sendPacket({ cmd: 'puback', messageId: messageId, reasonCode: code }, done)\n        })\n      })\n      break\n    }\n    case 0:\n      // emit the message event\n      this.emit('message', topic, message, packet)\n      this.handleMessage(packet, done)\n      break\n    default:\n      // do nothing\n      debug('_handlePublish: unknown QoS. Doing nothing.')\n      // log or throw an error about unknown qos\n      break\n  }\n}\n\n/**\n * Handle messages with backpressure support, one at a time.\n * Override at will.\n *\n * @param Packet packet the packet\n * @param Function callback call when finished\n * @api public\n */\nMqttClient.prototype.handleMessage = function (packet, callback) {\n  callback()\n}\n\n/**\n * _handleAck\n *\n * @param {Object} packet\n * @api private\n */\n\nMqttClient.prototype._handleAck = function (packet) {\n  /* eslint no-fallthrough: \"off\" */\n  const messageId = packet.messageId\n  const type = packet.cmd\n  let response = null\n  const cb = this.outgoing[messageId] ? this.outgoing[messageId].cb : null\n  const that = this\n  let err\n\n  // Checking `!cb` happens to work, but it's not technically \"correct\".\n  //\n  // Why? This code assumes that \"no callback\" is the same as that \"we're not\n  // waiting for responses\" (puback, pubrec, pubcomp, suback, or unsuback).\n  //\n  // It would be better to check `if (!this.outgoing[messageId])` here, but\n  // there's no reason to change it and risk (another) regression.\n  //\n  // The only reason this code works is becaues code in MqttClient.publish,\n  // MqttClinet.subscribe, and MqttClient.unsubscribe ensures that we will\n  // have a callback even if the user doesn't pass one in.)\n  if (!cb) {\n    debug('_handleAck :: Server sent an ack in error. Ignoring.')\n    // Server sent an ack in error, ignore it.\n    return\n  }\n\n  // Process\n  debug('_handleAck :: packet type', type)\n  switch (type) {\n    case 'pubcomp':\n      // same thing as puback for QoS 2\n    case 'puback': {\n      const pubackRC = packet.reasonCode\n      // Callback - we're done\n      if (pubackRC && pubackRC > 0 && pubackRC !== 16) {\n        err = new Error('Publish error: ' + errors[pubackRC])\n        err.code = pubackRC\n        cb(err, packet)\n      }\n      delete this.outgoing[messageId]\n      this.outgoingStore.del(packet, cb)\n      this.messageIdProvider.deallocate(messageId)\n      this._invokeStoreProcessingQueue()\n      break\n    }\n    case 'pubrec': {\n      response = {\n        cmd: 'pubrel',\n        qos: 2,\n        messageId: messageId\n      }\n      const pubrecRC = packet.reasonCode\n\n      if (pubrecRC && pubrecRC > 0 && pubrecRC !== 16) {\n        err = new Error('Publish error: ' + errors[pubrecRC])\n        err.code = pubrecRC\n        cb(err, packet)\n      } else {\n        this._sendPacket(response)\n      }\n      break\n    }\n    case 'suback': {\n      delete this.outgoing[messageId]\n      this.messageIdProvider.deallocate(messageId)\n      for (let grantedI = 0; grantedI < packet.granted.length; grantedI++) {\n        if ((packet.granted[grantedI] & 0x80) !== 0) {\n          // suback with Failure status\n          const topics = this.messageIdToTopic[messageId]\n          if (topics) {\n            topics.forEach(function (topic) {\n              delete that._resubscribeTopics[topic]\n            })\n          }\n        }\n      }\n      this._invokeStoreProcessingQueue()\n      cb(null, packet)\n      break\n    }\n    case 'unsuback': {\n      delete this.outgoing[messageId]\n      this.messageIdProvider.deallocate(messageId)\n      this._invokeStoreProcessingQueue()\n      cb(null)\n      break\n    }\n    default:\n      that.emit('error', new Error('unrecognized packet type'))\n  }\n\n  if (this.disconnecting &&\n      Object.keys(this.outgoing).length === 0) {\n    this.emit('outgoingEmpty')\n  }\n}\n\n/**\n * _handlePubrel\n *\n * @param {Object} packet\n * @api private\n */\nMqttClient.prototype._handlePubrel = function (packet, callback) {\n  debug('handling pubrel packet')\n  callback = typeof callback !== 'undefined' ? callback : nop\n  const messageId = packet.messageId\n  const that = this\n\n  const comp = { cmd: 'pubcomp', messageId: messageId }\n\n  that.incomingStore.get(packet, function (err, pub) {\n    if (!err) {\n      that.emit('message', pub.topic, pub.payload, pub)\n      that.handleMessage(pub, function (err) {\n        if (err) {\n          return callback(err)\n        }\n        that.incomingStore.del(pub, nop)\n        that._sendPacket(comp, callback)\n      })\n    } else {\n      that._sendPacket(comp, callback)\n    }\n  })\n}\n\n/**\n * _handleDisconnect\n *\n * @param {Object} packet\n * @api private\n */\nMqttClient.prototype._handleDisconnect = function (packet) {\n  this.emit('disconnect', packet)\n}\n\n/**\n * _nextId\n * @return unsigned int\n */\nMqttClient.prototype._nextId = function () {\n  return this.messageIdProvider.allocate()\n}\n\n/**\n * getLastMessageId\n * @return unsigned int\n */\nMqttClient.prototype.getLastMessageId = function () {\n  return this.messageIdProvider.getLastAllocated()\n}\n\n/**\n * _resubscribe\n * @api private\n */\nMqttClient.prototype._resubscribe = function () {\n  debug('_resubscribe')\n  const _resubscribeTopicsKeys = Object.keys(this._resubscribeTopics)\n  if (!this._firstConnection &&\n      (this.options.clean || (this.options.protocolVersion === 5 && !this.connackPacket.sessionPresent)) &&\n      _resubscribeTopicsKeys.length > 0) {\n    if (this.options.resubscribe) {\n      if (this.options.protocolVersion === 5) {\n        debug('_resubscribe: protocolVersion 5')\n        for (let topicI = 0; topicI < _resubscribeTopicsKeys.length; topicI++) {\n          const resubscribeTopic = {}\n          resubscribeTopic[_resubscribeTopicsKeys[topicI]] = this._resubscribeTopics[_resubscribeTopicsKeys[topicI]]\n          resubscribeTopic.resubscribe = true\n          this.subscribe(resubscribeTopic, { properties: resubscribeTopic[_resubscribeTopicsKeys[topicI]].properties })\n        }\n      } else {\n        this._resubscribeTopics.resubscribe = true\n        this.subscribe(this._resubscribeTopics)\n      }\n    } else {\n      this._resubscribeTopics = {}\n    }\n  }\n\n  this._firstConnection = false\n}\n\n/**\n * _onConnect\n *\n * @api private\n */\nMqttClient.prototype._onConnect = function (packet) {\n  if (this.disconnected) {\n    this.emit('connect', packet)\n    return\n  }\n\n  const that = this\n\n  this.connackPacket = packet\n  this.messageIdProvider.clear()\n  this._setupPingTimer()\n\n  this.connected = true\n\n  function startStreamProcess () {\n    let outStore = that.outgoingStore.createStream()\n\n    function clearStoreProcessing () {\n      that._storeProcessing = false\n      that._packetIdsDuringStoreProcessing = {}\n    }\n\n    that.once('close', remove)\n    outStore.on('error', function (err) {\n      clearStoreProcessing()\n      that._flushStoreProcessingQueue()\n      that.removeListener('close', remove)\n      that.emit('error', err)\n    })\n\n    function remove () {\n      outStore.destroy()\n      outStore = null\n      that._flushStoreProcessingQueue()\n      clearStoreProcessing()\n    }\n\n    function storeDeliver () {\n      // edge case, we wrapped this twice\n      if (!outStore) {\n        return\n      }\n      that._storeProcessing = true\n\n      const packet = outStore.read(1)\n\n      let cb\n\n      if (!packet) {\n        // read when data is available in the future\n        outStore.once('readable', storeDeliver)\n        return\n      }\n\n      // Skip already processed store packets\n      if (that._packetIdsDuringStoreProcessing[packet.messageId]) {\n        storeDeliver()\n        return\n      }\n\n      // Avoid unnecessary stream read operations when disconnected\n      if (!that.disconnecting && !that.reconnectTimer) {\n        cb = that.outgoing[packet.messageId] ? that.outgoing[packet.messageId].cb : null\n        that.outgoing[packet.messageId] = {\n          volatile: false,\n          cb: function (err, status) {\n            // Ensure that the original callback passed in to publish gets invoked\n            if (cb) {\n              cb(err, status)\n            }\n\n            storeDeliver()\n          }\n        }\n        that._packetIdsDuringStoreProcessing[packet.messageId] = true\n        if (that.messageIdProvider.register(packet.messageId)) {\n          that._sendPacket(packet)\n        } else {\n          debug('messageId: %d has already used.', packet.messageId)\n        }\n      } else if (outStore.destroy) {\n        outStore.destroy()\n      }\n    }\n\n    outStore.on('end', function () {\n      let allProcessed = true\n      for (const id in that._packetIdsDuringStoreProcessing) {\n        if (!that._packetIdsDuringStoreProcessing[id]) {\n          allProcessed = false\n          break\n        }\n      }\n      if (allProcessed) {\n        clearStoreProcessing()\n        that.removeListener('close', remove)\n        that._invokeAllStoreProcessingQueue()\n        that.emit('connect', packet)\n      } else {\n        startStreamProcess()\n      }\n    })\n    storeDeliver()\n  }\n  // start flowing\n  startStreamProcess()\n}\n\nMqttClient.prototype._invokeStoreProcessingQueue = function () {\n  if (this._storeProcessingQueue.length > 0) {\n    const f = this._storeProcessingQueue[0]\n    if (f && f.invoke()) {\n      this._storeProcessingQueue.shift()\n      return true\n    }\n  }\n  return false\n}\n\nMqttClient.prototype._invokeAllStoreProcessingQueue = function () {\n  while (this._invokeStoreProcessingQueue()) { /* empty */ }\n}\n\nMqttClient.prototype._flushStoreProcessingQueue = function () {\n  for (const f of this._storeProcessingQueue) {\n    if (f.cbStorePut) f.cbStorePut(new Error('Connection closed'))\n    if (f.callback) f.callback(new Error('Connection closed'))\n  }\n  this._storeProcessingQueue.splice(0)\n}\n\nmodule.exports = MqttClient\n","'use strict'\n\nconst { Buffer } = require('buffer')\nconst Transform = require('readable-stream').Transform\nconst duplexify = require('duplexify')\n\n/* global FileReader */\nlet my\nlet proxy\nlet stream\nlet isInitialized = false\n\nfunction buildProxy () {\n  const proxy = new Transform()\n  proxy._write = function (chunk, encoding, next) {\n    my.sendSocketMessage({\n      data: chunk.buffer,\n      success: function () {\n        next()\n      },\n      fail: function () {\n        next(new Error())\n      }\n    })\n  }\n  proxy._flush = function socketEnd (done) {\n    my.closeSocket({\n      success: function () {\n        done()\n      }\n    })\n  }\n\n  return proxy\n}\n\nfunction setDefaultOpts (opts) {\n  if (!opts.hostname) {\n    opts.hostname = 'localhost'\n  }\n  if (!opts.path) {\n    opts.path = '/'\n  }\n\n  if (!opts.wsOptions) {\n    opts.wsOptions = {}\n  }\n}\n\nfunction buildUrl (opts, client) {\n  const protocol = opts.protocol === 'alis' ? 'wss' : 'ws'\n  let url = protocol + '://' + opts.hostname + opts.path\n  if (opts.port && opts.port !== 80 && opts.port !== 443) {\n    url = protocol + '://' + opts.hostname + ':' + opts.port + opts.path\n  }\n  if (typeof (opts.transformWsUrl) === 'function') {\n    url = opts.transformWsUrl(url, opts, client)\n  }\n  return url\n}\n\nfunction bindEventHandler () {\n  if (isInitialized) return\n\n  isInitialized = true\n\n  my.onSocketOpen(function () {\n    stream.setReadable(proxy)\n    stream.setWritable(proxy)\n    stream.emit('connect')\n  })\n\n  my.onSocketMessage(function (res) {\n    if (typeof res.data === 'string') {\n      const buffer = Buffer.from(res.data, 'base64')\n      proxy.push(buffer)\n    } else {\n      const reader = new FileReader()\n      reader.addEventListener('load', function () {\n        let data = reader.result\n\n        if (data instanceof ArrayBuffer) data = Buffer.from(data)\n        else data = Buffer.from(data, 'utf8')\n        proxy.push(data)\n      })\n      reader.readAsArrayBuffer(res.data)\n    }\n  })\n\n  my.onSocketClose(function () {\n    stream.end()\n    stream.destroy()\n  })\n\n  my.onSocketError(function (res) {\n    stream.destroy(res)\n  })\n}\n\nfunction buildStream (client, opts) {\n  opts.hostname = opts.hostname || opts.host\n\n  if (!opts.hostname) {\n    throw new Error('Could not determine host. Specify host manually.')\n  }\n\n  const websocketSubProtocol =\n    (opts.protocolId === 'MQIsdp') && (opts.protocolVersion === 3)\n      ? 'mqttv3.1'\n      : 'mqtt'\n\n  setDefaultOpts(opts)\n\n  const url = buildUrl(opts, client)\n  my = opts.my\n  my.connectSocket({\n    url: url,\n    protocols: websocketSubProtocol\n  })\n\n  proxy = buildProxy()\n  stream = duplexify.obj()\n\n  bindEventHandler()\n\n  return stream\n}\n\nmodule.exports = buildStream\n","'use strict'\n\nconst MqttClient = require('../client')\nconst Store = require('../store')\nconst url = require('url')\nconst xtend = require('xtend')\nconst debug = require('debug')('mqttjs')\n\nconst protocols = {}\n\n// eslint-disable-next-line camelcase\nif ((typeof process !== 'undefined' && process.title !== 'browser') || typeof __webpack_require__ !== 'function') {\n  protocols.mqtt = require('./tcp')\n  protocols.tcp = require('./tcp')\n  protocols.ssl = require('./tls')\n  protocols.tls = require('./tls')\n  protocols.mqtts = require('./tls')\n} else {\n  protocols.wx = require('./wx')\n  protocols.wxs = require('./wx')\n\n  protocols.ali = require('./ali')\n  protocols.alis = require('./ali')\n}\n\nprotocols.ws = require('./ws')\nprotocols.wss = require('./ws')\n\n/**\n * Parse the auth attribute and merge username and password in the options object.\n *\n * @param {Object} [opts] option object\n */\nfunction parseAuthOptions (opts) {\n  let matches\n  if (opts.auth) {\n    matches = opts.auth.match(/^(.+):(.+)$/)\n    if (matches) {\n      opts.username = matches[1]\n      opts.password = matches[2]\n    } else {\n      opts.username = opts.auth\n    }\n  }\n}\n\n/**\n * connect - connect to an MQTT broker.\n *\n * @param {String} [brokerUrl] - url of the broker, optional\n * @param {Object} opts - see MqttClient#constructor\n */\nfunction connect (brokerUrl, opts) {\n  debug('connecting to an MQTT broker...')\n  if ((typeof brokerUrl === 'object') && !opts) {\n    opts = brokerUrl\n    brokerUrl = null\n  }\n\n  opts = opts || {}\n\n  if (brokerUrl) {\n    // eslint-disable-next-line\n    const parsed = url.parse(brokerUrl, true)\n    if (parsed.port != null) {\n      parsed.port = Number(parsed.port)\n    }\n\n    opts = xtend(parsed, opts)\n\n    if (opts.protocol === null) {\n      throw new Error('Missing protocol')\n    }\n\n    opts.protocol = opts.protocol.replace(/:$/, '')\n  }\n\n  // merge in the auth options if supplied\n  parseAuthOptions(opts)\n\n  // support clientId passed in the query string of the url\n  if (opts.query && typeof opts.query.clientId === 'string') {\n    opts.clientId = opts.query.clientId\n  }\n\n  if (opts.cert && opts.key) {\n    if (opts.protocol) {\n      if (['mqtts', 'wss', 'wxs', 'alis'].indexOf(opts.protocol) === -1) {\n        switch (opts.protocol) {\n          case 'mqtt':\n            opts.protocol = 'mqtts'\n            break\n          case 'ws':\n            opts.protocol = 'wss'\n            break\n          case 'wx':\n            opts.protocol = 'wxs'\n            break\n          case 'ali':\n            opts.protocol = 'alis'\n            break\n          default:\n            throw new Error('Unknown protocol for secure connection: \"' + opts.protocol + '\"!')\n        }\n      }\n    } else {\n      // A cert and key was provided, however no protocol was specified, so we will throw an error.\n      throw new Error('Missing secure protocol key')\n    }\n  }\n\n  if (!protocols[opts.protocol]) {\n    const isSecure = ['mqtts', 'wss'].indexOf(opts.protocol) !== -1\n    opts.protocol = [\n      'mqtt',\n      'mqtts',\n      'ws',\n      'wss',\n      'wx',\n      'wxs',\n      'ali',\n      'alis'\n    ].filter(function (key, index) {\n      if (isSecure && index % 2 === 0) {\n        // Skip insecure protocols when requesting a secure one.\n        return false\n      }\n      return (typeof protocols[key] === 'function')\n    })[0]\n  }\n\n  if (opts.clean === false && !opts.clientId) {\n    throw new Error('Missing clientId for unclean clients')\n  }\n\n  if (opts.protocol) {\n    opts.defaultProtocol = opts.protocol\n  }\n\n  function wrapper (client) {\n    if (opts.servers) {\n      if (!client._reconnectCount || client._reconnectCount === opts.servers.length) {\n        client._reconnectCount = 0\n      }\n\n      opts.host = opts.servers[client._reconnectCount].host\n      opts.port = opts.servers[client._reconnectCount].port\n      opts.protocol = (!opts.servers[client._reconnectCount].protocol ? opts.defaultProtocol : opts.servers[client._reconnectCount].protocol)\n      opts.hostname = opts.host\n\n      client._reconnectCount++\n    }\n\n    debug('calling streambuilder for', opts.protocol)\n    return protocols[opts.protocol](client, opts)\n  }\n  const client = new MqttClient(wrapper, opts)\n  client.on('error', function () { /* Automatically set up client error handling */ })\n  return client\n}\n\nmodule.exports = connect\nmodule.exports.connect = connect\nmodule.exports.MqttClient = MqttClient\nmodule.exports.Store = Store\n","'use strict'\nconst net = require('net')\nconst debug = require('debug')('mqttjs:tcp')\n\n/*\n  variables port and host can be removed since\n  you have all required information in opts object\n*/\nfunction streamBuilder (client, opts) {\n  opts.port = opts.port || 1883\n  opts.hostname = opts.hostname || opts.host || 'localhost'\n\n  const port = opts.port\n  const host = opts.hostname\n\n  debug('port %d and host %s', port, host)\n  return net.createConnection(port, host)\n}\n\nmodule.exports = streamBuilder\n","'use strict'\nconst tls = require('tls')\nconst net = require('net')\nconst debug = require('debug')('mqttjs:tls')\n\nfunction buildBuilder (mqttClient, opts) {\n  opts.port = opts.port || 8883\n  opts.host = opts.hostname || opts.host || 'localhost'\n\n  if (net.isIP(opts.host) === 0) {\n    opts.servername = opts.host\n  }\n\n  opts.rejectUnauthorized = opts.rejectUnauthorized !== false\n\n  delete opts.path\n\n  debug('port %d host %s rejectUnauthorized %b', opts.port, opts.host, opts.rejectUnauthorized)\n\n  const connection = tls.connect(opts)\n  /* eslint no-use-before-define: [2, \"nofunc\"] */\n  connection.on('secureConnect', function () {\n    if (opts.rejectUnauthorized && !connection.authorized) {\n      connection.emit('error', new Error('TLS not authorized'))\n    } else {\n      connection.removeListener('error', handleTLSerrors)\n    }\n  })\n\n  function handleTLSerrors (err) {\n    // How can I get verify this error is a tls error?\n    if (opts.rejectUnauthorized) {\n      mqttClient.emit('error', err)\n    }\n\n    // close this connection to match the behaviour of net\n    // otherwise all we get is an error from the connection\n    // and close event doesn't fire. This is a work around\n    // to enable the reconnect code to work the same as with\n    // net.createConnection\n    connection.end()\n  }\n\n  connection.on('error', handleTLSerrors)\n  return connection\n}\n\nmodule.exports = buildBuilder\n","'use strict'\n\nconst { Buffer } = require('buffer')\nconst WS = require('ws')\nconst debug = require('debug')('mqttjs:ws')\nconst duplexify = require('duplexify')\nconst Transform = require('readable-stream').Transform\n\nconst WSS_OPTIONS = [\n  'rejectUnauthorized',\n  'ca',\n  'cert',\n  'key',\n  'pfx',\n  'passphrase'\n]\n// eslint-disable-next-line camelcase\nconst IS_BROWSER = (typeof process !== 'undefined' && process.title === 'browser') || typeof __webpack_require__ === 'function'\nfunction buildUrl (opts, client) {\n  let url = opts.protocol + '://' + opts.hostname + ':' + opts.port + opts.path\n  if (typeof (opts.transformWsUrl) === 'function') {\n    url = opts.transformWsUrl(url, opts, client)\n  }\n  return url\n}\n\nfunction setDefaultOpts (opts) {\n  const options = opts\n  if (!opts.hostname) {\n    options.hostname = 'localhost'\n  }\n  if (!opts.port) {\n    if (opts.protocol === 'wss') {\n      options.port = 443\n    } else {\n      options.port = 80\n    }\n  }\n  if (!opts.path) {\n    options.path = '/'\n  }\n\n  if (!opts.wsOptions) {\n    options.wsOptions = {}\n  }\n  if (!IS_BROWSER && opts.protocol === 'wss') {\n    // Add cert/key/ca etc options\n    WSS_OPTIONS.forEach(function (prop) {\n      if (Object.prototype.hasOwnProperty.call(opts, prop) && !Object.prototype.hasOwnProperty.call(opts.wsOptions, prop)) {\n        options.wsOptions[prop] = opts[prop]\n      }\n    })\n  }\n\n  return options\n}\n\nfunction setDefaultBrowserOpts (opts) {\n  const options = setDefaultOpts(opts)\n\n  if (!options.hostname) {\n    options.hostname = options.host\n  }\n\n  if (!options.hostname) {\n    // Throwing an error in a Web Worker if no `hostname` is given, because we\n    // can not determine the `hostname` automatically.  If connecting to\n    // localhost, please supply the `hostname` as an argument.\n    if (typeof (document) === 'undefined') {\n      throw new Error('Could not determine host. Specify host manually.')\n    }\n    const parsed = new URL(document.URL)\n    options.hostname = parsed.hostname\n\n    if (!options.port) {\n      options.port = parsed.port\n    }\n  }\n\n  // objectMode should be defined for logic\n  if (options.objectMode === undefined) {\n    options.objectMode = !(options.binary === true || options.binary === undefined)\n  }\n\n  return options\n}\n\nfunction createWebSocket (client, url, opts) {\n  debug('createWebSocket')\n  debug('protocol: ' + opts.protocolId + ' ' + opts.protocolVersion)\n  const websocketSubProtocol =\n    (opts.protocolId === 'MQIsdp') && (opts.protocolVersion === 3)\n      ? 'mqttv3.1'\n      : 'mqtt'\n\n  debug('creating new Websocket for url: ' + url + ' and protocol: ' + websocketSubProtocol)\n  const socket = new WS(url, [websocketSubProtocol], opts.wsOptions)\n  return socket\n}\n\nfunction createBrowserWebSocket (client, opts) {\n  const websocketSubProtocol =\n  (opts.protocolId === 'MQIsdp') && (opts.protocolVersion === 3)\n    ? 'mqttv3.1'\n    : 'mqtt'\n\n  const url = buildUrl(opts, client)\n  /* global WebSocket */\n  const socket = new WebSocket(url, [websocketSubProtocol])\n  socket.binaryType = 'arraybuffer'\n  return socket\n}\n\nfunction streamBuilder (client, opts) {\n  debug('streamBuilder')\n  const options = setDefaultOpts(opts)\n  const url = buildUrl(options, client)\n  const socket = createWebSocket(client, url, options)\n  const webSocketStream = WS.createWebSocketStream(socket, options.wsOptions)\n  webSocketStream.url = url\n  socket.on('close', () => { webSocketStream.destroy() })\n  return webSocketStream\n}\n\nfunction browserStreamBuilder (client, opts) {\n  debug('browserStreamBuilder')\n  let stream\n  const options = setDefaultBrowserOpts(opts)\n  // sets the maximum socket buffer size before throttling\n  const bufferSize = options.browserBufferSize || 1024 * 512\n\n  const bufferTimeout = opts.browserBufferTimeout || 1000\n\n  const coerceToBuffer = !opts.objectMode\n\n  const socket = createBrowserWebSocket(client, opts)\n\n  const proxy = buildProxy(opts, socketWriteBrowser, socketEndBrowser)\n\n  if (!opts.objectMode) {\n    proxy._writev = writev\n  }\n  proxy.on('close', () => { socket.close() })\n\n  const eventListenerSupport = (typeof socket.addEventListener !== 'undefined')\n\n  // was already open when passed in\n  if (socket.readyState === socket.OPEN) {\n    stream = proxy\n  } else {\n    stream = stream = duplexify(undefined, undefined, opts)\n    if (!opts.objectMode) {\n      stream._writev = writev\n    }\n\n    if (eventListenerSupport) {\n      socket.addEventListener('open', onopen)\n    } else {\n      socket.onopen = onopen\n    }\n  }\n\n  stream.socket = socket\n\n  if (eventListenerSupport) {\n    socket.addEventListener('close', onclose)\n    socket.addEventListener('error', onerror)\n    socket.addEventListener('message', onmessage)\n  } else {\n    socket.onclose = onclose\n    socket.onerror = onerror\n    socket.onmessage = onmessage\n  }\n\n  // methods for browserStreamBuilder\n\n  function buildProxy (options, socketWrite, socketEnd) {\n    const proxy = new Transform({\n      objectModeMode: options.objectMode\n    })\n\n    proxy._write = socketWrite\n    proxy._flush = socketEnd\n\n    return proxy\n  }\n\n  function onopen () {\n    stream.setReadable(proxy)\n    stream.setWritable(proxy)\n    stream.emit('connect')\n  }\n\n  function onclose () {\n    stream.end()\n    stream.destroy()\n  }\n\n  function onerror (err) {\n    stream.destroy(err)\n  }\n\n  function onmessage (event) {\n    let data = event.data\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    else data = Buffer.from(data, 'utf8')\n    proxy.push(data)\n  }\n\n  // this is to be enabled only if objectMode is false\n  function writev (chunks, cb) {\n    const buffers = new Array(chunks.length)\n    for (let i = 0; i < chunks.length; i++) {\n      if (typeof chunks[i].chunk === 'string') {\n        buffers[i] = Buffer.from(chunks[i], 'utf8')\n      } else {\n        buffers[i] = chunks[i].chunk\n      }\n    }\n\n    this._write(Buffer.concat(buffers), 'binary', cb)\n  }\n\n  function socketWriteBrowser (chunk, enc, next) {\n    if (socket.bufferedAmount > bufferSize) {\n      // throttle data until buffered amount is reduced.\n      setTimeout(socketWriteBrowser, bufferTimeout, chunk, enc, next)\n    }\n\n    if (coerceToBuffer && typeof chunk === 'string') {\n      chunk = Buffer.from(chunk, 'utf8')\n    }\n\n    try {\n      socket.send(chunk)\n    } catch (err) {\n      return next(err)\n    }\n\n    next()\n  }\n\n  function socketEndBrowser (done) {\n    socket.close()\n    done()\n  }\n\n  // end methods for browserStreamBuilder\n\n  return stream\n}\n\nif (IS_BROWSER) {\n  module.exports = browserStreamBuilder\n} else {\n  module.exports = streamBuilder\n}\n","'use strict'\n\nconst { Buffer } = require('buffer')\nconst Transform = require('readable-stream').Transform\nconst duplexify = require('duplexify')\n\n/* global wx */\nlet socketTask, proxy, stream\n\nfunction buildProxy () {\n  const proxy = new Transform()\n  proxy._write = function (chunk, encoding, next) {\n    socketTask.send({\n      data: chunk.buffer,\n      success: function () {\n        next()\n      },\n      fail: function (errMsg) {\n        next(new Error(errMsg))\n      }\n    })\n  }\n  proxy._flush = function socketEnd (done) {\n    socketTask.close({\n      success: function () {\n        done()\n      }\n    })\n  }\n\n  return proxy\n}\n\nfunction setDefaultOpts (opts) {\n  if (!opts.hostname) {\n    opts.hostname = 'localhost'\n  }\n  if (!opts.path) {\n    opts.path = '/'\n  }\n\n  if (!opts.wsOptions) {\n    opts.wsOptions = {}\n  }\n}\n\nfunction buildUrl (opts, client) {\n  const protocol = opts.protocol === 'wxs' ? 'wss' : 'ws'\n  let url = protocol + '://' + opts.hostname + opts.path\n  if (opts.port && opts.port !== 80 && opts.port !== 443) {\n    url = protocol + '://' + opts.hostname + ':' + opts.port + opts.path\n  }\n  if (typeof (opts.transformWsUrl) === 'function') {\n    url = opts.transformWsUrl(url, opts, client)\n  }\n  return url\n}\n\nfunction bindEventHandler () {\n  socketTask.onOpen(function () {\n    stream.setReadable(proxy)\n    stream.setWritable(proxy)\n    stream.emit('connect')\n  })\n\n  socketTask.onMessage(function (res) {\n    let data = res.data\n\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    else data = Buffer.from(data, 'utf8')\n    proxy.push(data)\n  })\n\n  socketTask.onClose(function () {\n    stream.end()\n    stream.destroy()\n  })\n\n  socketTask.onError(function (res) {\n    stream.destroy(new Error(res.errMsg))\n  })\n}\n\nfunction buildStream (client, opts) {\n  opts.hostname = opts.hostname || opts.host\n\n  if (!opts.hostname) {\n    throw new Error('Could not determine host. Specify host manually.')\n  }\n\n  const websocketSubProtocol =\n    (opts.protocolId === 'MQIsdp') && (opts.protocolVersion === 3)\n      ? 'mqttv3.1'\n      : 'mqtt'\n\n  setDefaultOpts(opts)\n\n  const url = buildUrl(opts, client)\n  socketTask = wx.connectSocket({\n    url: url,\n    protocols: [websocketSubProtocol]\n  })\n\n  proxy = buildProxy()\n  stream = duplexify.obj()\n  stream._destroy = function (err, cb) {\n    socketTask.close({\n      success: function () {\n        cb && cb(err)\n      }\n    })\n  }\n\n  const destroyRef = stream.destroy\n  stream.destroy = function () {\n    stream.destroy = destroyRef\n\n    const self = this\n    setTimeout(function () {\n      socketTask.close({\n        fail: function () {\n          self._destroy(new Error())\n        }\n      })\n    }, 0)\n  }.bind(stream)\n\n  bindEventHandler()\n\n  return stream\n}\n\nmodule.exports = buildStream\n","'use strict'\n\n/**\n * DefaultMessageAllocator constructor\n * @constructor\n */\nfunction DefaultMessageIdProvider () {\n  if (!(this instanceof DefaultMessageIdProvider)) {\n    return new DefaultMessageIdProvider()\n  }\n\n  /**\n   * MessageIDs starting with 1\n   * ensure that nextId is min. 1, see https://github.com/mqttjs/MQTT.js/issues/810\n   */\n  this.nextId = Math.max(1, Math.floor(Math.random() * 65535))\n}\n\n/**\n * allocate\n *\n * Get the next messageId.\n * @return unsigned int\n */\nDefaultMessageIdProvider.prototype.allocate = function () {\n  // id becomes current state of this.nextId and increments afterwards\n  const id = this.nextId++\n  // Ensure 16 bit unsigned int (max 65535, nextId got one higher)\n  if (this.nextId === 65536) {\n    this.nextId = 1\n  }\n  return id\n}\n\n/**\n * getLastAllocated\n * Get the last allocated messageId.\n * @return unsigned int\n */\nDefaultMessageIdProvider.prototype.getLastAllocated = function () {\n  return (this.nextId === 1) ? 65535 : (this.nextId - 1)\n}\n\n/**\n * register\n * Register messageId. If success return true, otherwise return false.\n * @param { unsigned int } - messageId to register,\n * @return boolean\n */\nDefaultMessageIdProvider.prototype.register = function (messageId) {\n  return true\n}\n\n/**\n * deallocate\n * Deallocate messageId.\n * @param { unsigned int } - messageId to deallocate,\n */\nDefaultMessageIdProvider.prototype.deallocate = function (messageId) {\n}\n\n/**\n * clear\n * Deallocate all messageIds.\n */\nDefaultMessageIdProvider.prototype.clear = function () {\n}\n\nmodule.exports = DefaultMessageIdProvider\n","'use strict'\n\n/**\n * Module dependencies\n */\nconst xtend = require('xtend')\n\nconst Readable = require('readable-stream').Readable\nconst streamsOpts = { objectMode: true }\nconst defaultStoreOptions = {\n  clean: true\n}\n\n/**\n * In-memory implementation of the message store\n * This can actually be saved into files.\n *\n * @param {Object} [options] - store options\n */\nfunction Store (options) {\n  if (!(this instanceof Store)) {\n    return new Store(options)\n  }\n\n  this.options = options || {}\n\n  // Defaults\n  this.options = xtend(defaultStoreOptions, options)\n\n  this._inflights = new Map()\n}\n\n/**\n * Adds a packet to the store, a packet is\n * anything that has a messageId property.\n *\n */\nStore.prototype.put = function (packet, cb) {\n  this._inflights.set(packet.messageId, packet)\n\n  if (cb) {\n    cb()\n  }\n\n  return this\n}\n\n/**\n * Creates a stream with all the packets in the store\n *\n */\nStore.prototype.createStream = function () {\n  const stream = new Readable(streamsOpts)\n  const values = []\n  let destroyed = false\n  let i = 0\n\n  this._inflights.forEach(function (value, key) {\n    values.push(value)\n  })\n\n  stream._read = function () {\n    if (!destroyed && i < values.length) {\n      this.push(values[i++])\n    } else {\n      this.push(null)\n    }\n  }\n\n  stream.destroy = function () {\n    if (destroyed) {\n      return\n    }\n\n    const self = this\n\n    destroyed = true\n\n    setTimeout(function () {\n      self.emit('close')\n    }, 0)\n  }\n\n  return stream\n}\n\n/**\n * deletes a packet from the store.\n */\nStore.prototype.del = function (packet, cb) {\n  packet = this._inflights.get(packet.messageId)\n  if (packet) {\n    this._inflights.delete(packet.messageId)\n    cb(null, packet)\n  } else if (cb) {\n    cb(new Error('missing packet'))\n  }\n\n  return this\n}\n\n/**\n * get a packet from the store.\n */\nStore.prototype.get = function (packet, cb) {\n  packet = this._inflights.get(packet.messageId)\n  if (packet) {\n    cb(null, packet)\n  } else if (cb) {\n    cb(new Error('missing packet'))\n  }\n\n  return this\n}\n\n/**\n * Close the store\n */\nStore.prototype.close = function (cb) {\n  if (this.options.clean) {\n    this._inflights = null\n  }\n  if (cb) {\n    cb()\n  }\n}\n\nmodule.exports = Store\n","'use strict'\n\n/**\n * Topic Alias receiving manager\n * This holds alias to topic map\n * @param {Number} [max] - topic alias maximum entries\n */\nfunction TopicAliasRecv (max) {\n  if (!(this instanceof TopicAliasRecv)) {\n    return new TopicAliasRecv(max)\n  }\n  this.aliasToTopic = {}\n  this.max = max\n}\n\n/**\n * Insert or update topic - alias entry.\n * @param {String} [topic] - topic\n * @param {Number} [alias] - topic alias\n * @returns {Boolean} - if success return true otherwise false\n */\nTopicAliasRecv.prototype.put = function (topic, alias) {\n  if (alias === 0 || alias > this.max) {\n    return false\n  }\n  this.aliasToTopic[alias] = topic\n  this.length = Object.keys(this.aliasToTopic).length\n  return true\n}\n\n/**\n * Get topic by alias\n * @param {String} [topic] - topic\n * @returns {Number} - if mapped topic exists return topic alias, otherwise return undefined\n */\nTopicAliasRecv.prototype.getTopicByAlias = function (alias) {\n  return this.aliasToTopic[alias]\n}\n\n/**\n * Clear all entries\n */\nTopicAliasRecv.prototype.clear = function () {\n  this.aliasToTopic = {}\n}\n\nmodule.exports = TopicAliasRecv\n","'use strict'\n\n/**\n * Module dependencies\n */\nconst LruMap = require('lru-cache')\nconst NumberAllocator = require('number-allocator').NumberAllocator\n\n/**\n * Topic Alias sending manager\n * This holds both topic to alias and alias to topic map\n * @param {Number} [max] - topic alias maximum entries\n */\nfunction TopicAliasSend (max) {\n  if (!(this instanceof TopicAliasSend)) {\n    return new TopicAliasSend(max)\n  }\n\n  if (max > 0) {\n    this.aliasToTopic = new LruMap({ max: max })\n    this.topicToAlias = {}\n    this.numberAllocator = new NumberAllocator(1, max)\n    this.max = max\n    this.length = 0\n  }\n}\n\n/**\n * Insert or update topic - alias entry.\n * @param {String} [topic] - topic\n * @param {Number} [alias] - topic alias\n * @returns {Boolean} - if success return true otherwise false\n */\nTopicAliasSend.prototype.put = function (topic, alias) {\n  if (alias === 0 || alias > this.max) {\n    return false\n  }\n  const entry = this.aliasToTopic.get(alias)\n  if (entry) {\n    delete this.topicToAlias[entry]\n  }\n  this.aliasToTopic.set(alias, topic)\n  this.topicToAlias[topic] = alias\n  this.numberAllocator.use(alias)\n  this.length = this.aliasToTopic.length\n  return true\n}\n\n/**\n * Get topic by alias\n * @param {Number} [alias] - topic alias\n * @returns {String} - if mapped topic exists return topic, otherwise return undefined\n */\nTopicAliasSend.prototype.getTopicByAlias = function (alias) {\n  return this.aliasToTopic.get(alias)\n}\n\n/**\n * Get topic by alias\n * @param {String} [topic] - topic\n * @returns {Number} - if mapped topic exists return topic alias, otherwise return undefined\n */\nTopicAliasSend.prototype.getAliasByTopic = function (topic) {\n  const alias = this.topicToAlias[topic]\n  if (typeof alias !== 'undefined') {\n    this.aliasToTopic.get(alias) // LRU update\n  }\n  return alias\n}\n\n/**\n * Clear all entries\n */\nTopicAliasSend.prototype.clear = function () {\n  this.aliasToTopic.reset()\n  this.topicToAlias = {}\n  this.numberAllocator.clear()\n  this.length = 0\n}\n\n/**\n * Get Least Recently Used (LRU) topic alias\n * @returns {Number} - if vacant alias exists then return it, otherwise then return LRU alias\n */\nTopicAliasSend.prototype.getLruAlias = function () {\n  const alias = this.numberAllocator.firstVacant()\n  if (alias) return alias\n  return this.aliasToTopic.keys()[this.aliasToTopic.length - 1]\n}\n\nmodule.exports = TopicAliasSend\n","'use strict'\n\nconst NumberAllocator = require('number-allocator').NumberAllocator\n\n/**\n * UniqueMessageAllocator constructor\n * @constructor\n */\nfunction UniqueMessageIdProvider () {\n  if (!(this instanceof UniqueMessageIdProvider)) {\n    return new UniqueMessageIdProvider()\n  }\n\n  this.numberAllocator = new NumberAllocator(1, 65535)\n}\n\n/**\n * allocate\n *\n * Get the next messageId.\n * @return if messageId is fully allocated then return null,\n *         otherwise return the smallest usable unsigned int messageId.\n */\nUniqueMessageIdProvider.prototype.allocate = function () {\n  this.lastId = this.numberAllocator.alloc()\n  return this.lastId\n}\n\n/**\n * getLastAllocated\n * Get the last allocated messageId.\n * @return unsigned int\n */\nUniqueMessageIdProvider.prototype.getLastAllocated = function () {\n  return this.lastId\n}\n\n/**\n * register\n * Register messageId. If success return true, otherwise return false.\n * @param { unsigned int } - messageId to register,\n * @return boolean\n */\nUniqueMessageIdProvider.prototype.register = function (messageId) {\n  return this.numberAllocator.use(messageId)\n}\n\n/**\n * deallocate\n * Deallocate messageId.\n * @param { unsigned int } - messageId to deallocate,\n */\nUniqueMessageIdProvider.prototype.deallocate = function (messageId) {\n  this.numberAllocator.free(messageId)\n}\n\n/**\n * clear\n * Deallocate all messageIds.\n */\nUniqueMessageIdProvider.prototype.clear = function () {\n  this.numberAllocator.clear()\n}\n\nmodule.exports = UniqueMessageIdProvider\n","'use strict'\n\n/**\n * Validate a topic to see if it's valid or not.\n * A topic is valid if it follow below rules:\n * - Rule #1: If any part of the topic is not `+` or `#`, then it must not contain `+` and '#'\n * - Rule #2: Part `#` must be located at the end of the mailbox\n *\n * @param {String} topic - A topic\n * @returns {Boolean} If the topic is valid, returns true. Otherwise, returns false.\n */\nfunction validateTopic (topic) {\n  const parts = topic.split('/')\n\n  for (let i = 0; i < parts.length; i++) {\n    if (parts[i] === '+') {\n      continue\n    }\n\n    if (parts[i] === '#') {\n      // for Rule #2\n      return i === parts.length - 1\n    }\n\n    if (parts[i].indexOf('+') !== -1 || parts[i].indexOf('#') !== -1) {\n      return false\n    }\n  }\n\n  return true\n}\n\n/**\n * Validate an array of topics to see if any of them is valid or not\n  * @param {Array} topics - Array of topics\n * @returns {String} If the topics is valid, returns null. Otherwise, returns the invalid one\n */\nfunction validateTopics (topics) {\n  if (topics.length === 0) {\n    return 'empty_topic_list'\n  }\n  for (let i = 0; i < topics.length; i++) {\n    if (!validateTopic(topics[i])) {\n      return topics[i]\n    }\n  }\n  return null\n}\n\nmodule.exports = {\n  validateTopics: validateTopics\n}\n","/*\n * Copyright (c) 2015-2015 MQTT.js contributors.\n * Copyright (c) 2011-2014 Adam Rudd.\n *\n * See LICENSE for more information\n */\n\nconst MqttClient = require('./lib/client')\nconst connect = require('./lib/connect')\nconst Store = require('./lib/store')\nconst DefaultMessageIdProvider = require('./lib/default-message-id-provider')\nconst UniqueMessageIdProvider = require('./lib/unique-message-id-provider')\n\nmodule.exports.connect = connect\n\n// Expose MqttClient\nmodule.exports.MqttClient = MqttClient\nmodule.exports.Client = MqttClient\nmodule.exports.Store = Store\nmodule.exports.DefaultMessageIdProvider = DefaultMessageIdProvider\nmodule.exports.UniqueMessageIdProvider = UniqueMessageIdProvider\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// Copyright Takatoshi Kondo 2021\n//\n// Distributed under the MIT License\n\nconst NumberAllocator = require('./lib/number-allocator.js')\n\nmodule.exports.NumberAllocator = NumberAllocator\n","// Copyright Takatoshi Kondo 2021\n//\n// Distributed under the MIT License\n\n'use strict'\n\nconst SortedSet = require('js-sdsl').OrderedSet\nconst debugTrace = require('debug')('number-allocator:trace')\nconst debugError = require('debug')('number-allocator:error')\n/**\n * Interval constructor\n * @constructor\n * @param {Number} low  - The lowest value of the interval\n * @param {Number} high - The highest value of the interval\n */\nfunction Interval (low, high) {\n  this.low = low\n  this.high = high\n}\n\nInterval.prototype.equals = function (other) {\n  return this.low === other.low && this.high === other.high\n}\n\nInterval.prototype.compare = function (other) {\n  if (this.low < other.low && this.high < other.low) return -1\n  if (other.low < this.low && other.high < this.low) return 1\n  return 0\n}\n\n/**\n * NumberAllocator constructor.\n * The all numbers are set to vacant status.\n * Time Complexity O(1)\n * @constructor\n * @param {Number} min  - The maximum number of allocatable. The number must be integer.\n * @param {Number} maxh - The minimum number of allocatable. The number must be integer.\n */\nfunction NumberAllocator (min, max) {\n  if (!(this instanceof NumberAllocator)) {\n    return new NumberAllocator(min, max)\n  }\n\n  this.min = min\n  this.max = max\n\n  this.ss = new SortedSet(\n    [],\n    (lhs, rhs) => {\n      return lhs.compare(rhs)\n    }\n  )\n  debugTrace('Create')\n  this.clear()\n}\n\n/**\n * Get the first vacant number. The status of the number is not updated.\n * Time Complexity O(1)\n * @return {Number} - The first vacant number. If all numbers are occupied, return null.\n *                    When alloc() is called then the same value will be allocated.\n */\nNumberAllocator.prototype.firstVacant = function () {\n  if (this.ss.size() === 0) return null\n  return this.ss.front().low\n}\n\n/**\n * Allocate the first vacant number. The number become occupied status.\n * Time Complexity O(1)\n * @return {Number} - The first vacant number. If all numbers are occupied, return null.\n */\nNumberAllocator.prototype.alloc = function () {\n  if (this.ss.size() === 0) {\n    debugTrace('alloc():empty')\n    return null\n  }\n  const it = this.ss.begin()\n  const low = it.pointer.low\n  const high = it.pointer.high\n  const num = low\n  if (num + 1 <= high) {\n    // x|----|\n    this.ss.updateKeyByIterator(it, new Interval(low + 1, high))\n  } else {\n    this.ss.eraseElementByPos(0)\n  }\n  debugTrace('alloc():' + num)\n  return num\n}\n\n/**\n * Use the number. The number become occupied status.\n * If the number has already been occupied, then return false.\n * Time Complexity O(logN) : N is the number of intervals (not numbers)\n * @param {Number} num - The number to request use.\n * @return {Boolean} - If `num` was not occupied, then return true, otherwise return false.\n */\nNumberAllocator.prototype.use = function (num) {\n  const key = new Interval(num, num)\n  const it = this.ss.lowerBound(key)\n  if (!it.equals(this.ss.end())) {\n    const low = it.pointer.low\n    const high = it.pointer.high\n    if (it.pointer.equals(key)) {\n      // |x|\n      this.ss.eraseElementByIterator(it)\n      debugTrace('use():' + num)\n      return true\n    }\n\n    // x |-----|\n    if (low > num) return false\n\n    // |x----|\n    if (low === num) {\n      // x|----|\n      this.ss.updateKeyByIterator(it, new Interval(low + 1, high))\n      debugTrace('use():' + num)\n      return true\n    }\n\n    // |----x|\n    if (high === num) {\n      // |----|x\n      this.ss.updateKeyByIterator(it, new Interval(low, high - 1))\n      debugTrace('use():' + num)\n      return true\n    }\n\n    // |--x--|\n    // x|--|\n    this.ss.updateKeyByIterator(it, new Interval(num + 1, high))\n    // |--|x|--|\n    this.ss.insert(new Interval(low, num - 1))\n    debugTrace('use():' + num)\n    return true\n  }\n\n  debugTrace('use():failed')\n  return false\n}\n\n/**\n * Deallocate the number. The number become vacant status.\n * Time Complexity O(logN) : N is the number of intervals (not numbers)\n * @param {Number} num - The number to deallocate. The number must be occupied status.\n *                       In other words, the number must be allocated by alloc() or occupied be use().\n */\nNumberAllocator.prototype.free = function (num) {\n  if (num < this.min || num > this.max) {\n    debugError('free():' + num + ' is out of range')\n    return\n  }\n  const key = new Interval(num, num)\n  const it = this.ss.upperBound(key)\n  if (it.equals(this.ss.end())) {\n    // ....v\n    if (it.equals(this.ss.begin())) {\n      // Insert new interval\n      this.ss.insert(key)\n      return\n    }\n    it.pre()\n    const low = it.pointer.high\n    const high = it.pointer.high\n    if (high + 1 === num) {\n      // Concat to left\n      this.ss.updateKeyByIterator(it, new Interval(low, num))\n    } else {\n      // Insert new interval\n      this.ss.insert(key)\n    }\n  } else {\n    if (it.equals(this.ss.begin())) {\n      // v....\n      if (num + 1 === it.pointer.low) {\n        // Concat to right\n        const high = it.pointer.high\n        this.ss.updateKeyByIterator(it, new Interval(num, high))\n      } else {\n        // Insert new interval\n        this.ss.insert(key)\n      }\n    } else {\n      // ..v..\n      const rLow = it.pointer.low\n      const rHigh = it.pointer.high\n      it.pre()\n      const lLow = it.pointer.low\n      const lHigh = it.pointer.high\n      if (lHigh + 1 === num) {\n        if (num + 1 === rLow) {\n          // Concat to left and right\n          this.ss.eraseElementByIterator(it)\n          this.ss.updateKeyByIterator(it, new Interval(lLow, rHigh))\n        } else {\n          // Concat to left\n          this.ss.updateKeyByIterator(it, new Interval(lLow, num))\n        }\n      } else {\n        if (num + 1 === rLow) {\n          // Concat to right\n          this.ss.eraseElementByIterator(it.next())\n          this.ss.insert(new Interval(num, rHigh))\n        } else {\n          // Insert new interval\n          this.ss.insert(key)\n        }\n      }\n    }\n  }\n  debugTrace('free():' + num)\n}\n\n/**\n * Clear all occupied numbers.\n * The all numbers are set to vacant status.\n * Time Complexity O(1)\n */\nNumberAllocator.prototype.clear = function () {\n  debugTrace('clear()')\n  this.ss.clear()\n  this.ss.insert(new Interval(this.min, this.max))\n}\n\n/**\n * Get the number of intervals. Interval is internal structure of this library.\n * This function is for debugging.\n * Time Complexity O(1)\n * @return {Number} - The number of intervals.\n */\nNumberAllocator.prototype.intervalCount = function () {\n  return this.ss.size()\n}\n\n/**\n * Dump the internal structor of the library.\n * This function is for debugging.\n * Time Complexity O(N) : N is the number of intervals (not numbers)\n */\nNumberAllocator.prototype.dump = function () {\n  console.log('length:' + this.ss.size())\n  for (const element of this.ss) {\n    console.log(element)\n  }\n}\n\nmodule.exports = NumberAllocator\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","'use strict';\n\nconst codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n\n  function getMessage (arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message\n    } else {\n      return message(arg1, arg2, arg3)\n    }\n  }\n\n  class NodeError extends Base {\n    constructor (arg1, arg2, arg3) {\n      super(getMessage(arg1, arg2, arg3));\n    }\n  }\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n\n  codes[code] = NodeError;\n}\n\n// https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    const len = expected.length;\n    expected = expected.map((i) => String(i));\n    if (len > 2) {\n      return `one of ${thing} ${expected.slice(0, len - 1).join(', ')}, or ` +\n             expected[len - 1];\n    } else if (len === 2) {\n      return `one of ${thing} ${expected[0]} or ${expected[1]}`;\n    } else {\n      return `of ${thing} ${expected[0]}`;\n    }\n  } else {\n    return `of ${thing} ${String(expected)}`;\n  }\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\nfunction startsWith(str, search, pos) {\n\treturn str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\nfunction endsWith(str, search, this_len) {\n\tif (this_len === undefined || this_len > str.length) {\n\t\tthis_len = str.length;\n\t}\n\treturn str.substring(this_len - search.length, this_len) === search;\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"'\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  let determiner;\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  let msg;\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = `The ${name} ${determiner} ${oneOf(expected, 'type')}`;\n  } else {\n    const type = includes(name, '.') ? 'property' : 'argument';\n    msg = `The \"${name}\" ${type} ${determiner} ${oneOf(expected, 'type')}`;\n  }\n\n  msg += `. Received type ${typeof actual}`;\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented'\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\n\nmodule.exports.codes = codes;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\nrequire('inherits')(Duplex, Readable);\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(onEndNT, this);\n}\nfunction onEndNT(self) {\n  self.end();\n}\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\nvar Transform = require('./_stream_transform');\nrequire('inherits')(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/buffer_list');\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\n// Lazy loaded to improve the startup performance.\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\nrequire('inherits')(Readable, Stream);\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'end' (and potentially 'finish')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex);\n\n  // legacy\n  this.readable = true;\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n  Stream.call(this);\n}\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n  return er;\n}\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder;\n  // If setEncoding(null), decoder.encoding equals utf8\n  this._readableState.encoding = this._readableState.decoder.encoding;\n\n  // Iterate over current buffer to convert already stored Buffers:\n  var p = this._readableState.buffer.head;\n  var content = '';\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n  this._readableState.buffer.clear();\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n};\n\n// Don't raise the hwm > 1GB\nvar MAX_HWM = 0x40000000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  }\n\n  // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n  return dest;\n};\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    for (var i = 0; i < len; i++) dests[i].emit('unpipe', this, {\n      hasUnpiped: false\n    });\n    return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0;\n\n    // Try start flowing on next tick if stream isn't explicitly paused\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true;\n\n    // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n  state.paused = false;\n  return this;\n};\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n  if (!state.reading) {\n    stream.read(0);\n  }\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  this._readableState.paused = true;\n  return this;\n};\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null);\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n  return this;\n};\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n    return createReadableStreamAsyncIterator(this);\n  };\n}\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n});\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length);\n\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n    return from(Readable, iterable, opts);\n  };\n}\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\nvar _require$codes = require('../errors').codes,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n  ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\nvar Duplex = require('./_stream_duplex');\nrequire('inherits')(Transform, Duplex);\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\nfunction prefinish() {\n  var _this = this;\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n  ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nrequire('inherits')(Writable, Stream);\nfunction nop() {}\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'finish' (and potentially 'end')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex);\n\n  // legacy.\n  this.writable = true;\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END();\n  // TODO: defer error events consistently everywhere, not just the cb\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n  return true;\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n  return ret;\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\nWritable.prototype._writev = null;\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n  return need;\n}\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","'use strict';\n\nvar _Object$setPrototypeO;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar finished = require('./end-of-stream');\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n  if (resolve !== null) {\n    var data = iter[kStream].read();\n    // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n  next: function next() {\n    var _this = this;\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    }\n\n    // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n    var lastPromise = this[kLastPromise];\n    var promise;\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n      promise = new Promise(this[kHandlePromise]);\n    }\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject];\n      // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n      iterator[kError] = err;\n      return;\n    }\n    var resolve = iterator[kLastResolve];\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\nmodule.exports = createReadableStreamAsyncIterator;","'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require('buffer'),\n  Buffer = _require.Buffer;\nvar _require2 = require('util'),\n  inspect = _require2.inspect;\nvar custom = inspect && inspect.custom || 'inspect';\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\nmodule.exports = /*#__PURE__*/function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n      while (p = p.next) ret += s + p.data;\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes or characters from the buffered data.\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    }\n\n    // Consumes a specified amount of characters from the buffered data.\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes from the buffered data.\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Make sure the linked list only shows the minimal necessary information.\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread(_objectSpread({}, options), {}, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n  return BufferList;\n}();","'use strict';\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n  return this;\n}\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    callback.apply(this, args);\n  };\n}\nfunction noop() {}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n  var writableEnded = stream._writableState && stream._writableState.finished;\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n  var onclose = function onclose() {\n    var err;\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\nmodule.exports = eos;","'use strict';\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar ERR_INVALID_ARG_TYPE = require('../../../errors').codes.ERR_INVALID_ARG_TYPE;\nfunction from(Readable, iterable, opts) {\n  var iterator;\n  if (iterable && typeof iterable.next === 'function') {\n    iterator = iterable;\n  } else if (iterable && iterable[Symbol.asyncIterator]) iterator = iterable[Symbol.asyncIterator]();else if (iterable && iterable[Symbol.iterator]) iterator = iterable[Symbol.iterator]();else throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable);\n  var readable = new Readable(_objectSpread({\n    objectMode: true\n  }, opts));\n  // Reading boolean to protect against _read\n  // being called before last iteration completion.\n  var reading = false;\n  readable._read = function () {\n    if (!reading) {\n      reading = true;\n      next();\n    }\n  };\n  function next() {\n    return _next2.apply(this, arguments);\n  }\n  function _next2() {\n    _next2 = _asyncToGenerator(function* () {\n      try {\n        var _yield$iterator$next = yield iterator.next(),\n          value = _yield$iterator$next.value,\n          done = _yield$iterator$next.done;\n        if (done) {\n          readable.push(null);\n        } else if (readable.push(yield value)) {\n          next();\n        } else {\n          reading = false;\n        }\n      } catch (err) {\n        readable.destroy(err);\n      }\n    });\n    return _next2.apply(this, arguments);\n  }\n  return readable;\n}\nmodule.exports = from;\n","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar eos;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\nvar _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n    return Math.floor(hwm);\n  }\n\n  // Default value\n  return state.objectMode ? 16 : 16 * 1024;\n}\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","module.exports = require('stream');\n","var Stream = require('stream');\nif (process.env.READABLE_STREAM === 'disable' && Stream) {\n  module.exports = Stream.Readable;\n  Object.assign(module.exports, Stream);\n  module.exports.Stream = Stream;\n} else {\n  exports = module.exports = require('./lib/_stream_readable.js');\n  exports.Stream = Stream || exports;\n  exports.Readable = exports;\n  exports.Writable = require('./lib/_stream_writable.js');\n  exports.Duplex = require('./lib/_stream_duplex.js');\n  exports.Transform = require('./lib/_stream_transform.js');\n  exports.PassThrough = require('./lib/_stream_passthrough.js');\n  exports.finished = require('./lib/internal/streams/end-of-stream.js');\n  exports.pipeline = require('./lib/internal/streams/pipeline.js');\n}\n","'use strict'\n\nfunction ReInterval (callback, interval, args) {\n  var self = this;\n\n  this._callback = callback;\n  this._args = args;\n\n  this._interval = setInterval(callback, interval, this._args);\n\n  this.reschedule = function (interval) {\n    // if no interval entered, use the interval passed in on creation\n    if (!interval)\n      interval = self._interval;\n\n    if (self._interval)\n      clearInterval(self._interval);\n    self._interval = setInterval(self._callback, interval, self._args);\n  };\n\n  this.clear = function () {\n    if (self._interval) {\n      clearInterval(self._interval);\n      self._interval = undefined;\n    }\n  };\n  \n  this.destroy = function () {\n    if (self._interval) {\n      clearInterval(self._interval);\n    }\n    self._callback = undefined;\n    self._interval = undefined;\n    self._args = undefined;\n  };\n}\n\nfunction reInterval () {\n  if (typeof arguments[0] !== 'function')\n    throw new Error('callback needed');\n  if (typeof arguments[1] !== 'number')\n    throw new Error('interval needed');\n\n  var args;\n\n  if (arguments.length > 0) {\n    args = new Array(arguments.length - 2);\n\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i + 2];\n    }\n  }\n\n  return new ReInterval(arguments[0], arguments[1], args);\n}\n\nmodule.exports = reInterval;\n","'use strict'\n\nmodule.exports = require('./index.js')()\n","'use strict'\nmodule.exports = rfdc\n\nfunction copyBuffer (cur) {\n  if (cur instanceof Buffer) {\n    return Buffer.from(cur)\n  }\n\n  return new cur.constructor(cur.buffer.slice(), cur.byteOffset, cur.length)\n}\n\nfunction rfdc (opts) {\n  opts = opts || {}\n  if (opts.circles) return rfdcCircles(opts)\n\n  const constructorHandlers = new Map()\n  constructorHandlers.set(Date, (o) => new Date(o))\n  constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)))\n  constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)))\n  if (opts.constructorHandlers) {\n    for (const handler of opts.constructorHandlers) {\n      constructorHandlers.set(handler[0], handler[1])\n    }\n  }\n\n  let handler = null\n\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    const keys = Object.keys(a)\n    const a2 = new Array(keys.length)\n    for (let i = 0; i < keys.length; i++) {\n      const k = keys[i]\n      const cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        a2[k] = handler(cur, fn)\n      } else if (ArrayBuffer.isView(cur)) {\n        a2[k] = copyBuffer(cur)\n      } else {\n        a2[k] = fn(cur)\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, clone)\n    }\n    const o2 = {}\n    for (const k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, clone)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        o2[k] = clone(cur)\n      }\n    }\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, cloneProto)\n    }\n    const o2 = {}\n    for (const k in o) {\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, cloneProto)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        o2[k] = cloneProto(cur)\n      }\n    }\n    return o2\n  }\n}\n\nfunction rfdcCircles (opts) {\n  const refs = []\n  const refsNew = []\n\n  const constructorHandlers = new Map()\n  constructorHandlers.set(Date, (o) => new Date(o))\n  constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)))\n  constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)))\n  if (opts.constructorHandlers) {\n    for (const handler of opts.constructorHandlers) {\n      constructorHandlers.set(handler[0], handler[1])\n    }\n  }\n\n  let handler = null\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    const keys = Object.keys(a)\n    const a2 = new Array(keys.length)\n    for (let i = 0; i < keys.length; i++) {\n      const k = keys[i]\n      const cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        a2[k] = handler(cur, fn)\n      } else if (ArrayBuffer.isView(cur)) {\n        a2[k] = copyBuffer(cur)\n      } else {\n        const index = refs.indexOf(cur)\n        if (index !== -1) {\n          a2[k] = refsNew[index]\n        } else {\n          a2[k] = fn(cur)\n        }\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, clone)\n    }\n    const o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (const k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, clone)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        const i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = clone(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, cloneProto)\n    }\n    const o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (const k in o) {\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, cloneProto)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        const i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = cloneProto(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n}\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","module.exports = shift\n\nfunction shift (stream) {\n  var rs = stream._readableState\n  if (!rs) return null\n  return (rs.objectMode || typeof stream._duplexState === 'number') ? stream.read() : stream.read(getStateLength(rs))\n}\n\nfunction getStateLength (state) {\n  if (state.buffer.length) {\n    var idx = state.bufferIndex || 0\n    // Since node 6.3.0 state.buffer is a BufferList not an array\n    if (state.buffer.head) {\n      return state.buffer.head.data.length\n    } else if (state.buffer.length - idx > 0 && state.buffer[idx]) {\n      return state.buffer[idx].length\n    }\n  }\n\n  return state.length\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","'use strict';\nconst os = require('os');\nconst hasFlag = require('has-flag');\n\nconst env = process.env;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false')) {\n\tforceColor = false;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = true;\n}\nif ('FORCE_COLOR' in env) {\n\tforceColor = env.FORCE_COLOR.length === 0 || parseInt(env.FORCE_COLOR, 10) !== 0;\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(stream) {\n\tif (forceColor === false) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (stream && !stream.isTTY && forceColor !== true) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor ? 1 : 0;\n\n\tif (process.platform === 'win32') {\n\t\t// Node.js 7.5.0 is the first version of Node.js to include a patch to\n\t\t// libuv that enables 256 color output on Windows. Anything earlier and it\n\t\t// won't work. However, here we target Node.js 8 at minimum as it is an LTS\n\t\t// release, and Node.js 7 is not. Windows 10 build 10586 is the first Windows\n\t\t// release that supports 256 colors. Windows 10 build 14931 is the first release\n\t\t// that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(process.versions.node.split('.')[0]) >= 8 &&\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel(process.stdout),\n\tstderr: getSupportLevel(process.stderr)\n};\n","import sdk, { ScryptedDeviceBase, ScryptedInterface, Setting, Settings } from \"@scrypted/sdk\";\nimport { camerasKey, peopleKey, intervalIdKey, ipsKey, mqttHostKey, mqttUsernameKey, mqttPasswordKey, KnownPersonResult, StreamInfo } from \"./types\";\nimport { connect, Client } from 'mqtt';\n\nconst { systemManager } = sdk;\n\nexport default class ActiveStreamsConfig extends ScryptedDeviceBase implements Settings {\n    mqttClient: Client;\n    lastSetMap: { [topic: string]: any } = {};\n    intervalId = new Date().getTime();\n    autodiscoveryPublished = false;\n    mqttPathmame: string;\n\n    constructor(nativeId: string) {\n        super(nativeId);\n\n        this.start().catch(e => this.console.log(e));\n    }\n\n    async getSettings(): Promise<Setting[]> {\n        const currentCameras = this.storage.getItem(camerasKey);\n        const currentPeopleRaw = this.storage.getItem(peopleKey);\n        const currentPeople = currentPeopleRaw ? currentPeopleRaw.split(',') : []\n\n        const settings: Setting[] = [\n            {\n                key: intervalIdKey,\n                type: 'string',\n                title: 'Interval ID',\n                readonly: true,\n                value: this.storage.getItem(intervalIdKey)\n            },\n            {\n                title: 'Host',\n                group: 'MQTT',\n                key: mqttHostKey,\n                description: 'Specify the mqtt address.',\n                placeholder: 'mqtt://192.168.1.100',\n                value: this.storage.getItem(mqttHostKey)\n            },\n            {\n                title: 'Username',\n                group: 'MQTT',\n                key: mqttUsernameKey,\n                description: 'Specify the mqtt username.',\n                value: this.storage.getItem(mqttUsernameKey)\n            },\n            {\n                title: 'Password',\n                group: 'MQTT',\n                key: mqttPasswordKey,\n                description: 'Specify the mqtt password.',\n                type: 'password',\n                value: this.storage.getItem(mqttPasswordKey)\n            },\n            {\n                group: 'Tracked entities',\n                key: camerasKey,\n                type: 'device',\n                title: 'Cameras',\n                multiple: true,\n                deviceFilter: `interfaces.includes(\"${ScryptedInterface.VideoCamera}\")`,\n                value: currentCameras ? currentCameras.split(',') : [],\n            },\n            {\n                group: 'Tracked entities',\n                key: peopleKey,\n                type: 'string',\n                title: 'People',\n                multiple: true,\n                value: currentPeople,\n            }\n        ];\n\n        currentPeople.forEach(person => {\n            const personIpsKey = `${ipsKey}:${person}`;\n            const currentIps = this.storage.getItem(personIpsKey);\n            settings.push({\n                group: 'Tracked entities',\n                key: personIpsKey,\n                subgroup: person,\n                type: 'string',\n                title: `IPs`,\n                multiple: true,\n                value: currentIps ? currentIps.split(',') : [],\n            })\n        });\n\n        return settings;\n    }\n\n    async putSetting(key: string, value: string) {\n        this.storage.setItem(key, value.toString());\n        this.onDeviceEvent(ScryptedInterface.Settings, undefined);\n    }\n\n    mapToStreamInfo(setting: Setting) {\n        const fullIp = setting.subgroup.split(':');\n        fullIp.pop();\n        const ip = fullIp.join(':');\n        return { camera: setting.group, ip };\n    }\n\n    async processCamera(cameraId: string, settings: Setting[], activeStreamsConfigs: Setting[], isWhitelisted: boolean, knownPeople: string[]) {\n        const camera = systemManager.getDeviceById(cameraId);\n        const cameraName = camera.name;\n        const cameraStreamsInformation = settings.filter(setting => setting.group === camera.name);\n\n        const knownPeopleResult: KnownPersonResult[] = [];\n\n        const activeClients = Number(cameraStreamsInformation.find(setting => setting.title === 'Active Streams')?.value ?? 0);\n\n        for (const name of knownPeople) {\n            const ips = (activeStreamsConfigs.find(setting => setting.key === `activeStreamsIps:${name}`)?.value ?? []) as string[];\n            const personActiveStreams: StreamInfo[] = (cameraStreamsInformation\n                .filter(setting => ips.some(ip => setting.subgroup?.startsWith(ip)) && setting.key === 'type') ?? [])\n                .map(this.mapToStreamInfo);\n\n            knownPeopleResult.push({\n                cameraName,\n                cameraId,\n                person: name,\n                settings: personActiveStreams\n            })\n\n            if (isWhitelisted) {\n                const isPersonActive = !!personActiveStreams.length;\n                const isPersonActiveStreamTopic = `scrypted/activeStreams/${cameraId}/${name}`;\n                const personStreamsInfoTopic = `${isPersonActiveStreamTopic}/info`;\n                const lastIsPersonActiveStreamsSet = this.lastSetMap[isPersonActiveStreamTopic];\n                if (lastIsPersonActiveStreamsSet !== isPersonActive) {\n                    this.publish(isPersonActiveStreamTopic, isPersonActive);\n                    this.publish(personStreamsInfoTopic, { streams: personActiveStreams });\n                    this.lastSetMap[isPersonActiveStreamTopic] = isPersonActive;\n                }\n            }\n        }\n\n        if (isWhitelisted) {\n            const activeStreamsTopic = `scrypted/activeStreams/${cameraId}`;\n            const activeStreamsInfoTopic = `${activeStreamsTopic}/info`;\n            const lastActiveStreamsSet = this.lastSetMap[activeStreamsTopic];\n            if (lastActiveStreamsSet !== activeClients) {\n                this.publish(activeStreamsTopic, activeClients);\n                this.publish(activeStreamsInfoTopic, { streams: knownPeopleResult.flatMap(elem => elem.settings) });\n                this.lastSetMap[activeStreamsTopic] = activeClients;\n            }\n        }\n\n        return { activeClients, knownPeopleResult, cameraName };\n    }\n\n    async start() {\n        this.getMqttClient();\n        await this.putSetting(intervalIdKey, JSON.stringify(this.intervalId));\n\n        const currentInterval = setInterval(async () => {\n            try {\n                if (!this.mqttClient || !this.mqttClient.connected) {\n                    return;\n                }\n\n                const activeStreamsConfigs = await this.getSettings();\n                //this.console.log(`Active streams configs: ${JSON.stringify(activeStreamsConfigs, undefined, 2)}`);\n                const currentIntervalId = Number(activeStreamsConfigs.find(setting => setting.key === intervalIdKey)?.value);\n                const whitelistedCameraIds = (activeStreamsConfigs.find(setting => setting.key === camerasKey)?.value as string[]);\n                const knownPeople = (activeStreamsConfigs.find(setting => setting.key === peopleKey)?.value ?? []) as string[];\n\n                const cameraIds: string[] = [];\n\n                Object.entries(systemManager.getSystemState()).forEach(([deviceId, device]) => {\n                    if (device.interfaces.value.includes(ScryptedInterface.VideoCamera)) {\n                        cameraIds.push(deviceId);\n                    }\n                })\n\n                const cameraData: { id: string, name: string, activeStreams: number }[] = [];\n                const peopleData: { [person: string]: StreamInfo[] } = {};\n\n                if (currentIntervalId && currentIntervalId > this.intervalId || !cameraIds || cameraIds.length === 0) {\n                    this.console.log('Clearing interval because newer script is running');\n                    clearInterval(currentInterval);\n                } else {\n                    let totalActiveStreams = 0;\n                    const totalKnownPeopleResult: KnownPersonResult[] = [];\n\n                    const adaptivePlugin = systemManager.getDeviceByName('Adaptive Streaming') as unknown as (Settings);\n                    const settings = await adaptivePlugin.getSettings();\n\n                    this.console.log(`All settings: ${JSON.stringify(settings, undefined, 2)}`);\n\n                    for (const cameraId of cameraIds) {\n                        const isWhitelisted = whitelistedCameraIds.includes(cameraId);\n                        const { activeClients, knownPeopleResult, cameraName } = await this.processCamera(cameraId, settings, activeStreamsConfigs, isWhitelisted, knownPeople);\n                        totalActiveStreams += activeClients;\n                        totalKnownPeopleResult.push(...knownPeopleResult);\n\n                        knownPeopleResult.forEach(elem => {\n                            const { person, settings } = elem;\n                            if (!peopleData[person]) {\n                                peopleData[person] = [];\n                            }\n\n                            peopleData[person].push(...settings);\n                        });\n\n                        cameraData.push({ name: cameraName, id: cameraId, activeStreams: activeClients });\n                    }\n\n                    for (const person of knownPeople) {\n                        const personStreams = peopleData[person] ?? [];\n                        const activeClients = personStreams.length;\n\n                        const activeStreamsTopic = `scrypted/activeStreams/${person}`;\n                        const activeStreamsInfoTopic = `${activeStreamsTopic}/info`;\n                        const lastActiveStreamsSet = this.lastSetMap[activeStreamsTopic];\n                        if (lastActiveStreamsSet !== activeClients) {\n                            this.publish(activeStreamsTopic, activeClients);\n                            this.publish(activeStreamsInfoTopic, { streams: personStreams });\n                            this.lastSetMap[activeStreamsTopic] = activeClients;\n                        }\n                    }\n\n                    const totalActiveStreamsTopic = `scrypted/activeStreams`;\n                    const totalActiveStreamsInfoTopic = `${totalActiveStreamsTopic}/info`;\n                    const lastTotalActiveStreamsSet = this.lastSetMap[totalActiveStreamsTopic];\n                    if (lastTotalActiveStreamsSet !== totalActiveStreams) {\n                        this.publish(totalActiveStreamsTopic, totalActiveStreams);\n                        this.publish(totalActiveStreamsInfoTopic, \n                            { \n                                streams: settings\n                                .filter(setting => setting.key === 'type')\n                                .map(this.mapToStreamInfo) \n                            });\n                        this.lastSetMap[totalActiveStreamsTopic] = totalActiveStreams;\n                    }\n\n                    if (!this.autodiscoveryPublished) {\n                        for (const data of cameraData) {\n                            const { id: cameraId, name: cameraName } = data;\n                            if (whitelistedCameraIds.includes(cameraId)) {\n                                for (const name of knownPeople) {\n                                    const configTopic = `homeassistant/binary_sensor/scrypted-active-stream-${cameraId}-${name}/ActiveStream/config`;\n                                    const stateTopic = `scrypted/activeStreams/${cameraId}/${name}`;\n                                    const config = {\n                                        state_topic: stateTopic,\n                                        json_attributes_topic: `${stateTopic}/info`,\n                                        json_attributes_template: '{{ value_json | tojson }}',\n                                        payload_on: 'true',\n                                        payload_off: 'false',\n                                        dev: {\n                                            ids: `scrypted-activeStream-${cameraId}-${name}`,\n                                            name: `Active stream for ${cameraName} ${name}`\n                                        },\n                                        unique_id: `scrypted-active-stream-${cameraId}-${name}`,\n                                        name: `${cameraName} ${name} active`,\n                                    };\n                                    this.publish(configTopic, JSON.stringify(config));\n                                }\n\n                                const configTopic = `homeassistant/sensor/scrypted-active-streams-${cameraId}/ActiveStreams/config`;\n                                const stateTopic = `scrypted/activeStreams/${cameraId}`;\n                                const config = {\n                                    state_topic: stateTopic,\n                                    json_attributes_topic: `${stateTopic}/info`,\n                                    json_attributes_template: '{{ value_json | tojson }}',\n                                    dev: {\n                                        ids: `scrypted-activeStreams-${cameraId}`,\n                                        name: `Active streams for ${cameraName}`\n                                    },\n                                    unique_id: `scrypted-active-streams-${cameraId}`,\n                                    name: `${cameraName} active streams`,\n                                };\n                                this.publish(configTopic, JSON.stringify(config));\n                            }\n                        }\n\n                        for (const name of knownPeople) {\n                            const configTopic = `homeassistant/sensor/scrypted-active-stream-${name}/ActiveStream/config`;\n                            const stateTopic = `scrypted/activeStreams/${name}`;\n                            const config = {\n                                state_topic: stateTopic,\n                                json_attributes_topic: `${stateTopic}/info`,\n                                json_attributes_template: '{{ value_json | tojson }}',\n                                dev: {\n                                    ids: `scrypted-activeStreams-${name}`,\n                                    name: `Active streams for ${name}`\n                                },\n                                unique_id: `scrypted-active-streams-${name}`,\n                                name: `${name} active streams`,\n                            };\n                            this.publish(configTopic, JSON.stringify(config));\n                        }\n\n                        const configTopic = `homeassistant/sensor/scrypted-active-streams/ActiveStreams/config`;\n                        const stateTopic = `scrypted/activeStreams`;\n                        const config = {\n                            state_topic: stateTopic,\n                            json_attributes_topic: `${stateTopic}/info`,\n                            json_attributes_template: '{{ value_json | tojson }}',\n                            dev: {\n                                ids: `scrypted-activeStreams`,\n                                name: `Active streams`\n                            },\n                            unique_id: `scrypted-active-streams`,\n                            name: `All active streams`,\n                        };\n                        this.publish(configTopic, JSON.stringify(config));\n\n                        this.autodiscoveryPublished = true;\n                    }\n                }\n            } catch (e) {\n                clearInterval(currentInterval);\n                this.console.log(e);\n            }\n        }, 10000);\n    }\n\n    async getMqttClient() {\n        if (!this.mqttClient) {\n            const url = this.storage.getItem(mqttHostKey);\n            const urlWithoutPath = new URL(url);\n            urlWithoutPath.pathname = '';\n\n            this.mqttPathmame = urlWithoutPath.toString();\n            if(!this.mqttPathmame.endsWith('/')) {\n                this.mqttPathmame = `${this.mqttPathmame}/`;\n            }\n            this.mqttClient = connect(this.mqttPathmame, {\n                rejectUnauthorized: false,\n                username: this.storage.getItem(mqttUsernameKey) || undefined,\n                password: this.storage.getItem(mqttPasswordKey) || undefined,\n            });\n            this.mqttClient.setMaxListeners(Infinity);\n\n            this.mqttClient.on('connect', packet => {\n                this.console.log('connected to mqtt', packet);\n            })\n        }\n\n        return this.mqttClient;\n    }\n\n    async publish(topic: string, value: any) {\n        if (typeof value === 'object')\n            value = JSON.stringify(value);\n        if (value.constructor.name !== Buffer.name)\n            value = value.toString();\n        \n        this.console.log(`Publishing ${value} to ${topic}`);\n        (await this.getMqttClient()).publish(topic, value, { retain: true });\n    }\n}\n","export const intervalIdKey = 'activeStreamsIntervalId';\nexport const camerasKey = 'activeStreamsCameras';\nexport const peopleKey = 'activeStreamsPeople';\nexport const ipsKey = 'activeStreamsIps';\nexport const mqttHostKey = 'activeStreamsMqttHost';\nexport const mqttUsernameKey = 'activeStreamsMqttUsername';\nexport const mqttPasswordKey = 'activeStreamsMqttPassword';\n\nexport interface StreamInfo {\n    ip: string;\n    camera: string;\n}\n\nexport interface KnownPersonResult {\n    cameraName: string,\n    cameraId: string, \n    person: string, \n    settings: StreamInfo[]\n  }\n\n","\n/**\n * For Node.js, simply re-export the core `util.deprecate` function.\n */\n\nmodule.exports = require('util').deprecate;\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (let i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n  const bu = bufferUtil.BufferUtil || bufferUtil;\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bu.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bu.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  EMPTY_BUFFER: Buffer.alloc(0),\n  NOOP: () => {}\n};\n","'use strict';\n\n/**\n * Class representing an event.\n *\n * @private\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(type, target) {\n    this.target = target;\n    this.type = type;\n  }\n}\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n * @private\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The received data\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(data, target) {\n    super('message', target);\n\n    this.data = data;\n  }\n}\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n * @private\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {Number} code The status code explaining why the connection is being\n   *     closed\n   * @param {String} reason A human-readable string explaining why the\n   *     connection is closing\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(code, reason, target) {\n    super('close', target);\n\n    this.wasClean = target._closeFrameReceived && target._closeFrameSent;\n    this.reason = reason;\n    this.code = code;\n  }\n}\n\n/**\n * Class representing an open event.\n *\n * @extends Event\n * @private\n */\nclass OpenEvent extends Event {\n  /**\n   * Create a new `OpenEvent`.\n   *\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(target) {\n    super('open', target);\n  }\n}\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n * @private\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {Object} error The error that generated this event\n   * @param {WebSocket} target A reference to the target to which the event was\n   *     dispatched\n   */\n  constructor(error, target) {\n    super('error', target);\n\n    this.message = error.message;\n    this.error = error;\n  }\n}\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean`` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options) {\n    if (typeof listener !== 'function') return;\n\n    function onMessage(data) {\n      listener.call(this, new MessageEvent(data, this));\n    }\n\n    function onClose(code, message) {\n      listener.call(this, new CloseEvent(code, message, this));\n    }\n\n    function onError(error) {\n      listener.call(this, new ErrorEvent(error, this));\n    }\n\n    function onOpen() {\n      listener.call(this, new OpenEvent(this));\n    }\n\n    const method = options && options.once ? 'once' : 'on';\n\n    if (type === 'message') {\n      onMessage._listener = listener;\n      this[method](type, onMessage);\n    } else if (type === 'close') {\n      onClose._listener = listener;\n      this[method](type, onClose);\n    } else if (type === 'error') {\n      onError._listener = listener;\n      this[method](type, onError);\n    } else if (type === 'open') {\n      onOpen._listener = listener;\n      this[method](type, onOpen);\n    } else {\n      this[method](type, listener);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} listener The listener to remove\n   * @public\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners(type);\n\n    for (let i = 0; i < listeners.length; i++) {\n      if (listeners[i] === listener || listeners[i]._listener === listener) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n\n  if (header === undefined || header === '') return offers;\n\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 /* ' ' */ || code === 0x09 /* '\\t' */) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode, NOOP } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {Buffer} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      //\n      // An `'error'` event is emitted, only on Node.js < 10.0.0, if the\n      // `zlib.DeflateRaw` instance is closed while data is being processed.\n      // This can happen if `PerMessageDeflate#cleanup()` is called at the wrong\n      // time due to an abnormal WebSocket closure.\n      //\n      this._deflate.on('error', NOOP);\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {String} [binaryType=nodebuffer] The type for binary data\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Boolean} [isServer=false] Specifies whether to operate in client or\n   *     server mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(binaryType, extensions, isServer, maxPayload) {\n    super();\n\n    this._binaryType = binaryType || BINARY_TYPES[0];\n    this[kWebSocket] = undefined;\n    this._extensions = extensions || {};\n    this._isServer = !!isServer;\n    this._maxPayload = maxPayload | 0;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n      if (this._masked) unmask(data, this._mask);\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its lenght is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf.toString());\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, '');\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf.toString());\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst mask = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   */\n  constructor(socket, extensions) {\n    this._extensions = extensions || {};\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {Buffer} data The data to frame\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {Buffer[]} The framed data as a list of `Buffer` instances\n   * @public\n   */\n  static frame(data, options) {\n    const merge = options.mask && options.readOnly;\n    let offset = options.mask ? 6 : 2;\n    let payloadLength = data.length;\n\n    if (data.length >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (data.length > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? data.length + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(data.length, 2);\n    } else if (payloadLength === 127) {\n      target.writeUInt32BE(0, 2);\n      target.writeUInt32BE(data.length, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    randomFillSync(mask, 0, 4);\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, data.length);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, data.length);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {String} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || data === '') {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n      buf.write(data, 2);\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doClose, buf, mask, cb]);\n    } else {\n      this.doClose(buf, mask, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a close message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doClose(data, mask, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x08,\n        mask,\n        readOnly: false\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPing, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPing(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a ping message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPing(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x09,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    const buf = toBuffer(data);\n\n    if (buf.length > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    if (this._deflating) {\n      this.enqueue([this.doPong, buf, mask, toBuffer.readOnly, cb]);\n    } else {\n      this.doPong(buf, mask, toBuffer.readOnly, cb);\n    }\n  }\n\n  /**\n   * Frames and sends a pong message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Boolean} [readOnly=false] Specifies whether `data` can be modified\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  doPong(data, mask, readOnly, cb) {\n    this.sendFrame(\n      Sender.frame(data, {\n        fin: true,\n        rsv1: false,\n        opcode: 0x0a,\n        mask,\n        readOnly\n      }),\n      cb\n    );\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const buf = toBuffer(data);\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (rsv1 && perMessageDeflate) {\n        rsv1 = buf.length >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        fin: options.fin,\n        rsv1,\n        opcode,\n        mask: options.mask,\n        readOnly: toBuffer.readOnly\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, buf, this._compress, opts, cb]);\n      } else {\n        this.dispatch(buf, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(buf, {\n          fin: options.fin,\n          rsv1: false,\n          opcode,\n          mask: options.mask,\n          readOnly: toBuffer.readOnly\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a data message.\n   *\n   * @param {Buffer} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += data.length;\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const callback = this._queue[i][4];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= data.length;\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[1].length;\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[1].length;\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let resumeOnReceiverDrain = true;\n  let terminateOnDestroy = true;\n\n  function receiverOnDrain() {\n    if (resumeOnReceiverDrain) ws._socket.resume();\n  }\n\n  if (ws.readyState === ws.CONNECTING) {\n    ws.once('open', function open() {\n      ws._receiver.removeAllListeners('drain');\n      ws._receiver.on('drain', receiverOnDrain);\n    });\n  } else {\n    ws._receiver.removeAllListeners('drain');\n    ws._receiver.on('drain', receiverOnDrain);\n  }\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg) {\n    if (!duplex.push(msg)) {\n      resumeOnReceiverDrain = false;\n      ws._socket.pause();\n    }\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (\n      (ws.readyState === ws.OPEN || ws.readyState === ws.CLOSING) &&\n      !resumeOnReceiverDrain\n    ) {\n      resumeOnReceiverDrain = true;\n      if (!ws._receiver._writableState.needDrain) ws._socket.resume();\n    }\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  let isValidUTF8 = require('utf-8-validate');\n\n  /* istanbul ignore if */\n  if (typeof isValidUTF8 === 'object') {\n    isValidUTF8 = isValidUTF8.Validation.isValidUTF8; // utf-8-validate@<3.0.0\n  }\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8\n  };\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst WebSocket = require('./websocket');\nconst { format, parse } = require('./extension');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) this.clients = new Set();\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Close the server.\n   *\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(cb) {\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSED) {\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    //\n    // Terminate all associated clients.\n    //\n    if (this.clients) {\n      for (const client of this.clients) client.terminate();\n    }\n\n    const server = this._server;\n\n    if (server) {\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // Close the http server if it was internally created.\n      //\n      if (this.options.port != null) {\n        server.close(emitClose.bind(undefined, this));\n        return;\n      }\n    }\n\n    process.nextTick(emitClose, this);\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key'].trim()\n        : false;\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n    const extensions = {};\n\n    if (\n      req.method !== 'GET' ||\n      upgrade === undefined ||\n      upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    if (this.options.perMessageDeflate) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = parse(req.headers['sec-websocket-extensions']);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(key, extensions, req, socket, head, cb);\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(key, extensions, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Object} extensions The accepted extensions\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(key, extensions, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new WebSocket(null);\n    let protocol = req.headers['sec-websocket-protocol'];\n\n    if (protocol) {\n      protocol = protocol.split(',').map(trim);\n\n      //\n      // Optionally call external protocol selection handler.\n      //\n      if (this.options.handleProtocols) {\n        protocol = this.options.handleProtocols(protocol, req);\n      } else {\n        protocol = protocol[0];\n      }\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, this.options.maxPayload);\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => this.clients.delete(ws));\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n\n/**\n * Remove whitespace characters from both ends of a string.\n *\n * @param {String} str The string\n * @return {String} A new string representing `str` stripped of whitespace\n *     characters from both its beginning and end\n * @private\n */\nfunction trim(str) {\n  return str.trim();\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst { addEventListener, removeEventListener } = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = '';\n    this._closeTimer = null;\n    this._extensions = {};\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (Array.isArray(protocols)) {\n        protocols = protocols.join(', ');\n      } else if (typeof protocols === 'object' && protocols !== null) {\n        options = protocols;\n        protocols = undefined;\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onclose(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onerror(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onopen(listener) {}\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return undefined;\n  }\n\n  /* istanbul ignore next */\n  set onmessage(listener) {}\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Number} [maxPayload=0] The maximum allowed message size\n   * @private\n   */\n  setSocket(socket, head, maxPayload) {\n    const receiver = new Receiver(\n      this.binaryType,\n      this._extensions,\n      this._isServer,\n      maxPayload\n    );\n\n    this._sender = new Sender(socket, this._extensions);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {String} [data] A string explaining why the connection is closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        if (listeners[i]._listener) return listeners[i]._listener;\n      }\n\n      return undefined;\n    },\n    set(listener) {\n      const listeners = this.listeners(method);\n      for (let i = 0; i < listeners.length; i++) {\n        //\n        // Remove only the listeners added via `addEventListener`.\n        //\n        if (listeners[i]._listener) this.removeListener(method, listeners[i]);\n      }\n      this.addEventListener(method, listener);\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {String} [protocols] The subprotocols\n * @param {Object} [options] Connection options\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    parsedUrl = new URL(address);\n    websocket._url = address;\n  }\n\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n\n  if (!parsedUrl.host && (!isUnixSocket || !parsedUrl.pathname)) {\n    const err = new Error(`Invalid URL: ${websocket.url}`);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const isSecure =\n    parsedUrl.protocol === 'wss:' || parsedUrl.protocol === 'https:';\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols) {\n    opts.headers['Sec-WebSocket-Protocol'] = protocols;\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalUnixSocket = isUnixSocket;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isUnixSocket\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else {\n      const isSameHost = isUnixSocket\n        ? websocket._originalUnixSocket\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalUnixSocket\n        ? false\n        : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (err) {\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    const protList = (protocols || '').split(/, */);\n    let protError;\n\n    if (!protocols && serverProt) {\n      protError = 'Server sent a subprotocol but none was requested';\n    } else if (protocols && !serverProt) {\n      protError = 'Server sent no subprotocol';\n    } else if (serverProt && !protList.includes(serverProt)) {\n      protError = 'Server sent an invalid subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (extensionNames.length) {\n        if (\n          extensionNames.length !== 1 ||\n          extensionNames[0] !== PerMessageDeflate.extensionName\n        ) {\n          const message =\n            'Server indicated an extension that was not requested';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        try {\n          perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n        } catch (err) {\n          const message = 'Invalid Sec-WebSocket-Extensions header';\n          abortHandshake(websocket, socket, message);\n          return;\n        }\n\n        websocket._extensions[PerMessageDeflate.extensionName] =\n          perMessageDeflate;\n      }\n    }\n\n    websocket.setSocket(socket, head, opts.maxPayload);\n  });\n}\n\n/**\n * Emit the `'error'` and `'close'` event.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {String} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  this[kWebSocket]._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {(String|Buffer|ArrayBuffer|Buffer[])} data The message\n * @private\n */\nfunction receiverOnMessage(data) {\n  this[kWebSocket].emit('message', data);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","'use strict'\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n}\n","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist)\n} catch (er) {}\n","module.exports = require(\"buffer\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"tls\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(7927);\n"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__exportStar","exports","p","prototype","hasOwnProperty","call","value","sdk","MixinDeviceBase","ScryptedDeviceBase","index_1","DeviceBase","constructor","nativeId","super","storage","_storage","deviceManager","getDeviceStorage","log","_log","getDeviceLogger","console","_console","getDeviceConsole","createMediaObject","data","mimeType","mediaManager","sourceId","id","getMediaObjectConsole","mediaObject","getMixinConsole","_lazyLoadDeviceState","_deviceState","getDeviceState","onDeviceEvent","eventInterface","eventData","options","_listeners","Set","mixinDevice","mixinDeviceInterfaces","mixinStorageSuffix","mixinDeviceState","systemManager","getDeviceById","mixinProviderNativeId","__rpcproxy_traps_all_properties","createDeviceState","setState","mixinStorageKey","getMixinStorage","onMixinEvent","manageListener","listener","add","release","l","removeListener","_createGetState","state","_createSetState","warn","field","values","ScryptedInterfaceProperty","set","runtimeAPI","pluginRuntimeAPI","e","assign","endpointManager","pluginHostAPI","setScryptedInterfaceDescriptors","TYPES_VERSION","ScryptedInterfaceDescriptors","catch","error","ScryptedMimeTypes","ScryptedInterface","MediaPlayerState","SecuritySystemObstruction","SecuritySystemMode","AirQuality","AirPurifierMode","AirPurifierStatus","ChargeState","LockState","PanTiltZoomMovement","ThermostatMode","TemperatureUnit","FanMode","HumidityMode","ScryptedDeviceType","ScryptedInterfaceMethod","ScryptedDevice","name","methods","properties","ScryptedPlugin","ScryptedPluginRuntime","OnOff","Brightness","ColorSettingTemperature","ColorSettingRgb","ColorSettingHsv","Notifier","StartStop","Pause","Dock","TemperatureSetting","Thermometer","HumiditySensor","Camera","Microphone","AudioVolumeControl","Display","VideoCamera","VideoCameraMask","VideoRecorder","VideoRecorderManagement","PanTiltZoom","EventRecorder","VideoClips","VideoCameraConfiguration","Intercom","Lock","PasswordStore","Scene","Entry","EntrySensor","DeviceProvider","DeviceDiscovery","DeviceCreator","Battery","Charger","Reboot","Refresh","MediaPlayer","Online","BufferConverter","MediaConverter","Settings","BinarySensor","TamperSensor","PowerSensor","AudioSensor","MotionSensor","AmbientLightSensor","OccupancySensor","FloodSensor","UltravioletSensor","LuminanceSensor","PositionSensor","SecuritySystem","PM10Sensor","PM25Sensor","VOCSensor","NOXSensor","CO2Sensor","AirQualitySensor","AirPurifier","FilterMaintenance","Readme","OauthClient","MixinProvider","HttpRequestHandler","EngineIOHandler","PushHandler","Program","Scriptable","ObjectTracker","ObjectDetector","ObjectDetection","ObjectDetectionPreview","ObjectDetectionGenerator","HumiditySetting","Fan","RTCSignalingChannel","RTCSignalingClient","LauncherApplication","ScryptedUser","VideoFrameGenerator","StreamService","TTY","TTYSettings","ScryptedSystemDevice","ScryptedDeviceCreator","ScryptedSettings","Buffer","symbol","Symbol","for","BufferList","buf","_init","_bufs","length","append","_new","_offset","offset","tot","i","_t","_reverseOffset","blOffset","bufferId","index","slice","start","end","copy","dst","dstStart","srcStart","srcEnd","alloc","off","len","bytes","bufoff","concat","allocUnsafe","shallowSlice","startOffset","endOffset","buffers","pop","toString","encoding","consume","Math","trunc","Number","isNaN","shift","duplicate","buffer","_appendBuffer","from","byteOffset","byteLength","Array","isArray","_isBufferList","push","indexOf","search","TypeError","isBuffer","blIndex","buffOffset","buff","nativeSearchResult","revOffset","_match","searchOffset","readDoubleBE","readDoubleLE","readFloatBE","readFloatLE","readInt32BE","readInt32LE","readUInt32BE","readUInt32LE","readInt16BE","readInt16LE","readUInt16BE","readUInt16LE","readInt8","readUInt8","readIntBE","readIntLE","readUIntBE","readUIntLE","b","isBufferList","module","DuplexStream","inherits","BufferListStream","callback","_callback","piper","err","bind","on","src","_write","_read","size","min","chunk","_destroy","cb","formatArgs","args","useColors","namespace","humanize","diff","c","color","splice","lastC","replace","match","save","namespaces","setItem","removeItem","load","r","getItem","process","env","DEBUG","window","type","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","localStorage","localstorage","destroy","warned","colors","debug","formatters","j","v","JSON","stringify","message","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Date","ms","prev","coerce","unshift","format","formatter","val","apply","selectColor","extend","init","delimiter","newDebug","toNamespace","regexp","substring","default","Error","stack","disable","names","map","skips","join","enable","split","RegExp","test","keys","forEach","key","hash","charCodeAt","abs","browser","tty","util","inspectOpts","stderr","write","formatWithOptions","colorCode","prefix","hideDate","toISOString","getDate","Boolean","isatty","fd","deprecate","supportsColor","level","filter","reduce","obj","prop","_","toUpperCase","inspect","str","trim","O","stream","eos","SIGNAL_FLUSH","Uint8Array","onuncork","fn","_corked","once","destroyer","_autoDestroy","autoDestroy","_ended","noop","Duplexify","readable","opts","Duplex","_writable","_readable","_readable2","_forwardDestroy","_forwardEnd","_ondrain","_drained","_forwarding","_unwrite","_unread","destroyed","setWritable","setReadable","objectMode","highWaterMark","cork","emit","uncork","unend","ondrain","nextTick","resume","rs","onreadable","_forward","onend","_readableState","wrap","enc","_finish","ws","_writableState","prefinished","finished","ending","Writable","cancelled","onlegacyfinish","onfinish","onexit","exitCode","onerror","onclose","onclosenexttick","ended","onrequest","req","setHeader","abort","isRequest","stdio","isChildProcess","flag","argv","startsWith","pos","terminatorPos","ctor","superCtor","super_","TempCtor","extendStatics","__extends","n","setPrototypeOf","__proto__","t","String","__","TreeNode","ee","u","K","N","rr","L","ne","te","TreeNodeEnableIndex","arguments","tr","ie","ContainerIterator","iteratorType","equals","Container","Base","M","empty","throwIteratorAccessError","RangeError","__read","iterator","f","s","next","done","__values","TreeContainer","W","$","re","se","h","fe","parentNode","grandParent","a","curNode","G","he","U","X","Y","Z","ue","clear","ae","g","updateKeyByIterator","eraseElementByPos","eraseElementByKey","eraseElementByIterator","return","getElementByPos","getHeight","traversal","max","TreeIterator","pre","__generator","label","sent","trys","ops","verb","throw","step","OrderedSetIterator","container","OrderedSet","insert","P","begin","rBegin","rEnd","front","back","find","lowerBound","upperBound","reverseLowerBound","reverseUpperBound","union","Yallist","MAX","LENGTH","LENGTH_CALCULATOR","ALLOW_STALE","MAX_AGE","DISPOSE","NO_DISPOSE_ON_SET","LRU_LIST","CACHE","UPDATE_AGE_ON_GET","naiveLength","doUse","node","hit","isStale","del","now","unshiftNode","maxAge","walker","tail","delete","removeNode","forEachStep","thisp","Infinity","lc","stale","dispose","noDisposeOnSet","updateAgeOnGet","reset","mL","allowStale","mA","lengthCalculator","lC","itemCount","rforEach","head","toArray","Map","dump","dumpLru","has","item","peek","arr","expiresAt","prune","protocol","types","codes","CMD_SHIFT","CMD_MASK","DUP_MASK","QOS_MASK","QOS_SHIFT","RETAIN_MASK","VARBYTEINT_MASK","VARBYTEINT_FIN_MASK","VARBYTEINT_MAX","SESSIONPRESENT_MASK","SESSIONPRESENT_HEADER","CONNACK_HEADER","connack","USERNAME_MASK","PASSWORD_MASK","WILL_RETAIN_MASK","WILL_QOS_MASK","WILL_QOS_SHIFT","WILL_FLAG_MASK","CLEAN_SESSION_MASK","CONNECT_HEADER","connect","sessionExpiryInterval","willDelayInterval","receiveMaximum","maximumPacketSize","topicAliasMaximum","requestResponseInformation","requestProblemInformation","userProperties","authenticationMethod","authenticationData","payloadFormatIndicator","messageExpiryInterval","contentType","responseTopic","correlationData","maximumQoS","retainAvailable","assignedClientIdentifier","reasonString","wildcardSubscriptionAvailable","subscriptionIdentifiersAvailable","sharedSubscriptionAvailable","serverKeepAlive","responseInformation","serverReference","topicAlias","subscriptionIdentifier","propertiesCodes","genHeader","qos","dup","retain","writeUInt8","propertiesTypes","PUBLISH_HEADER","SUBSCRIBE_HEADER","SUBSCRIBE_OPTIONS_QOS_MASK","SUBSCRIBE_OPTIONS_NL_MASK","SUBSCRIBE_OPTIONS_NL_SHIFT","SUBSCRIBE_OPTIONS_RAP_MASK","SUBSCRIBE_OPTIONS_RAP_SHIFT","SUBSCRIBE_OPTIONS_RH_MASK","SUBSCRIBE_OPTIONS_RH_SHIFT","SUBSCRIBE_OPTIONS_RH","SUBSCRIBE_OPTIONS_NL","SUBSCRIBE_OPTIONS_RAP","SUBSCRIBE_OPTIONS_QOS","UNSUBSCRIBE_HEADER","ACKS","unsuback","puback","pubcomp","pubrel","pubrec","SUBACK_HEADER","suback","VERSION3","VERSION4","VERSION5","VERSION131","VERSION132","QOS","EMPTY","pingreq","pingresp","disconnect","writeToStream","EventEmitter","Accumulator","_array","_i","lengths","list","result","packet","parser","generate","cache","SubOk","subarray","generateBuffer","generateCache","generateNumber","genBufVariableByteInt","num","digit","generate4ByteBuffer","writeUInt32BE","cmd","topic","payload","bl","Packet","constants","Parser","opt","settings","_states","_resetState","_list","_stateCounter","parse","_parseHeader","zero","_parseLength","_parseVarByteNum","_parsePayload","_pos","_parseConnect","_parseConnack","_parsePublish","_parseConfirmation","_parseSubscribe","_parseSuback","_parseUnsubscribe","_parseUnsuback","_parseDisconnect","_parseAuth","_emitError","password","username","flags","protocolId","_parseString","protocolVersion","bridgeMode","will","clean","keepalive","_parseNum","_parseProperties","getOwnPropertyNames","clientId","willProperties","_parseBuffer","sessionPresent","reasonCode","returnCode","_parseMessageId","rh","rap","nl","subscription","subscriptions","_parseByte","granted","unsubscriptions","messageId","maybeBuffer","_parseStringPair","_parse4ByteNum","fullInfoFlag","current","mul","padding","_parseByType","currentUserProperty","currentValue","_newPacket","zeroBuf","numbers","numCache","writeNumber","writeNumberCached","toGenerate","propertiesData","getProperties","providedUsername","isStringOrBuffer","writeVarByteInt","writeStringOrBuffer","writeString","version","rc","publish","getPropertiesByMaximumPacketSize","confirmation","subs","itopic","iqos","sub","jtopic","jqos","jnl","jrap","jrh","joptions","subscribe","unsubs","unsubscribe","emptyPacket","auth","writeNumberGenerated","varByteIntCache","string","strlen","writeStringPair","number","generatedNumber","toWrite","writeProperties","propertiesLength","getLengthProperty","currentLength","propName","propLength","propValueLength","propValue","valueIndex","mayEmptyProps","currentMayEmptyProp","writeProperty","generated4ByteBuffer","write4ByteNumber","bufOrString","Store","TopicAliasRecv","TopicAliasSend","mqttPacket","DefaultMessageIdProvider","reInterval","clone","validations","xtend","setTimeout","setImmediate","global","defaultConnectOptions","reschedulePings","reconnectPeriod","connectTimeout","resubscribe","errors","removeTopicAliasAndRecoverTopicName","client","alias","topicAliasSend","getTopicByAlias","sendPacket","nop","storeAndSend","cbStorePut","storePacket","outgoingStore","put","MqttClient","streamBuilder","that","rejectUnauthorized","random","substr","customHandleAcks","messageIdProvider","incomingStore","queueQoSZero","_resubscribeTopics","messageIdToTopic","pingTimer","connected","disconnecting","queue","connackTimer","reconnectTimer","_storeProcessing","_packetIdsDuringStoreProcessing","_storeProcessingQueue","outgoing","_firstConnection","topicAliasRecv","deliver","entry","_resubscribe","send","register","_sendPacket","clearTimeout","_setupReconnect","_setupStream","completeParse","packets","nextTickWork","work","_handlePacket","_clearReconnect","pipe","code","volatile","connectPacket","authPacket","setMaxListeners","_cleanUp","_handlePublish","_handleAck","_handlePubrel","_handleConnack","_handleAuth","_handlePingresp","_handleDisconnect","_checkDisconnecting","publishProc","_nextId","invoke","invalidTopic","validateTopics","defaultOpts","currentOpts","subscribeProc","topics","unsubscribeProc","force","closeStores","disconnected","close","e1","e2","_deferredReconnect","finish","removeOutgoingMessage","reconnect","_reconnect","reconnecting","setInterval","clearInterval","forced","autoAssignTopicAlias","getAliasByTopic","getLruAlias","autoUseTopicAlias","applyTopicAlias","_shiftPingInterval","_storePacket","_setupPingTimer","pingResp","_checkPing","reschedule","_onConnect","handleAuth","validReasonCodes","gotTopic","handleMessage","response","pubackRC","deallocate","_invokeStoreProcessingQueue","pubrecRC","grantedI","comp","pub","allocate","getLastMessageId","getLastAllocated","_resubscribeTopicsKeys","connackPacket","topicI","resubscribeTopic","startStreamProcess","outStore","createStream","clearStoreProcessing","remove","_flushStoreProcessingQueue","allProcessed","_invokeAllStoreProcessingQueue","storeDeliver","read","status","Transform","duplexify","my","proxy","isInitialized","hostname","host","websocketSubProtocol","path","wsOptions","setDefaultOpts","url","port","transformWsUrl","buildUrl","connectSocket","protocols","sendSocketMessage","success","fail","_flush","closeSocket","buildProxy","onSocketOpen","onSocketMessage","res","reader","FileReader","addEventListener","ArrayBuffer","readAsArrayBuffer","onSocketClose","onSocketError","brokerUrl","parsed","matches","parseAuthOptions","query","cert","isSecure","defaultProtocol","servers","_reconnectCount","title","__webpack_require__","mqtt","tcp","ssl","tls","mqtts","wx","wxs","ali","alis","wss","net","createConnection","mqttClient","isIP","servername","connection","handleTLSerrors","authorized","WS","WSS_OPTIONS","IS_BROWSER","bufferSize","URL","binary","setDefaultBrowserOpts","browserBufferSize","bufferTimeout","browserBufferTimeout","coerceToBuffer","socket","WebSocket","binaryType","createBrowserWebSocket","socketWrite","socketEnd","objectModeMode","socketWriteBrowser","bufferedAmount","_writev","writev","eventListenerSupport","onopen","onmessage","event","chunks","readyState","OPEN","createWebSocket","webSocketStream","createWebSocketStream","socketTask","errMsg","destroyRef","onOpen","onMessage","onClose","onError","nextId","floor","Readable","streamsOpts","defaultStoreOptions","_inflights","aliasToTopic","LruMap","NumberAllocator","topicToAlias","numberAllocator","use","firstVacant","UniqueMessageIdProvider","lastId","free","validateTopic","parts","Client","d","w","y","plural","msAbs","isPlural","round","exec","parseFloat","isFinite","long","fmtLong","fmtShort","SortedSet","debugTrace","debugError","Interval","low","high","ss","lhs","rhs","compare","other","it","pointer","rLow","rHigh","lLow","intervalCount","element","wrappy","called","onceStrict","onceError","strict","proto","Function","arg1","arg2","arg3","createErrorType","NodeError","getMessage","oneOf","expected","thing","actual","determiner","msg","this_len","endsWith","includes","arg","objectKeys","method","allowHalfOpen","onEndNT","getBuffer","PassThrough","_transform","ReadableState","EElistenerCount","emitter","listeners","Stream","OurUint8Array","debugUtil","debuglog","StringDecoder","createReadableStreamAsyncIterator","destroyImpl","getHighWaterMark","_require$codes","ERR_INVALID_ARG_TYPE","ERR_STREAM_PUSH_AFTER_EOF","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","errorOrDestroy","kProxyEvents","isDuplex","readableObjectMode","pipes","pipesCount","flowing","endEmitted","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","paused","emitClose","defaultEncoding","awaitDrain","readingMore","decoder","readableAddChunk","addToFront","skipChunkCheck","er","emitReadable","emitReadable_","onEofChunk","chunkInvalid","getPrototypeOf","_uint8ArrayToBuffer","addChunk","maybeReadMore","_undestroy","undestroy","isPaused","setEncoding","content","MAX_HWM","howMuchToRead","computeNewHighWaterMark","flow","maybeReadMore_","updateReadableListening","listenerCount","nReadingNextTick","resume_","fromList","ret","first","endReadable","endReadableNT","wState","xs","x","nOrig","doRead","dest","pipeOpts","endFn","stdout","unpipe","onunpipe","unpipeInfo","hasUnpiped","ondata","cleanedUp","needDrain","pipeOnDrain","pause","prependListener","_events","dests","ev","addListener","removeAllListeners","_this","asyncIterator","_fromList","iterable","ERR_MULTIPLE_CALLBACK","ERR_TRANSFORM_ALREADY_TRANSFORMING","ERR_TRANSFORM_WITH_LENGTH_0","afterTransform","ts","_transformState","transforming","writecb","writechunk","needTransform","writeencoding","transform","flush","prefinish","err2","CorkedRequest","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","WritableState","internalUtil","realHasInstance","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_DESTROYED","ERR_STREAM_NULL_VALUES","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","writableObjectMode","finalCalled","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writelen","onwriteStateUpdate","finishMaybe","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","bufferedRequestCount","final","_final","doWrite","onwriteDrain","holder","count","allBuffers","isBuf","callFinal","need","rState","out","hasInstance","object","writeAfterEnd","validChunk","newChunk","decodeChunk","last","writeOrBuffer","setDefaultEncoding","endWritable","_Object$setPrototypeO","_defineProperty","input","hint","prim","toPrimitive","_toPrimitive","_toPropertyKey","kLastResolve","kLastReject","kError","kEnded","kLastPromise","kHandlePromise","kStream","createIterResult","readAndResolve","iter","resolve","onReadable","AsyncIteratorPrototype","ReadableStreamAsyncIteratorPrototype","Promise","reject","promise","lastPromise","then","wrapForNext","_this2","_Object$create","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","_objectSpread","target","source","getOwnPropertyDescriptors","defineProperties","_defineProperties","props","descriptor","custom","instance","Constructor","_classCallCheck","protoProps","staticProps","hasStrings","_getString","_getBuffer","nb","depth","customInspect","emitErrorAndCloseNT","emitErrorNT","emitCloseNT","readableDestroyed","writableDestroyed","ERR_STREAM_PREMATURE_CLOSE","_len","_key","writableEnded","readableEnded","asyncGeneratorStep","gen","_next","_throw","info","_next2","_yield$iterator$next","ERR_MISSING_ARGS","to","streams","popCallback","destroys","closed","ERR_INVALID_OPT_VALUE","duplexKey","hwm","highWaterMarkFrom","READABLE_STREAM","pipeline","ReInterval","interval","_args","_interval","copyBuffer","cur","circles","refs","refsNew","constructorHandlers","cloneArray","handler","cloneProto","a2","isView","o2","rfdcCircles","copyProps","SafeBuffer","encodingOrOffset","allocUnsafeSlow","fill","SlowBuffer","_duplexState","idx","bufferIndex","getStateLength","isEncoding","nenc","retried","_normalizeEncoding","normalizeEncoding","text","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","total","utf8CheckIncomplete","os","hasFlag","forceColor","getSupportLevel","isTTY","platform","osRelease","versions","some","sign","CI_NAME","TEAMCITY_VERSION","COLORTERM","TERM_PROGRAM_VERSION","TERM_PROGRAM","TERM","hasBasic","has256","has16m","translateLevel","FORCE_COLOR","ActiveStreamsConfig","lastSetMap","intervalId","getTime","autodiscoveryPublished","getSettings","currentCameras","camerasKey","currentPeopleRaw","peopleKey","currentPeople","intervalIdKey","readonly","group","mqttHostKey","description","placeholder","mqttUsernameKey","mqttPasswordKey","multiple","deviceFilter","person","personIpsKey","ipsKey","currentIps","subgroup","putSetting","mapToStreamInfo","setting","fullIp","ip","camera","processCamera","cameraId","activeStreamsConfigs","isWhitelisted","knownPeople","cameraName","cameraStreamsInformation","knownPeopleResult","activeClients","ips","personActiveStreams","isPersonActive","isPersonActiveStreamTopic","personStreamsInfoTopic","activeStreamsTopic","activeStreamsInfoTopic","flatMap","elem","getMqttClient","currentInterval","async","currentIntervalId","whitelistedCameraIds","cameraIds","entries","getSystemState","deviceId","device","interfaces","cameraData","peopleData","totalActiveStreams","totalKnownPeopleResult","adaptivePlugin","getDeviceByName","activeStreams","personStreams","totalActiveStreamsTopic","totalActiveStreamsInfoTopic","configTopic","stateTopic","config","state_topic","json_attributes_topic","json_attributes_template","payload_on","payload_off","dev","ids","unique_id","urlWithoutPath","pathname","mqttPathmame","wrapper","Server","Receiver","Sender","EMPTY_BUFFER","totalLength","_mask","mask","output","_unmask","toArrayBuffer","toBuffer","readOnly","bufferUtil","bu","BufferUtil","unmask","BINARY_TYPES","GUID","kStatusCode","kWebSocket","NOOP","Event","MessageEvent","CloseEvent","reason","wasClean","_closeFrameReceived","_closeFrameSent","OpenEvent","ErrorEvent","EventTarget","_listener","removeEventListener","tokenChars","extensions","extension","configurations","params","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","token","kDone","kRun","concurrency","pending","jobs","job","zlib","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","zlibLimiter","deflateOnData","inflateOnData","_maxPayload","inflateOnError","_inflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","cleanup","accepted","isInteger","decompress","fin","_decompress","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","PerMessageDeflate","isValidStatusCode","isValidUTF8","ErrorCtor","statusCode","errorCode","captureStackTrace","_binaryType","_extensions","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","startLoop","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","compressed","haveLength","pow","controlMessage","dataMessage","messageLength","fragments","randomFillSync","applyMask","_socket","_firstFragment","_deflating","_queue","frame","merge","payloadLength","opcode","rsv1","writeUInt16BE","enqueue","doClose","sendFrame","ping","doPing","pong","doPong","perMessageDeflate","dispatch","dequeue","Reflect","duplexOnEnd","duplexOnError","resumeOnReceiverDrain","terminateOnDestroy","receiverOnDrain","CONNECTING","_receiver","duplex","CLOSED","terminate","CLOSING","_isValidUTF8","Validation","http","createHash","keyRegex","server","socketOnError","abortHandshake","headers","STATUS_CODES","Connection","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","body","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","upgrade","handleUpgrade","clients","address","shouldHandle","origin","secure","encrypted","verified","completeUpgrade","update","digest","_protocol","setSocket","https","randomBytes","readyStates","protocolVersions","_closeCode","_closeMessage","_closeTimer","_readyState","_sender","_bufferedAmount","_redirects","initAsClient","_url","receiver","receiverOnConclude","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setNoDelay","socketOnClose","socketOnData","socketOnEnd","_req","sendAfterClose","websocket","followRedirects","maxRedirects","socketPath","timeout","parsedUrl","href","isUnixSocket","emitErrorAndClose","defaultPort","tlsConnect","netConnect","Upgrade","handshakeTimeout","Origin","_originalUnixSocket","_originalSecure","_originalHostOrSocketPath","isSameHost","authorization","cookie","aborted","location","addr","serverProt","protList","protError","secWebSocketExtensions","extensionNames","receiverOnFinish","property","inserted","Node","pushNode","forEachReverse","getReverse","mapReverse","initial","acc","reduceReverse","toArrayReverse","sliceReverse","deleteCount","nodes","reverse","require","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","definition","__webpack_exports__"],"sourceRoot":""}